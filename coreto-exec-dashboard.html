<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CORETO â€” åç›Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€çµŒå–¶é™£å°‚ç”¨ã€‘</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Kaisei+Tokumin:wght@400;700&family=DM+Mono:wght@400;500&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0d0f14;--card:#141820;--card2:#191e28;--bg2:#13161e;--bg3:#1a1e29;
  --border:#252a38;--border2:#2e3447;
  --text:#e8eaf0;--sub:#8b90a8;--muted:#4a4f68;
  --gold:#c9a840;--gold2:#e8c85a;--gold-bg:rgba(201,168,64,.08);--gold-glow:rgba(201,168,64,.2);
  --re:#4fa3c8;--hr:#52c49a;--pt:#a78bfa;
  --red:#f87171;--green:#4ade80;--blue:#60a5fa;
}
html,body{min-height:100vh;background:var(--bg);color:var(--text);font-family:'Noto Sans JP',sans-serif}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(circle at 20% 20%,rgba(201,168,64,.04),transparent 50%),radial-gradient(circle at 80% 80%,rgba(79,163,200,.03),transparent 50%);pointer-events:none}

/* Header */
.hdr{position:sticky;top:0;z-index:99;height:52px;background:rgba(13,15,20,.95);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 24px}
.hdr-logo{font-family:'Kaisei Tokumin',serif;font-size:17px;letter-spacing:3px;color:var(--gold)}
.hdr-badge{font-size:9px;padding:3px 8px;border-radius:4px;background:rgba(245,158,11,.12);color:#f59e0b;border:1px solid rgba(245,158,11,.25);font-family:'DM Mono',monospace;letter-spacing:1.5px}
.hdr-right{display:flex;align-items:center;gap:10px}
.hdr-btn{padding:6px 14px;border-radius:7px;border:1px solid var(--border2);background:transparent;color:var(--sub);font-size:11px;cursor:pointer;transition:.15s;font-family:'Noto Sans JP',sans-serif}
.hdr-btn:hover{border-color:var(--gold);color:var(--gold)}

/* Period toggle */
.period-bar{display:flex;gap:6px;padding:16px 24px 0}
.period-btn{padding:6px 16px;border-radius:7px;border:1px solid var(--border2);background:transparent;color:var(--sub);font-size:11px;cursor:pointer;transition:.15s;font-family:'DM Mono',monospace}
.period-btn:hover{border-color:var(--gold);color:var(--gold)}
.period-btn.active{background:var(--gold-bg);border-color:var(--gold);color:var(--gold)}

/* Main grid */
.main{padding:20px 24px 60px;max-width:1400px;position:relative;z-index:1}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-bottom:16px}
.grid4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:16px}

/* KPI cards */
.kpi-card{background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:18px 20px}
.kpi-label{font-size:9px;color:var(--muted);letter-spacing:2px;font-family:'DM Mono',monospace;text-transform:uppercase;margin-bottom:8px}
.kpi-val{font-family:'DM Mono',monospace;font-size:26px;font-weight:500;line-height:1}
.kpi-val.gold{color:var(--gold2)}
.kpi-val.green{color:var(--green)}
.kpi-val.red{color:var(--red)}
.kpi-val.blue{color:var(--blue)}
.kpi-delta{font-size:10px;margin-top:6px;font-family:'DM Mono',monospace}
.kpi-delta.up{color:var(--green)}
.kpi-delta.down{color:var(--red)}
.kpi-delta.flat{color:var(--muted)}
.kpi-sub{font-size:10px;color:var(--muted);margin-top:3px}

/* Cards */
.card{background:var(--bg2);border:1px solid var(--border);border-radius:12px;overflow:hidden}
.card-hdr{padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.card-title{font-size:11px;font-weight:700;letter-spacing:.5px}
.card-sub{font-size:10px;color:var(--muted);font-family:'DM Mono',monospace}
.card-body{padding:16px 18px}

/* Section label */
.sec-label{font-size:9px;color:var(--muted);letter-spacing:3px;text-transform:uppercase;font-family:'DM Mono',monospace;margin:24px 0 12px}

/* Bar chart */
.bar-chart{display:flex;align-items:flex-end;gap:8px;height:160px;padding:0 0 8px}
.bar-col{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px}
.bar-wrap{width:100%;flex:1;display:flex;align-items:flex-end;position:relative}
.bar-bg{position:absolute;bottom:0;left:0;right:0;height:100%;background:var(--border);border-radius:4px 4px 0 0}
.bar-fill{position:absolute;bottom:0;left:0;right:0;border-radius:4px 4px 0 0;transition:height .6s cubic-bezier(.4,0,.2,1)}
.bar-label{font-size:9px;color:var(--muted);font-family:'DM Mono',monospace;white-space:nowrap}
.bar-val{font-size:9px;font-family:'DM Mono',monospace;white-space:nowrap}

/* Stacked bar (income/cost/profit) */
.stacked-chart{display:flex;align-items:flex-end;gap:6px;height:180px;padding:0 0 8px}
.stacked-col{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px}
.stacked-wrap{width:100%;flex:1;display:flex;flex-direction:column;justify-content:flex-end;border-radius:4px 4px 0 0;overflow:hidden;position:relative}
.stacked-income{background:rgba(79,163,200,.5)}
.stacked-cost{background:rgba(248,113,113,.5)}
.stacked-profit{background:rgba(74,222,128,.7)}

/* Donut */
.donut-wrap{display:flex;align-items:center;gap:24px}
.donut{width:120px;height:120px;flex-shrink:0}
.donut-legend{flex:1}
.dl-item{display:flex;align-items:center;gap:8px;padding:5px 0;border-bottom:1px solid var(--border)}
.dl-item:last-child{border-bottom:none}
.dl-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.dl-label{font-size:11px;flex:1}
.dl-pct{font-family:'DM Mono',monospace;font-size:11px;color:var(--sub)}
.dl-val{font-family:'DM Mono',monospace;font-size:11px;color:var(--text)}

/* PL table */
.pl-table{width:100%;border-collapse:collapse;font-size:12px}
.pl-table tr{border-bottom:1px solid var(--border)}
.pl-table tr:last-child{border-bottom:none}
.pl-table td{padding:9px 12px;vertical-align:middle}
.pl-table td:first-child{color:var(--sub);width:45%}
.pl-table td:last-child{font-family:'DM Mono',monospace;text-align:right}
.pl-subtotal{background:var(--bg3)}
.pl-subtotal td{font-weight:700}
.pl-total{background:var(--gold-bg)}
.pl-total td{color:var(--gold2);font-weight:700;font-size:13px}
.pl-indent td:first-child{padding-left:24px;font-size:11px}

/* Agent top list */
.agent-row{display:flex;align-items:center;gap:12px;padding:9px 0;border-bottom:1px solid var(--border)}
.agent-row:last-child{border-bottom:none}
.agent-rank{font-family:'DM Mono',monospace;font-size:11px;color:var(--muted);width:20px;text-align:center;flex-shrink:0}
.agent-name{flex:1;font-size:12px}
.agent-bar-wrap{width:120px;height:6px;background:var(--border);border-radius:3px;flex-shrink:0}
.agent-bar{height:100%;border-radius:3px;background:var(--gold);transition:width .6s}
.agent-val{font-family:'DM Mono',monospace;font-size:11px;color:var(--sub);width:70px;text-align:right;flex-shrink:0}
.type-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}

/* Alert row */
.alert-row{display:flex;align-items:center;gap:10px;padding:9px 12px;border-radius:8px;margin-bottom:8px;font-size:11px}
.alert-red{background:rgba(248,113,113,.1);border:1px solid rgba(248,113,113,.2);color:var(--red)}
.alert-yellow{background:rgba(234,179,8,.08);border:1px solid rgba(234,179,8,.2);color:#facc15}
.alert-green{background:rgba(74,222,128,.08);border:1px solid rgba(74,222,128,.2);color:var(--green)}

::-webkit-scrollbar{width:4px;height:4px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border2);border-radius:2px}

/* â”€â”€ ç´¹ä»‹ãƒªãƒ³ã‚¯ãƒ¢ãƒ¼ãƒ€ãƒ« â”€â”€ */
#ref-modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.65);z-index:9000;align-items:center;justify-content:center}
#ref-modal-overlay.open{display:flex}
#ref-modal{background:var(--card);border:1px solid var(--border2);border-radius:16px;padding:0;width:min(460px,92vw);overflow:hidden}
.ref-mhdr{padding:16px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.ref-mhdr-t{font-family:'Syne',sans-serif;font-size:14px;font-weight:800;color:var(--gold)}
.ref-mbody{padding:20px}
.ref-url{background:var(--card2);border:1px solid var(--border2);border-radius:8px;padding:10px 12px;font-family:'DM Mono',monospace;font-size:11px;color:var(--sub);word-break:break-all;margin:10px 0;min-height:36px}
.ref-copy-btn{width:100%;padding:10px;border-radius:8px;border:none;cursor:pointer;font-family:inherit;font-size:13px;font-weight:700;background:var(--gold);color:#0a0c10;margin-top:4px}
.ref-copy-btn:hover{opacity:.9}

/* â”€â”€ ç´¹ä»‹ãƒªãƒ³ã‚¯ å·¦ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ â”€â”€ */
#ref-float-btn {
  position: fixed;
  left: 0;
  top: 50%;
  transform: translateY(-50%) translateX(-100%) rotate(-90deg);
  transform-origin: right bottom;
  z-index: 8000;
  background: rgba(201,168,76,.18);
  border: 1px solid rgba(201,168,76,.4);
  border-bottom: none;
  border-radius: 8px 8px 0 0;
  color: var(--gold);
  padding: 6px 16px;
  font-size: 11px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  white-space: nowrap;
  letter-spacing: .5px;
  transition: background .15s;
}
#ref-float-btn:hover { background: rgba(201,168,76,.32); }
</style>
</head>
<body>

<div class="hdr">
  <div style="display:flex;align-items:center;gap:12px">
    <div class="hdr-logo">CORETO</div>
    <div class="hdr-badge">ğŸ‘ EXEC ONLY</div>
  </div>
  <div style="font-size:11px;color:var(--sub)">åç›Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â€” P&amp;L</div>
  <div class="hdr-right">
    <button class="hdr-btn" onclick="location.href='coreto-hub.html'">â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
  </div>
</div>

<div class="period-bar">
  <button class="period-btn active" onclick="setPeriod('monthly',this)">æœˆæ¬¡</button>
  <button class="period-btn" onclick="setPeriod('quarterly',this)">å››åŠæœŸ</button>
  <button class="period-btn" onclick="setPeriod('ytd',this)">å¹´åº¦ç´¯è¨ˆ</button>
  <span style="font-size:10px;color:var(--muted);font-family:'DM Mono',monospace;line-height:30px;margin-left:12px">åŸºæº–æœˆ: 2026å¹´2æœˆ</span>
</div>

<div class="main">

<!-- â”€ KPIs â”€ -->
<div class="sec-label">KEY PERFORMANCE INDICATORS</div>
<div class="grid4">
  <div class="kpi-card">
    <div class="kpi-label">ç·åå…¥ï¼ˆä»²ä»‹æ–™ï¼‰</div>
    <div class="kpi-val gold" id="kpi-income">Â¥9,840,000</div>
    <div class="kpi-delta up" id="kpi-income-d">â–² +12.3% å‰æœˆæ¯”</div>
    <div class="kpi-sub" id="kpi-income-s">æˆç´„18ä»¶ Ã— å¹³å‡å˜ä¾¡</div>
  </div>
  <div class="kpi-card">
    <div class="kpi-label">ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ”¯æ‰•ç·é¡</div>
    <div class="kpi-val red" id="kpi-cost">Â¥6,840,000</div>
    <div class="kpi-delta down" id="kpi-cost-d">â–¼ +8.1% å‰æœˆæ¯”</div>
    <div class="kpi-sub" id="kpi-cost-s">å ±é…¬ + æœˆä¼šè²»æ§é™¤</div>
  </div>
  <div class="kpi-card">
    <div class="kpi-label">ç´”åˆ©ç›Šï¼ˆç²—åˆ©ï¼‰</div>
    <div class="kpi-val green" id="kpi-profit">Â¥3,000,000</div>
    <div class="kpi-delta up" id="kpi-profit-d">â–² +18.5% å‰æœˆæ¯”</div>
    <div class="kpi-sub" id="kpi-profit-s">åˆ©ç›Šç‡ 30.5%</div>
  </div>
  <div class="kpi-card">
    <div class="kpi-label">æœˆä¼šè²»åå…¥</div>
    <div class="kpi-val blue" id="kpi-fee">Â¥48,580</div>
    <div class="kpi-delta flat" id="kpi-fee-d">â†’ Bronze 38å + Silver 24å</div>
    <div class="kpi-sub" id="kpi-fee-s">Â¥980 Ã— 38 ï¼‹ Â¥490 Ã— 24</div>
  </div>
</div>

<div class="grid4">
  <div class="kpi-card">
    <div class="kpi-label">æˆç´„ä»¶æ•°</div>
    <div class="kpi-val" id="kpi-cases">18ä»¶</div>
    <div class="kpi-delta up" id="kpi-cases-d">â–² +3ä»¶ å‰æœˆæ¯”</div>
  </div>
  <div class="kpi-card">
    <div class="kpi-label">ç¨¼åƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</div>
    <div class="kpi-val" id="kpi-agents">31å</div>
    <div class="kpi-delta up" id="kpi-agents-d">RE:18 / HR:13</div>
  </div>
  <div class="kpi-card">
    <div class="kpi-label">å³æ™‚æ‰•ã„æ‰‹æ•°æ–™åå…¥</div>
    <div class="kpi-val gold" id="kpi-instant">Â¥312,750</div>
    <div class="kpi-delta flat" id="kpi-instant-d">5ä»¶ Ã— 15%</div>
  </div>
  <div class="kpi-card">
    <div class="kpi-label">è¿”é‡‘ãƒªã‚¹ã‚¯ï¼ˆæ—©æœŸé€€è·ï¼‰</div>
    <div class="kpi-val red" id="kpi-refund">Â¥693,000</div>
    <div class="kpi-delta down" id="kpi-refund-d">å¯¾å¿œå¾…ã¡ 2ä»¶</div>
  </div>
</div>

<!-- â”€ Charts row â”€ -->
<div class="grid2">
  <!-- Monthly bar chart -->
  <div class="card">
    <div class="card-hdr">
      <div class="card-title">æœˆæ¬¡åç›Šæ¨ç§»</div>
      <div class="card-sub">ç›´è¿‘6ãƒ¶æœˆ</div>
    </div>
    <div class="card-body">
      <div style="display:flex;gap:12px;margin-bottom:12px;font-size:10px">
        <span style="display:flex;align-items:center;gap:4px"><span style="width:10px;height:10px;border-radius:2px;background:rgba(79,163,200,.6);display:inline-block"></span>ç·åå…¥</span>
        <span style="display:flex;align-items:center;gap:4px"><span style="width:10px;height:10px;border-radius:2px;background:rgba(248,113,113,.5);display:inline-block"></span>æ”¯æ‰•</span>
        <span style="display:flex;align-items:center;gap:4px"><span style="width:10px;height:10px;border-radius:2px;background:rgba(74,222,128,.7);display:inline-block"></span>ç´”åˆ©ç›Š</span>
      </div>
      <div id="bar-chart-monthly" class="stacked-chart"></div>
    </div>
  </div>

  <!-- Revenue breakdown donut -->
  <div class="card">
    <div class="card-hdr">
      <div class="card-title">åå…¥å†…è¨³ï¼ˆä»Šæœˆï¼‰</div>
      <div class="card-sub">2026å¹´2æœˆ</div>
    </div>
    <div class="card-body">
      <div class="donut-wrap">
        <svg class="donut" viewBox="0 0 120 120">
          <circle cx="60" cy="60" r="50" fill="none" stroke="var(--border)" stroke-width="18"/>
          <!-- RE brokerage: 68% -->
          <circle cx="60" cy="60" r="50" fill="none" stroke="var(--re)" stroke-width="18"
            stroke-dasharray="213.6 100" stroke-dashoffset="0" transform="rotate(-90 60 60)"/>
          <!-- HR placement: 22% -->
          <circle cx="60" cy="60" r="50" fill="none" stroke="var(--hr)" stroke-width="18"
            stroke-dasharray="69.1 244.5" stroke-dashoffset="-213.6" transform="rotate(-90 60 60)"/>
          <!-- Fee income: 5% -->
          <circle cx="60" cy="60" r="50" fill="none" stroke="var(--gold)" stroke-width="18"
            stroke-dasharray="15.7 298" stroke-dashoffset="-282.7" transform="rotate(-90 60 60)"/>
          <!-- Instant fee: 5% -->
          <circle cx="60" cy="60" r="50" fill="none" stroke="var(--pt)" stroke-width="18"
            stroke-dasharray="15.7 298" stroke-dashoffset="-298.4" transform="rotate(-90 60 60)"/>
          <text x="60" y="56" text-anchor="middle" fill="var(--gold2)" font-size="11" font-family="DM Mono">Â¥9,840,000</text>
          <text x="60" y="68" text-anchor="middle" fill="var(--muted)" font-size="8">ç·åå…¥</text>
        </svg>
        <div class="donut-legend">
          <div class="dl-item"><div class="dl-dot" style="background:var(--re)"></div><div class="dl-label">ä¸å‹•ç”£ä»²ä»‹æ–™</div><div class="dl-pct">68%</div><div class="dl-val">Â¥6,690,000</div></div>
          <div class="dl-item"><div class="dl-dot" style="background:var(--hr)"></div><div class="dl-label">äººæç´¹ä»‹æ–™</div><div class="dl-pct">22%</div><div class="dl-val">Â¥2,160,000</div></div>
          <div class="dl-item"><div class="dl-dot" style="background:var(--gold)"></div><div class="dl-label">æœˆä¼šè²»åå…¥</div><div class="dl-pct">0.5%</div><div class="dl-val">Â¥48,580</div></div>
          <div class="dl-item"><div class="dl-dot" style="background:var(--pt)"></div><div class="dl-label">å³æ™‚æ‰•ã„æ‰‹æ•°æ–™</div><div class="dl-pct">3%</div><div class="dl-val">Â¥312,750</div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- â”€ P&L Table + Top agents â”€ -->
<div class="grid2">
  <!-- P&L -->
  <div class="card">
    <div class="card-hdr">
      <div class="card-title">P&amp;L â€” 2026å¹´2æœˆ</div>
      <div class="card-sub">æ¦‚ç®—</div>
    </div>
    <div class="card-body" style="padding:0">
      <table class="pl-table">
        <tr><td colspan="2" style="padding:10px 12px;font-size:9px;color:var(--muted);letter-spacing:2px;font-family:'DM Mono',monospace">â–  åå…¥</td></tr>
        <tr class="pl-indent"><td>ä¸å‹•ç”£ä»²ä»‹æ‰‹æ•°æ–™</td><td style="color:var(--blue)">Â¥6,691,200</td></tr>
        <tr class="pl-indent"><td>äººæç´¹ä»‹æ‰‹æ•°æ–™</td><td style="color:var(--blue)">Â¥2,163,840</td></tr>
        <tr class="pl-indent"><td>æœˆä¼šè²»åå…¥</td><td style="color:var(--blue)">Â¥48,580</td></tr>
        <tr class="pl-indent"><td>å³æ™‚æ‰•ã„æ‰‹æ•°æ–™</td><td style="color:var(--blue)">Â¥312,750</td></tr>
        <tr class="pl-subtotal"><td>åå…¥åˆè¨ˆ</td><td style="color:var(--gold2)">Â¥9,216,370</td></tr>
        <tr><td colspan="2" style="padding:10px 12px;font-size:9px;color:var(--muted);letter-spacing:2px;font-family:'DM Mono',monospace">â–  ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ”¯æ‰•</td></tr>
        <tr class="pl-indent"><td>ä¸å‹•ç”£AGå ±é…¬</td><td style="color:var(--red)">â–² Â¥4,862,400</td></tr>
        <tr class="pl-indent"><td>äººæAGå ±é…¬ï¼ˆç¬¬1å›ï¼‰</td><td style="color:var(--red)">â–² Â¥1,513,688</td></tr>
        <tr class="pl-indent"><td>ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç´¹ä»‹æ–™</td><td style="color:var(--red)">â–² Â¥462,400</td></tr>
        <tr class="pl-subtotal"><td>æ”¯æ‰•åˆè¨ˆ</td><td style="color:var(--red)">â–² Â¥6,838,488</td></tr>
        <tr class="pl-total"><td>ç²—åˆ©ç›Š</td><td>Â¥2,377,882</td></tr>
        <tr class="pl-indent"><td style="color:var(--muted)">åˆ©ç›Šç‡</td><td style="color:var(--green)">25.8%</td></tr>
      </table>
    </div>
  </div>

  <!-- Top agents -->
  <div class="card">
    <div class="card-hdr">
      <div class="card-title">å£²ä¸Šä¸Šä½ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆä»Šæœˆï¼‰</div>
      <div class="card-sub">å€‹äººå£²ä¸Š</div>
    </div>
    <div class="card-body" id="top-agents-list">
    </div>
  </div>
</div>

<!-- â”€ Alerts & risks â”€ -->
<div class="sec-label">ALERTS &amp; RISKS</div>
<div class="alert-row alert-red">
  ğŸš¨ <strong>æ—©æœŸé€€è· æœªå¯¾å¿œ2ä»¶</strong> â€” è¿”é‡‘ãƒªã‚¹ã‚¯åˆè¨ˆ Â¥693,000ã€‚éˆ´æœ¨å¥ä¸€ï¼ˆç¬¬2å›æ”¯æ‰•æœŸé™ æœ¬æ—¥ï¼‰ã€ç”°ä¸­æ‹“æµ·ï¼ˆç¢ºèªå¾…ã¡7æ—¥è¶…éï¼‰
</div>
<div class="alert-row alert-yellow">
  âš ï¸ <strong>KYCå¯©æŸ»å¾…ã¡ 4ä»¶</strong> â€” åç¾©ä¸ä¸€è‡´ãƒ•ãƒ©ã‚° 1ä»¶ï¼ˆè¦ç¢ºèªï¼‰ã€‚å¹³å‡å‡¦ç†å¾…ã¡ 2.3æ—¥
</div>
<div class="alert-row alert-yellow">
  âš ï¸ <strong>å³æ™‚æ‰•ã„ç”³è«‹ 3ä»¶</strong> â€” 2FAèªè¨¼æ¸ˆã¿æŒ¯è¾¼å¾…ã¡ã€‚åˆè¨ˆ Â¥2,085,000
</div>
<div class="alert-row alert-green">
  âœ… <strong>ä»Šæœˆãƒãƒƒãƒæº–å‚™å®Œäº†</strong> â€” 3æœˆ25æ—¥æŒ¯è¾¼äºˆå®š Â¥6,838,488ã€‚å…¨éŠ€ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›å¯èƒ½
</div>

<!-- â”€ Cost breakdown â”€ -->
<div class="sec-label">æ”¯æ‰•ã‚³ã‚¹ãƒˆå†…è¨³</div>
<div class="card">
  <div class="card-hdr"><div class="card-title">ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç¨®åˆ¥ Ã— ã‚³ã‚¹ãƒˆï¼ˆä»Šæœˆï¼‰</div></div>
  <div class="card-body">
    <div id="cost-bar-chart" class="bar-chart" style="height:120px"></div>
  </div>
</div>

</div><!-- /main -->

<script>
// â•â• AUTH GUARD (çµŒå–¶é™£å°‚ç”¨) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function() {
  var s = null;
  try { s = JSON.parse(sessionStorage.getItem('coreto_session') || 'null'); } catch(e) {}
  var HQ_LEVEL = { exec: 3, manager: 2, staff: 1 };
  if (!s || s.type !== 'hq' || (HQ_LEVEL[s.hqRole] || 0) < 3) { location.replace('coreto-hub.html'); }
  window._SESSION = s;
})();

// â”€ Data â”€
const DATA = {
  monthly: {
    months:['9æœˆ','10æœˆ','11æœˆ','12æœˆ','1æœˆ','2æœˆ'],
    income:[7200000,7800000,8100000,8600000,8750000,9216370],
    cost:  [5100000,5500000,5700000,6000000,6320000,6838488],
    profit:[2100000,2300000,2400000,2600000,2430000,2377882],
  },
  quarterly: {
    months:['Q2 FY25','Q3 FY25','Q4 FY25','Q1 FY26'],
    income:[20800000,23100000,24450000,26566370],
    cost:  [14600000,16200000,17020000,18458488],
    profit:[6200000, 6900000, 7430000, 8107882],
  },
  ytd: {
    months:['4æœˆ','5æœˆ','6æœˆ','7æœˆ','8æœˆ','9æœˆ','10æœˆ','11æœˆ','12æœˆ','1æœˆ','2æœˆ'],
    income:[6200000,6500000,6800000,7000000,7100000,7200000,7800000,8100000,8600000,8750000,9216370],
    cost:  [4400000,4600000,4800000,4900000,5000000,5100000,5500000,5700000,6000000,6320000,6838488],
    profit:[1800000,1900000,2000000,2100000,2100000,2100000,2300000,2400000,2600000,2430000,2377882],
  },
};

const TOP_AGENTS = [
  { name:'ä½è—¤ èŠ±å­',  type:'re', rev:1800000 },
  { name:'å±±ç”° èª ',    type:'re', rev:1200000 },
  { name:'å°æ— ä¿Šä»‹',  type:'re', rev:1000000 },
  { name:'ç”°ä¸­ ç¾ç©‚',  type:'hr', rev:860000  },
  { name:'æ¾æœ¬ ç”±ç¾',  type:'hr', rev:560000  },
  { name:'éˆ´æœ¨ å¥å¤ª',  type:'re', rev:720000  },
  { name:'å‰ç”° å¤§è¼”',  type:'re', rev:490000  },
];

const COST_DATA = [
  { label:'ä¸å‹•ç”£AG', val:4862400, color:'var(--re)' },
  { label:'äººæAG',   val:1513688, color:'var(--hr)' },
  { label:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼', val:462400, color:'var(--pt)' },
];

const TYPE_COLOR = { re:'var(--re)', hr:'var(--hr)', pt:'var(--pt)' };

let currentPeriod = 'monthly';

function setPeriod(p, btn) {
  currentPeriod = p;
  document.querySelectorAll('.period-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  renderCharts();
  updateKPIs();
}

function yen(v) {
  return 'Â¥' + Math.round(v).toLocaleString();
}

function renderCharts() {
  const d = DATA[currentPeriod];
  const maxVal = Math.max(...d.income);
  const chart = document.getElementById('bar-chart-monthly');
  chart.innerHTML = d.months.map((m,i) => {
    const incH = Math.round((d.income[i]/maxVal)*100);
    const costH = Math.round((d.cost[i]/maxVal)*100);
    const profH = Math.round((d.profit[i]/maxVal)*100);
    return `<div class="stacked-col">
      <div class="bar-val" style="color:var(--gold2);font-size:8px">${yen(d.profit[i])}</div>
      <div class="stacked-wrap" style="height:${incH}%">
        <div style="height:${Math.round(profH/incH*100)}%;background:rgba(74,222,128,.7)"></div>
        <div style="height:${Math.round((costH/incH)*100)}%;background:rgba(248,113,113,.4)"></div>
      </div>
      <div class="bar-label">${m}</div>
    </div>`;
  }).join('');

  // Cost breakdown bar
  const maxCost = Math.max(...COST_DATA.map(c=>c.val));
  document.getElementById('cost-bar-chart').innerHTML = COST_DATA.map(c => {
    const pct = Math.round(c.val/maxCost*100);
    return `<div class="bar-col">
      <div class="bar-val" style="color:${c.color}">${yen(c.val)}</div>
      <div class="bar-wrap"><div class="bar-bg"></div><div class="bar-fill" style="height:${pct}%;background:${c.color};opacity:.7"></div></div>
      <div class="bar-label">${c.label}</div>
    </div>`;
  }).join('');
}

function updateKPIs() {
  const d = DATA[currentPeriod];
  const last = d.income.length-1;
  const prev = last > 0 ? last-1 : 0;
  const inc = d.income[last], prevInc = d.income[prev];
  const cost = d.cost[last], prevCost = d.cost[prev];
  const prof = d.profit[last], prevProf = d.profit[prev];
  const incDelta = prevInc > 0 ? ((inc-prevInc)/prevInc*100).toFixed(1) : 0;
  const profDelta = prevProf > 0 ? ((prof-prevProf)/prevProf*100).toFixed(1) : 0;
  const profRate = (prof/inc*100).toFixed(1);

  document.getElementById('kpi-income').textContent = yen(inc);
  document.getElementById('kpi-income-d').textContent = (incDelta>0?'â–² +':'â–¼ ')+incDelta+'%';
  document.getElementById('kpi-income-d').className = 'kpi-delta '+(incDelta>=0?'up':'down');
  document.getElementById('kpi-cost').textContent = yen(cost);
  document.getElementById('kpi-profit').textContent = yen(prof);
  document.getElementById('kpi-profit-d').textContent = (profDelta>0?'â–² +':'â–¼ ')+profDelta+'%';
  document.getElementById('kpi-profit-d').className = 'kpi-delta '+(profDelta>=0?'up':'down');
  document.getElementById('kpi-profit-s').textContent = 'åˆ©ç›Šç‡ '+profRate+'%';
}

function renderTopAgents() {
  const max = TOP_AGENTS[0].rev;
  document.getElementById('top-agents-list').innerHTML = TOP_AGENTS.map((a,i) =>
    `<div class="agent-row">
      <div class="agent-rank">${i+1}</div>
      <div class="type-dot" style="background:${TYPE_COLOR[a.type]}"></div>
      <div class="agent-name">${a.name}</div>
      <div class="agent-bar-wrap"><div class="agent-bar" style="width:${Math.round(a.rev/max*100)}%"></div></div>
      <div class="agent-val">${yen(a.rev)}</div>
    </div>`
  ).join('');
}

// Init
renderCharts();
renderTopAgents();

// â”€â”€ ç´¹ä»‹ãƒªãƒ³ã‚¯ãƒ¢ãƒ¼ãƒ€ãƒ« â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var _refCurrentCode = '';
function openRefModal() {
  var overlay = document.getElementById('ref-modal-overlay');
  var selector = document.getElementById('ref-code-selector');
  var isExec = (typeof session !== 'undefined' && session && session.hqRole === 'exec')
            || (typeof CURRENT_USER !== 'undefined' && CURRENT_USER && CURRENT_USER.hqRole === 'exec');
  var agentId = (typeof session !== 'undefined' && session && session.userId) ? session.userId
              : (typeof ME !== 'undefined' && ME && ME.id) ? ME.id
              : (typeof AGENT !== 'undefined' && AGENT && AGENT.id) ? AGENT.id : '10012';
  if (isExec) {
    var SPECIAL = ['FOUNDER2026','WELCOME2026','GOLD_START','HR_PRO75'];
    var opts = SPECIAL.map(function(c){ return '<option value="'+c+'">â­ '+c+'</option>'; }).join('');
    selector.innerHTML =
      '<div style="margin-bottom:12px"><div style="font-size:10px;color:var(--sub);font-weight:600;margin-bottom:5px">ã‚³ãƒ¼ãƒ‰ç¨®åˆ¥</div>'
      +'<select id="ref-code-select" onchange="updateRefLink()" style="width:100%;padding:8px 10px;background:var(--card2);border:1px solid var(--border2);border-radius:8px;color:var(--text);font-size:12px;font-family:inherit">'
      +'<option value="'+agentId+'">è‡ªåˆ†ã®IDï¼ˆ'+agentId+'ï¼‰</option>'
      +'<optgroup label="â”€â”€ ç‰¹åˆ¥ã‚³ãƒ¼ãƒ‰ â”€â”€">'+opts+'</optgroup>'
      +'</select></div>';
    _refCurrentCode = agentId;
  } else {
    selector.innerHTML =
      '<div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;padding:8px 12px;background:rgba(201,168,76,.06);border:1px solid rgba(201,168,76,.2);border-radius:8px">'
      +'<span style="font-size:11px;color:var(--muted)">ç´¹ä»‹ã‚³ãƒ¼ãƒ‰ï¼š</span>'
      +'<span style="font-family:\'DM Mono\',monospace;font-size:13px;font-weight:700;color:var(--gold)">'+agentId+'</span>'
      +'</div>';
    _refCurrentCode = agentId;
  }
  updateRefLink();
  overlay.classList.add('open');
}
function updateRefLink() {
  var sel = document.getElementById('ref-code-select');
  if (sel) _refCurrentCode = sel.value;
  var base = location.origin + location.pathname.replace(/[^/]*$/, '') + 'coreto-agent-signup.html';
  var url = base + '?ref=' + encodeURIComponent(_refCurrentCode);
  document.getElementById('ref-url-display').textContent = url;
}
function closeRefModal() {
  document.getElementById('ref-modal-overlay').classList.remove('open');
}
function copyRefLink() {
  var url = document.getElementById('ref-url-display').textContent;
  navigator.clipboard.writeText(url).then(function() {
    var btn = document.querySelector('.ref-copy-btn');
    btn.textContent = 'âœ… ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ';
    setTimeout(function(){ btn.textContent = 'ğŸ“‹ ã‚³ãƒ”ãƒ¼'; }, 2000);
  }).catch(function() {
    var ta = document.createElement('textarea');
    ta.value = url; document.body.appendChild(ta); ta.select();
    document.execCommand('copy'); document.body.removeChild(ta);
  });
}
</script>

<div id="ref-modal-overlay" onclick="if(event.target===this)closeRefModal()">
  <div id="ref-modal">
    <div class="ref-mhdr">
      <div class="ref-mhdr-t">ğŸ”— ç´¹ä»‹ãƒªãƒ³ã‚¯ç™ºè¡Œ</div>
      <button onclick="closeRefModal()" style="background:none;border:none;color:var(--muted);font-size:20px;cursor:pointer;line-height:1">Ã—</button>
    </div>
    <div class="ref-mbody">
      <div style="font-size:11px;color:var(--sub);margin-bottom:14px;line-height:1.8">ã“ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å…¥ä¼šã™ã‚‹ã¨ç´¹ä»‹ã‚³ãƒ¼ãƒ‰ãŒè‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™ã€‚</div>
      <div id="ref-code-selector"></div>
      <div style="font-size:10px;color:var(--muted);margin-bottom:4px;font-weight:600;letter-spacing:.5px">ç™ºè¡Œãƒªãƒ³ã‚¯</div>
      <div class="ref-url" id="ref-url-display">â€”</div>
      <button class="ref-copy-btn" onclick="copyRefLink()">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
    </div>
  </div>
</div>

<button id="ref-float-btn" onclick="openRefModal()">ğŸ”— ç´¹ä»‹ãƒªãƒ³ã‚¯ç™ºè¡Œ</button>
</body>
</html>
