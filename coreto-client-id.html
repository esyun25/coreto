<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- â”€â”€ Content Security Policy (XSSè»½æ¸›) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       å¤‰æ›´æ™‚: ä½¿ç”¨ã™ã‚‹å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚ªãƒªã‚¸ãƒ³ã‚’è¿½åŠ ã—ã¦ãã ã•ã„
       Kintoneè¿½åŠ æ™‚: connect-src ã« *.cybozu.com ã‚’è¿½åŠ 
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline'
      https://cdnjs.cloudflare.com
      https://js.stripe.com
      https://cdn-cgi/scripts;
    style-src 'self' 'unsafe-inline'
      https://fonts.googleapis.com;
    font-src 'self'
      https://fonts.gstatic.com;
    img-src 'self' data: blob:;
    connect-src 'self'
      https://hooks.slack.com
      https://hooks.zapier.com
      https://api.stripe.com
      https://js.stripe.com
      https://www.houjin-bangou.nta.go.jp
      https://www.retio.or.jp;
    frame-src 'none';
    object-src 'none';
    base-uri 'self';
  ">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CORETO é¡§å®¢IDç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=DM+Mono:wght@400;500&display=swap');
*{box-sizing:border-box;margin:0;padding:0;}
:root{
  --bg:#0d0f14;--card:#161921;--hover:#1e2230;--border:#252a38;
  --gold:#c9a84c;--gold-l:#e8c96a;--muted:#6b7280;--sub:#9ca3af;
  --green:#22c55e;--blue:#3b82f6;--orange:#f59e0b;--red:#ef4444;--purple:#a855f7;
}
body{font-family:'Noto Sans JP',sans-serif;background:var(--bg);color:#e8eaf0;min-height:100vh;}

/* HEADER */
.header{background:#0a0c10;border-bottom:1px solid var(--border);padding:13px 28px;display:flex;align-items:center;justify-content:space-between;}
.logo{font-family:'DM Mono',monospace;font-size:19px;color:var(--gold);letter-spacing:3px;}
.header-sub{font-size:10px;color:var(--muted);margin-top:2px;}
.staff-switcher{display:flex;align-items:center;gap:8px;font-size:11px;color:var(--sub);}
.staff-switcher select{background:var(--hover);border:1px solid var(--border);color:#e8eaf0;padding:5px 10px;border-radius:5px;font-size:11px;font-family:'Noto Sans JP',sans-serif;}

/* TABS */
.tabs{background:#0a0c10;border-bottom:1px solid var(--border);padding:0 28px;display:flex;}
.tab{padding:11px 16px;font-size:12px;color:var(--muted);cursor:pointer;border-bottom:2px solid transparent;transition:all .15s;white-space:nowrap;background:none;border-top:none;border-left:none;border-right:none;font-family:'Noto Sans JP',sans-serif;}
.tab:hover{color:#e8eaf0;}
.tab.active{color:var(--gold);border-bottom-color:var(--gold);}

.page{display:none;padding:24px 28px;max-width:1280px;margin:0 auto;}
.page.active{display:block;}

/* LAYOUT */
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:20px;}
.grid-detail{display:grid;grid-template-columns:340px 1fr;gap:20px;align-items:start;}

/* CARDS */
.card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:18px 20px;margin-bottom:14px;}
.card-title{font-size:13px;font-weight:700;margin-bottom:14px;display:flex;align-items:center;gap:8px;}

/* FORM */
.s-label{font-size:10px;color:var(--muted);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:8px;margin-top:18px;padding-bottom:5px;border-bottom:1px solid var(--border);}
.s-label:first-child{margin-top:0;}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:11px;}
.form-row.three{grid-template-columns:1fr 1fr 1fr;}
.form-row.single{grid-template-columns:1fr;}
.fg{margin-bottom:11px;}
.fg label{font-size:11px;color:var(--sub);display:block;margin-bottom:4px;}
.fg label .req{color:var(--red);font-size:9px;font-weight:700;margin-left:3px;}
.fg input,.fg select,.fg textarea{width:100%;background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:8px 10px;color:#e8eaf0;font-size:13px;font-family:'Noto Sans JP',sans-serif;transition:border-color .15s;}
.fg input:focus,.fg select:focus,.fg textarea:focus{outline:none;border-color:var(--gold);}
.fg textarea{resize:vertical;min-height:70px;line-height:1.7;}
.fg select option{background:var(--card);}
.mono{font-family:'DM Mono',monospace !important;}

/* TAGS */
.tag{display:inline-block;padding:2px 8px;border-radius:4px;font-size:10px;font-weight:600;}
.tag-re{background:rgba(59,130,246,0.15);color:var(--blue);}
.tag-hr{background:rgba(34,197,94,0.15);color:var(--green);}
.tag-both{background:rgba(168,85,247,0.15);color:var(--purple);}
.tag-lead{background:rgba(201,168,76,0.15);color:var(--gold);}
.tag-active{background:rgba(245,158,11,0.15);color:var(--orange);}
.tag-done{background:rgba(34,197,94,0.15);color:var(--green);}

/* BUTTONS */
.btn{padding:8px 16px;border-radius:7px;font-size:12px;font-weight:500;cursor:pointer;border:none;font-family:'Noto Sans JP',sans-serif;transition:all .15s;}
.btn-gold{background:var(--gold);color:#0a0c10;}
.btn-gold:hover{background:var(--gold-l);}
.btn-outline{background:transparent;color:var(--sub);border:1px solid var(--border);}
.btn-outline:hover{border-color:var(--gold);color:var(--gold);}
.btn-ghost{background:transparent;border:none;color:var(--muted);cursor:pointer;font-size:11px;padding:3px 8px;border-radius:4px;font-family:'Noto Sans JP',sans-serif;transition:all .15s;}
.btn-ghost:hover{background:var(--hover);color:#e8eaf0;}
.btn-danger{background:transparent;border:none;color:var(--red);cursor:pointer;font-size:11px;padding:3px 8px;border-radius:4px;font-family:'Noto Sans JP',sans-serif;transition:all .15s;}
.btn-danger:hover{background:rgba(239,68,68,0.1);}
.btn-sm{padding:5px 12px;font-size:11px;}
.btn-full{width:100%;padding:11px;}

/* INNER TABS */
.inner-tabs{display:flex;border:1px solid var(--border);border-radius:7px;overflow:hidden;margin-bottom:16px;}
.inner-tab{flex:1;padding:8px;text-align:center;font-size:12px;cursor:pointer;background:var(--bg);color:var(--muted);border:none;font-family:'Noto Sans JP',sans-serif;transition:all .15s;}
.inner-tab.active{background:var(--gold);color:#0a0c10;font-weight:700;}

/* TABLE */
table{width:100%;border-collapse:collapse;}
th{text-align:left;font-size:10px;color:var(--muted);padding:8px 12px;border-bottom:1px solid var(--border);font-weight:500;}
td{padding:10px 12px;font-size:12px;border-bottom:1px solid rgba(37,42,56,0.5);vertical-align:middle;}
tr:last-child td{border-bottom:none;}
tr.clickable:hover td{background:rgba(30,34,48,0.5);cursor:pointer;}

/* DATA VIEW */
.dv-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:8px;}
.dv-row.three{grid-template-columns:1fr 1fr 1fr;}
.dv-item .dv-label{font-size:10px;color:var(--muted);margin-bottom:2px;}
.dv-item .dv-val{font-size:12px;color:#e8eaf0;}
.dv-item .dv-empty{color:var(--muted);}

/* NOTE CARDS */
.note-card{background:var(--hover);border:1px solid var(--border);border-radius:8px;padding:14px;margin-bottom:10px;transition:border-color .15s;}
.note-card.mine{border-color:rgba(201,168,76,0.3);background:rgba(201,168,76,0.03);}
.note-card.editing{border-color:var(--gold);}
.note-header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:8px;}
.note-author{font-size:12px;font-weight:600;}
.note-time{font-size:10px;color:var(--muted);font-family:'DM Mono',monospace;margin-top:2px;}
.note-body{font-size:13px;color:var(--sub);line-height:1.8;white-space:pre-wrap;}
.note-edit-textarea{width:100%;background:var(--bg);border:1px solid var(--border);border-radius:5px;padding:8px 10px;color:#e8eaf0;font-size:13px;font-family:'Noto Sans JP',sans-serif;resize:vertical;min-height:70px;line-height:1.7;}
.note-edit-textarea:focus{outline:none;border-color:var(--gold);}

/* PERMISSION BADGES */
.pb{font-size:10px;padding:2px 7px;border-radius:3px;font-weight:600;}
.pb-own{background:rgba(201,168,76,0.15);color:var(--gold);}
.pb-hq{background:rgba(59,130,246,0.15);color:var(--blue);}
.pb-lock{background:rgba(100,116,139,0.12);color:var(--muted);}

/* CHIPS */
.chip-area{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px;}

/* LINK BOX */
.link-box{background:var(--bg);border:1px solid var(--border);border-radius:5px;padding:8px 12px;display:flex;align-items:center;gap:8px;margin-top:10px;}
.link-url{font-family:'DM Mono',monospace;font-size:11px;color:var(--sub);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}

/* QR */
.qr{width:82px;height:82px;background:white;border-radius:5px;padding:6px;display:flex;flex-direction:column;gap:2px;flex-shrink:0;}
.qr .qr-row{display:flex;gap:2px;}
.qr .q{width:9px;height:9px;border-radius:1px;}
.qr .b{background:#111;}.qr .w{background:transparent;}

/* TOAST */
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(16px);background:rgba(34,197,94,0.15);border:1px solid var(--green);color:var(--green);padding:9px 22px;border-radius:8px;font-size:12px;font-weight:600;opacity:0;transition:all .3s;pointer-events:none;z-index:300;white-space:nowrap;}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <div><div class="logo">CORETO
  <button onclick="window.location.href='coreto-hub.html'"
            style="font-size:10px;padding:5px 12px;border-radius:6px;border:1px solid var(--border2);
            background:transparent;color:var(--muted);cursor:pointer;font-family:'Noto Sans JP',sans-serif">
    â† ãƒã‚¤ãƒšãƒ¼ã‚¸
  </button>
</div><div class="header-sub">é¡§å®¢IDç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </div></div>
  <div class="staff-switcher">
    <span>ãƒ­ã‚°ã‚¤ãƒ³ä¸­ï¼š</span>
    <select id="current-staff" onchange="onStaffChange()">
      <option value="yamada">å±±ç”° èª ï¼ˆä¸å‹•ç”£AGï¼‰</option>
      <option value="takahashi">é«˜æ©‹ æ˜ï¼ˆä¸å‹•ç”£AGï¼‰</option>
      <option value="nakamura">ä¸­æ‘ ãƒªã‚«ï¼ˆäººæAGï¼‰</option>
      <option value="sato">ä½è—¤ ç¾å’²ï¼ˆãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼‰</option>
      <option value="hq">æœ¬éƒ¨ã‚¹ã‚¿ãƒƒãƒ•ï¼ˆç®¡ç†è·ï¼‰</option>
    </select>
  </div>
</div>

<!-- TABS -->
<div class="tabs">
  <button class="tab active"      onclick="showTab('new',this)">â• æ–°è¦ç™»éŒ²ãƒ»é€ä»˜</button>
  <button class="tab"             onclick="showTab('list',this)">ğŸ“‹ é¡§å®¢ä¸€è¦§</button>
  <button class="tab"             onclick="showTab('detail',this)">ğŸ” é¡§å®¢è©³ç´°ãƒ»è¿½è¨˜</button>
  <button class="tab"             onclick="showTab('client',this)">ğŸ“± é¡§å®¢å‘ã‘ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰</button>
</div>

<!-- ================================================================
     TAB 1: æ–°è¦ç™»éŒ²ãƒ»é€ä»˜
================================================================ -->
<div id="tab-new" class="page active">
  <div class="grid2">
    <div>
      <!-- ç™ºè¡Œäºˆå®šID -->
      <div style="background:linear-gradient(135deg,rgba(201,168,76,0.12),rgba(201,168,76,0.03));border:1.5px solid rgba(201,168,76,0.4);border-radius:12px;padding:16px 20px;display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
        <div>
          <div style="font-size:10px;color:var(--muted);letter-spacing:1px;margin-bottom:4px">ç™ºè¡Œäºˆå®š é¡§å®¢ID</div>
          <div style="font-family:'DM Mono',monospace;font-size:26px;color:var(--gold);letter-spacing:3px">CL-00248</div>
          <div style="font-size:10px;color:var(--muted);margin-top:3px">ç™»éŒ²å®Œäº†æ™‚ã«ç¢ºå®šãƒ»è‡ªå‹•æ¡ç•ª</div>
        </div>
        <button class="btn btn-outline btn-sm" onclick="toast('CL-00248 ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ')">IDã‚³ãƒ”ãƒ¼</button>
      </div>

      <div class="card">
        <div class="card-title">ğŸ“‹ æ‹…å½“è€…ãƒ»æ¥è§¦æƒ…å ±</div>
        <div class="form-row">
          <div class="fg"><label>æ‹…å½“ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ<span class="req">å¿…é ˆ</span></label>
            <select><option>å±±ç”° èª ï¼ˆä¸å‹•ç”£AGï¼‰</option><option>é«˜æ©‹ æ˜ï¼ˆä¸å‹•ç”£AGï¼‰</option><option>ä¸­æ‘ ãƒªã‚«ï¼ˆäººæAGï¼‰</option><option>ä½è—¤ ç¾å’²ï¼ˆãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼‰</option></select>
          </div>
          <div class="fg"><label>æ¥è§¦çµŒè·¯</label>
            <select><option>è‡ªå·±é–‹æ‹“</option><option>ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç´¹ä»‹</option><option>æœ¬éƒ¨ä¾é ¼</option><option>WEBå•åˆã›</option><option>SNS</option><option>çŸ¥äººç´¹ä»‹</option></select>
          </div>
        </div>
        <div class="form-row">
          <div class="fg"><label>é¡§å®¢ç¨®åˆ¥<span class="req">å¿…é ˆ</span></label>
            <select id="new-type"><option value="re">ä¸å‹•ç”£ï¼ˆè³ƒè²¸ãƒ»å£²è²·ï¼‰</option><option value="hr">äººæç´¹ä»‹</option><option value="both">ä¸¡æ–¹</option></select>
          </div>
          <div class="fg"><label>åˆå›æ¥è§¦æ—¥</label><input type="date" class="mono" value="2026-02-20"></div>
        </div>
      </div>

      <div class="card">
        <div class="card-title">ğŸ“¤ ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä»˜æ–¹æ³•</div>
        <div class="inner-tabs">
          <button class="inner-tab active" id="mode-a" onclick="setMode('send')">ğŸ“± é¡§å®¢ã«é€ä»˜ã™ã‚‹</button>
          <button class="inner-tab"        id="mode-b" onclick="setMode('staff')">ğŸ‘¤ æ‹…å½“è€…ãŒä»£ã‚ã‚Šã«å…¥åŠ›</button>
        </div>

        <div id="send-section">
          <div style="display:flex;gap:14px;align-items:flex-start">
            <div class="qr">
              <div class="qr-row"><div class="q b"></div><div class="q b"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q b"></div><div class="q b"></div></div>
              <div class="qr-row"><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div></div>
              <div class="qr-row"><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q b"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div></div>
              <div class="qr-row"><div class="q w"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q w"></div></div>
              <div class="qr-row"><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q b"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div></div>
              <div class="qr-row"><div class="q b"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q b"></div></div>
              <div class="qr-row"><div class="q b"></div><div class="q b"></div><div class="q b"></div><div class="q w"></div><div class="q b"></div><div class="q b"></div><div class="q b"></div></div>
            </div>
            <div style="flex:1">
              <div style="font-size:12px;color:var(--sub);line-height:1.8;margin-bottom:10px">é¡§å®¢å°‚ç”¨URLã‚’LINE/SMSã§é€ä»˜ã™ã‚‹ã‹ã€ãã®å ´ã§QRã‚’èª­ã¿è¾¼ã‚“ã§ã‚‚ã‚‰ã„ã¾ã™ã€‚<br>é¡§å®¢ãŒé€ä¿¡ã™ã‚‹ã¨æ‹…å½“è€…ã«é€šçŸ¥ã•ã‚Œã¾ã™ã€‚<br><strong style="color:#e8eaf0">å‚™è€ƒæ¬„ã¯é¡§å®¢ãƒ•ã‚©ãƒ¼ãƒ ã«ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</strong></div>
              <div style="display:flex;gap:8px;flex-wrap:wrap">
                <button class="btn btn-outline btn-sm" onclick="toast('LINEã‚¢ãƒ—ãƒªã‚’é–‹ãã¾ã™')">ğŸŸ¢ LINEã§é€ã‚‹</button>
                <button class="btn btn-outline btn-sm" onclick="toast('SMSã‚¢ãƒ—ãƒªã‚’é–‹ãã¾ã™')">ğŸ’¬ SMSã§é€ã‚‹</button>
              </div>
            </div>
          </div>
          <div class="link-box">
            <span class="link-url">https://form.coreto.jp/cl/new?agent=AG-012&ref=CL-00248&type=re</span>
            <button class="btn-ghost" onclick="toast('URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ')">ã‚³ãƒ”ãƒ¼</button>
          </div>
        </div>

        <div id="staff-section" style="display:none">
          <div style="font-size:12px;color:var(--sub);line-height:1.8;padding:10px;background:var(--hover);border-radius:6px;margin-bottom:12px">
            æ‹…å½“è€…ãŒé¡§å®¢ã®ä»£ã‚ã‚Šã«æƒ…å ±ã‚’å…¥åŠ›ã—ã¾ã™ã€‚ã€ŒğŸ“± é¡§å®¢å‘ã‘ãƒ•ã‚©ãƒ¼ãƒ ã€ã‚¿ãƒ–ã¨åŒã˜é …ç›®ã§ã™ã€‚<br>
            <strong style="color:#e8eaf0">å‚™è€ƒãƒ»ãƒ¡ãƒ¢ã¯åˆ¥é€”ã€Œé¡§å®¢è©³ç´°ãƒ»è¿½è¨˜ã€ã‚¿ãƒ–ã‹ã‚‰å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</strong>
          </div>
          <button class="btn btn-gold btn-full" onclick="showTab('client',document.querySelectorAll('.tab')[3])">å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã¸é€²ã‚€ â†’</button>
        </div>
      </div>

      <button class="btn btn-gold btn-full" onclick="toast('âœ… é¡§å®¢ID CL-00248 ã‚’ç™ºè¡Œã—ã¾ã—ãŸ')">é¡§å®¢IDã‚’ç™ºè¡Œã—ã¦ç™»éŒ²ã™ã‚‹</button>
    </div>

    <div>
      <div class="card">
        <div class="card-title">ğŸ”’ ãƒ¡ãƒ¢ãƒ»è¿½è¨˜ã®æ¨©é™è¨­è¨ˆ</div>
        <div style="display:flex;flex-direction:column;gap:10px">
          <div style="background:var(--hover);border-radius:7px;padding:12px">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px">
              <span class="pb pb-own">å…¥åŠ›ã—ãŸæ‹…å½“è€…</span>
            </div>
            <div style="font-size:12px;color:var(--sub);line-height:1.8">è‡ªåˆ†ãŒæŠ•ç¨¿ã—ãŸãƒ¡ãƒ¢ã®ã¿<strong style="color:#e8eaf0">ç·¨é›†ãƒ»å‰Šé™¤ãŒå¯èƒ½</strong>ã€‚<br>ä»–ã®æ‹…å½“è€…ã®ãƒ¡ãƒ¢ã¯é–²è¦§ã®ã¿ã€‚</div>
          </div>
          <div style="background:var(--hover);border-radius:7px;padding:12px">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px">
              <span class="pb pb-hq">æœ¬éƒ¨ã‚¹ã‚¿ãƒƒãƒ•</span>
              <span style="font-size:10px;color:var(--muted)">æ¨©é™ã¯å¾Œã‹ã‚‰è¨­å®š</span>
            </div>
            <div style="font-size:12px;color:var(--sub);line-height:1.8">å…¨ãƒ¡ãƒ¢ã®é–²è¦§å¯ã€‚ç·¨é›†ãƒ»å‰Šé™¤æ¨©é™ã¯<br>æœ¬éƒ¨å†…ã®ãƒ­ãƒ¼ãƒ«è¨­å®šã§å¾Œã‹ã‚‰æ±ºå®šã—ã¾ã™ã€‚</div>
          </div>
          <div style="background:var(--hover);border-radius:7px;padding:12px">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px">
              <span class="pb pb-lock">ä»–ã®æ‹…å½“è€…</span>
            </div>
            <div style="font-size:12px;color:var(--sub);line-height:1.8">é–²è¦§ã®ã¿ã€‚ç·¨é›†ãƒ»å‰Šé™¤ãƒœã‚¿ãƒ³ã¯éè¡¨ç¤ºã€‚</div>
          </div>
        </div>
        <div style="margin-top:12px;padding:10px;background:rgba(201,168,76,0.06);border:1px solid rgba(201,168,76,0.2);border-radius:6px;font-size:11px;color:var(--sub);line-height:1.8">
          ğŸ’¡ å¼•ãç¶™ãæ™‚ã¯å‰æ‹…å½“è€…ã®ãƒ¡ãƒ¢ãŒã™ã¹ã¦å±¥æ­´ã¨ã—ã¦æ®‹ã‚Šã¾ã™ã€‚<br>
          æŠ•ç¨¿å¾Œã®ç·¨é›†ã«ã¯ã€Œç·¨é›†æ¸ˆã¿ã€ã¨æ—¥æ™‚ãŒè‡ªå‹•è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚
        </div>
      </div>

      <div class="card">
        <div class="card-title">ğŸ“ ç™»éŒ²ã‹ã‚‰æ¡ˆä»¶åŒ–ã¾ã§ã®ãƒ•ãƒ­ãƒ¼</div>
        <div style="display:flex;flex-direction:column;gap:9px">
          ${[
            ['var(--blue)','STEP 1','é¡§å®¢ã¨æ¥è§¦ãƒ»IDç™ºè¡Œ','é¡§å®¢ã«ãƒ•ã‚©ãƒ¼ãƒ URLã‚’é€ä»˜ or æ‹…å½“è€…ãŒä»£è¡Œå…¥åŠ›ã€‚å‚™è€ƒãªã—ã€‚'],
            ['var(--gold)','STEP 2','é¡§å®¢ãŒæƒ…å ±ã‚’å…¥åŠ›','åŸºæœ¬æƒ…å ±ãƒ»å¸Œæœ›æ¡ä»¶ã‚’å…¥åŠ›ã—ã¦é€ä¿¡ã€‚æ‹…å½“è€…ã«é€šçŸ¥ã€‚'],
            ['var(--orange)','STEP 3','æ‹…å½“è€…ãŒãƒ¡ãƒ¢ã‚’è¿½è¨˜','é¢è«‡å†…å®¹ãƒ»å¯©æŸ»çŠ¶æ³ãƒ»å¼•ãç¶™ãäº‹é …ã‚’æ—¥æ™‚ä»˜ãã§è¨˜éŒ²ã€‚'],
            ['var(--purple)','STEP 4','ãƒªãƒ¼ãƒ‰ç®¡ç†','æœ¬éƒ¨ãŒãƒãƒƒãƒãƒ³ã‚°ã€‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç´¹ä»‹ã¯ã“ã“ã§æ‹…å½“AGã‚’æ±ºå®šã€‚'],
            ['var(--green)','STEP 5','æ¡ˆä»¶åŒ–','æ¡ˆä»¶ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã«é¡§å®¢IDã‚’å…¥åŠ›â†’é¡§å®¢æƒ…å ±ãŒè‡ªå‹•åæ˜ ã€‚'],
          ].map(([c,s,t,d])=>`
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="width:3px;flex-shrink:0;border-radius:2px;background:${c};min-height:40px;margin-top:2px"></div>
            <div>
              <div style="font-size:11px;font-weight:700;color:${c}">${s} ${t}</div>
              <div style="font-size:11px;color:var(--sub);line-height:1.7;margin-top:1px">${d}</div>
            </div>
          </div>`).join('')}
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ================================================================
     TAB 2: é¡§å®¢ä¸€è¦§
================================================================ -->
<div id="tab-list" class="page">
  <div class="card">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:14px">
      <div class="card-title" style="margin:0">ğŸ“‹ é¡§å®¢ä¸€è¦§ï¼ˆãƒªãƒ¼ãƒ‰å«ã‚€ï¼‰</div>
      <div style="display:flex;gap:8px">
        <select style="background:var(--hover);border:1px solid var(--border);color:#e8eaf0;padding:5px 10px;border-radius:5px;font-size:11px;font-family:'Noto Sans JP',sans-serif">
          <option>å…¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</option><option>ãƒªãƒ¼ãƒ‰</option><option>æ¡ˆä»¶é€²è¡Œä¸­</option><option>æˆç´„æ¸ˆã¿</option>
        </select>
        <select style="background:var(--hover);border:1px solid var(--border);color:#e8eaf0;padding:5px 10px;border-radius:5px;font-size:11px;font-family:'Noto Sans JP',sans-serif">
          <option>å…¨ç¨®åˆ¥</option><option>ä¸å‹•ç”£</option><option>äººæ</option><option>ä¸¡æ–¹</option>
        </select>
      </div>
    </div>
    <table>
      <thead><tr><th>é¡§å®¢ID</th><th>æ°å</th><th>ç¨®åˆ¥</th><th>æ‹…å½“AG</th><th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th><th>ç´ä»˜ãæ¡ˆä»¶</th><th>ãƒ¡ãƒ¢</th><th>ç™»éŒ²æ—¥</th></tr></thead>
      <tbody id="tbl-body"></tbody>
    </table>
  </div>
</div>

<!-- ================================================================
     TAB 3: é¡§å®¢è©³ç´°ãƒ»è¿½è¨˜
================================================================ -->
<div id="tab-detail" class="page">
  <div style="display:flex;align-items:center;gap:12px;margin-bottom:18px;flex-wrap:wrap">
    <select id="detail-sel" onchange="loadDetail(this.value)" style="background:var(--hover);border:1px solid var(--border);color:#e8eaf0;padding:7px 12px;border-radius:6px;font-size:13px;font-family:'Noto Sans JP',sans-serif">
      <option value="CL-00244">CL-00244 â€• ç”°ä¸­ èŠ±å­ï¼ˆä¸å‹•ç”£ï¼‰</option>
      <option value="CL-00245">CL-00245 â€• å±±ç”° å¤ªéƒï¼ˆä¸¡æ–¹ï¼‰</option>
      <option value="CL-00246">CL-00246 â€• éˆ´æœ¨ ç¾å’²ï¼ˆä¸å‹•ç”£ï¼‰</option>
      <option value="CL-00247">CL-00247 â€• æ©‹æœ¬ éš†ï¼ˆäººæï¼‰</option>
    </select>
    <span id="detail-status"></span>
  </div>

  <div class="grid-detail">
    <!-- å·¦ï¼šé¡§å®¢æƒ…å ±ï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰ -->
    <div>
      <div class="card">
        <div class="card-title">ğŸ‘¤ é¡§å®¢æƒ…å ±<span style="font-size:10px;color:var(--muted);font-weight:400;margin-left:4px">é¡§å®¢å…¥åŠ›ãƒ»èª­ã¿å–ã‚Šå°‚ç”¨</span></div>
        <div id="customer-view"></div>
      </div>
    </div>

    <!-- å³ï¼šæ‹…å½“è€…è¿½è¨˜ã‚¨ãƒªã‚¢ -->
    <div>
      <!-- ===== ãƒ¡ãƒ¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ ===== -->
      <div class="card">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:14px">
          <div class="card-title" style="margin:0">ğŸ“ æ‹…å½“è€…ãƒ¡ãƒ¢<span style="font-size:10px;font-weight:400;color:var(--muted);margin-left:6px">å¼•ãç¶™ãå±¥æ­´ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™</span></div>
        </div>

        <!-- ãƒ¡ãƒ¢ä¸€è¦§ -->
        <div id="note-list"></div>

        <!-- æ–°è¦æŠ•ç¨¿ã‚¨ãƒªã‚¢ -->
        <div style="background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:14px;margin-top:4px">
          <div style="font-size:11px;color:var(--muted);margin-bottom:8px">
            âœï¸ æ–°ã—ã„ãƒ¡ãƒ¢ã€€<span id="note-poster" style="color:var(--gold);font-weight:600"></span> ã¨ã—ã¦æŠ•ç¨¿
          </div>
          <textarea id="note-input" class="note-edit-textarea" placeholder="é¢è«‡å†…å®¹ãƒ»å¯©æŸ»çŠ¶æ³ãƒ»å¼•ãç¶™ãäº‹é …ãªã©&#10;æŠ•ç¨¿ã™ã‚‹ã¨æ—¥æ™‚ã¨æ‹…å½“è€…åãŒè‡ªå‹•è¨˜éŒ²ã•ã‚Œã¾ã™"></textarea>
          <div style="display:flex;justify-content:flex-end;margin-top:8px">
            <button class="btn btn-gold btn-sm" onclick="addNote()">æŠ•ç¨¿ã™ã‚‹</button>
          </div>
        </div>
      </div>

      <!-- ===== æ‹…å½“è€…è¿½è¨˜ãƒ•ã‚©ãƒ¼ãƒ  ===== -->
      <div class="card">
        <div class="card-title">â• æ‹…å½“è€…è¿½è¨˜æƒ…å ±<span style="font-size:10px;font-weight:400;color:var(--muted);margin-left:6px">é¢è«‡å¾Œã«ç¢ºèªã—ãŸå†…å®¹ã‚’è¿½è¨˜</span></div>
        <div id="addl-form"></div>
        <button class="btn btn-outline btn-full" style="margin-top:8px" onclick="toast('âœ… è¿½è¨˜æƒ…å ±ã‚’ä¿å­˜ã—ã¾ã—ãŸ')">è¿½è¨˜æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹</button>
      </div>
    </div>
  </div>
</div>

<!-- ================================================================
     TAB 4: é¡§å®¢å‘ã‘ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
================================================================ -->
<div id="tab-client" class="page">
  <div style="max-width:580px;margin:0 auto">
    <div style="background:rgba(59,130,246,0.07);border:1px solid rgba(59,130,246,0.2);border-radius:7px;padding:10px 14px;margin-bottom:14px;font-size:12px;color:var(--sub);line-height:1.8">
      ğŸ“± ã“ã‚Œã¯é¡§å®¢å‘ã‘ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã™ã€‚å‚™è€ƒæ¬„ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>æ‹…å½“è€…ãƒ¡ãƒ¢ã¯ã€Œé¡§å®¢è©³ç´°ãƒ»è¿½è¨˜ã€ã‚¿ãƒ–ã‹ã‚‰åˆ¥é€”å…¥åŠ›ã—ã¾ã™ã€‚
    </div>

    <div class="card">
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:18px">
        <div style="font-size:17px;font-weight:700;color:var(--gold);font-family:'DM Mono',monospace;letter-spacing:2px">CORETO</div>
        <div style="font-size:12px;color:var(--muted)">ãŠå®¢æ§˜æƒ…å ±å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ </div>
      </div>

      <div class="fg"><label>ã”ç›¸è«‡å†…å®¹<span class="req">å¿…é ˆ</span></label>
        <select id="cf-type" onchange="updateCF()">
          <option value="re">ä¸å‹•ç”£ï¼ˆè³ƒè²¸ãƒ»è³¼å…¥ï¼‰</option>
          <option value="hr">ãŠä»•äº‹ãƒ»è»¢è·</option>
          <option value="both">ä¸¡æ–¹</option>
        </select>
      </div>

      <!-- åŸºæœ¬æƒ…å ± -->
      <div class="s-label">ãŠå®¢æ§˜ã®åŸºæœ¬æƒ…å ±</div>
      <div class="form-row">
        <div class="fg"><label>ãŠåå‰ï¼ˆæ¼¢å­—ï¼‰<span class="req">å¿…é ˆ</span></label><input placeholder="ä¾‹ï¼šéˆ´æœ¨ ä¸€éƒ"></div>
        <div class="fg"><label>ãƒ•ãƒªã‚¬ãƒŠ<span class="req">å¿…é ˆ</span></label><input placeholder="ã‚¹ã‚ºã‚­ ã‚¤ãƒãƒ­ã‚¦"></div>
      </div>
      <div class="form-row three">
        <div class="fg"><label>ç”Ÿå¹´æœˆæ—¥<span class="req">å¿…é ˆ</span></label><input type="date" class="mono"></div>
        <div class="fg"><label>æ€§åˆ¥<span class="req">å¿…é ˆ</span></label><select><option value="">â€•</option><option>ç”·æ€§</option><option>å¥³æ€§</option><option>å›ç­”ã—ãªã„</option></select></div>
        <div class="fg"><label>å›½ç±</label><select><option>æ—¥æœ¬</option><option>ä¸­å›½</option><option>éŸ“å›½</option><option>ãã®ä»–ã‚¢ã‚¸ã‚¢</option><option>ãã®ä»–</option></select></div>
      </div>
      <div class="form-row">
        <div class="fg"><label>é›»è©±ç•ªå·<span class="req">å¿…é ˆ</span></label><input placeholder="090-XXXX-XXXX" class="mono"></div>
        <div class="fg"><label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label><input type="email" placeholder="example@email.com" class="mono"></div>
      </div>

      <!-- ç¾ä½æ‰€ -->
      <div class="s-label">ç¾åœ¨ã®ã”ä½æ‰€</div>
      <div class="form-row single"><div class="fg"><label>ç¾ä½æ‰€<span class="req">å¿…é ˆ</span></label><input placeholder="ä¾‹ï¼šæ±äº¬éƒ½è±Šå³¶åŒºæ± è¢‹1-1-1"></div></div>
      <div class="form-row">
        <div class="fg"><label>æœ€å¯„ã‚Šé§…</label><input placeholder="ä¾‹ï¼šæ± è¢‹é§…"></div>
        <div class="fg"><label>é€šå‹¤å…ˆã®æœ€å¯„ã‚Šé§…ï¼ˆä»»æ„ï¼‰</label><input placeholder="ä¾‹ï¼šæ–°å®¿é§…"></div>
      </div>

      <!-- ä¸å‹•ç”£ï¼šå®¶æ—ãƒ»ç”Ÿæ´» -->
      <div id="cf-re-family">
        <div class="s-label">ã”å®¶æ—ãƒ»åŒå±…ã«ã¤ã„ã¦</div>
        <div class="form-row three">
          <div class="fg"><label>ã”å®¶æ—æ§‹æˆ</label><select><option>ãŠã²ã¨ã‚Š</option><option>ã‚«ãƒƒãƒ—ãƒ«</option><option>ã”å¤«å©¦ï¼ˆãŠå­æ§˜ãªã—ï¼‰</option><option>ãŠå­æ§˜ã‚ã‚Šï¼ˆå°å­¦ç”Ÿä»¥ä¸‹ï¼‰</option><option>ãŠå­æ§˜ã‚ã‚Šï¼ˆä¸­å­¦ç”Ÿä»¥ä¸Šï¼‰</option><option>æ³•äºº</option></select></div>
          <div class="fg"><label>åŒå±…äººæ•°</label><select><option>1å</option><option>2å</option><option>3å</option><option>4å</option><option>5åä»¥ä¸Š</option></select></div>
          <div class="fg"><label>ãƒšãƒƒãƒˆ</label><select><option>ãªã—</option><option>çŠ¬ï¼ˆå°å‹ï¼‰</option><option>çŠ¬ï¼ˆä¸­ãƒ»å¤§å‹ï¼‰</option><option>çŒ«</option><option>ãã®ä»–</option></select></div>
        </div>
        <div class="form-row">
          <div class="fg"><label>æ¥½å™¨æ¼”å¥</label><select><option>ãªã—</option><option>ã‚ã‚Šï¼ˆãƒ”ã‚¢ãƒç­‰ï¼‰</option><option>ã‚ã‚Šï¼ˆç®¡æ¥½å™¨ç­‰ï¼‰</option></select></div>
        </div>
      </div>

      <!-- ä¸å‹•ç”£ï¼šè·æ¥­ãƒ»åå…¥ -->
      <div id="cf-re-job">
        <div class="s-label">è·æ¥­ãƒ»åå…¥ã«ã¤ã„ã¦</div>
        <div class="form-row">
          <div class="fg"><label>ã”è·æ¥­</label><select><option value="">é¸æŠ</option><option>ä¼šç¤¾å“¡</option><option>å…¬å‹™å“¡</option><option>è‡ªå–¶æ¥­</option><option>ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹</option><option>å­¦ç”Ÿ</option><option>ä¸»å©¦ãƒ»ä¸»å¤«</option><option>ç„¡è·</option><option>ãã®ä»–</option></select></div>
          <div class="fg"><label>é›‡ç”¨å½¢æ…‹</label><select><option value="">é¸æŠ</option><option>æ­£ç¤¾å“¡</option><option>å¥‘ç´„ç¤¾å“¡</option><option>æ´¾é£ç¤¾å“¡</option><option>æ¥­å‹™å§”è¨—</option><option>ã‚¢ãƒ«ãƒã‚¤ãƒˆ</option><option>å½¹å“¡ãƒ»ä»£è¡¨</option></select></div>
        </div>
        <div class="form-row three">
          <div class="fg"><label>å‹¤å‹™å…ˆåï¼ˆä»»æ„ï¼‰</label><input placeholder="æ ªå¼ä¼šç¤¾â—‹â—‹"></div>
          <div class="fg"><label>å‹¤ç¶šå¹´æ•°</label><select><option value="">é¸æŠ</option><option>1å¹´æœªæº€</option><option>1ã€œ3å¹´</option><option>3ã€œ5å¹´</option><option>5ã€œ10å¹´</option><option>10å¹´ä»¥ä¸Š</option></select></div>
          <div class="fg"><label>å¹´åï¼ˆç¨è¾¼ï¼‰</label><select><option value="">é¸æŠ</option><option>200ä¸‡æœªæº€</option><option>200ã€œ300ä¸‡</option><option>300ã€œ400ä¸‡</option><option>400ã€œ500ä¸‡</option><option>500ã€œ700ä¸‡</option><option>700ä¸‡ä»¥ä¸Š</option></select></div>
        </div>
      </div>

      <!-- äººæï¼šç¾åœ¨ã®ã‚­ãƒ£ãƒªã‚¢ -->
      <div id="cf-hr-career" style="display:none">
        <div class="s-label">ç¾åœ¨ã®ãŠä»•äº‹ã«ã¤ã„ã¦</div>
        <div class="form-row">
          <div class="fg"><label>ç¾åœ¨ã®è·ç¨®</label><input placeholder="ä¾‹ï¼šä¸å‹•ç”£å–¶æ¥­ã€çµŒç†"></div>
          <div class="fg"><label>ç¾åœ¨ã®æ¥­ç•Œ</label><select><option value="">é¸æŠ</option><option>ä¸å‹•ç”£</option><option>å»ºè¨­ãƒ»æ–½å·¥ç®¡ç†</option><option>é‡‘èãƒ»ä¿é™º</option><option>ITãƒ»é€šä¿¡</option><option>è£½é€ æ¥­</option><option>å°å£²ãƒ»æµé€š</option><option>åŒ»ç™‚ãƒ»ç¦ç¥‰</option><option>æ•™è‚²</option><option>ã‚µãƒ¼ãƒ“ã‚¹æ¥­</option><option>å…¬å‹™å“¡</option><option>ãã®ä»–</option></select></div>
        </div>
        <div class="form-row three">
          <div class="fg"><label>ç¾åœ¨ã®é›‡ç”¨å½¢æ…‹</label><select><option value="">é¸æŠ</option><option>æ­£ç¤¾å“¡</option><option>å¥‘ç´„ç¤¾å“¡</option><option>æ´¾é£ç¤¾å“¡</option><option>æ¥­å‹™å§”è¨—</option><option>ã‚¢ãƒ«ãƒã‚¤ãƒˆ</option><option>å½¹å“¡ãƒ»ä»£è¡¨</option><option>ç„¡è·</option></select></div>
          <div class="fg"><label>ç¾åœ¨ã®å¹´åï¼ˆç¨è¾¼ï¼‰</label><select><option value="">é¸æŠ</option><option>200ä¸‡æœªæº€</option><option>200ã€œ300ä¸‡</option><option>300ã€œ400ä¸‡</option><option>400ã€œ500ä¸‡</option><option>500ã€œ700ä¸‡</option><option>700ã€œ1000ä¸‡</option><option>1000ä¸‡ä»¥ä¸Š</option></select></div>
          <div class="fg"><label>æ¥­ç•ŒçµŒé¨“å¹´æ•°</label><select><option value="">é¸æŠ</option><option>æœªçµŒé¨“</option><option>1å¹´æœªæº€</option><option>1ã€œ3å¹´</option><option>3ã€œ5å¹´</option><option>5ã€œ10å¹´</option><option>10å¹´ä»¥ä¸Š</option></select></div>
        </div>
        <div class="form-row">
          <div class="fg"><label>ä¿æœ‰è³‡æ ¼</label><input placeholder="ä¾‹ï¼šå®…å»ºã€ç®¡ç†æ¥­å‹™ä¸»ä»»è€…ã€FP2ç´š"></div>
          <div class="fg"><label>è»¢è·ã‚’ãŠè€ƒãˆã®ç†ç”±</label><select><option value="">é¸æŠ</option><option>å¹´åã‚¢ãƒƒãƒ—</option><option>ã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒƒãƒ—</option><option>è·å ´ç’°å¢ƒ</option><option>åŠ´åƒæ™‚é–“ãƒ»æ®‹æ¥­</option><option>ä¼šç¤¾ã®å®‰å®šæ€§</option><option>æ¥­ç•Œãƒ»è·ç¨®è»¢æ›</option><option>ç‹¬ç«‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—</option><option>ãã®ä»–</option></select></div>
        </div>
        <div class="form-row">
          <div class="fg"><label>è»¢è·æ´»å‹•ã®çŠ¶æ³</label><select><option value="">é¸æŠ</option><option>æƒ…å ±åé›†ä¸­</option><option>ç©æ¥µçš„ã«æ´»å‹•ä¸­</option><option>å†…å®šã‚ã‚Šãƒ»æ¯”è¼ƒæ¤œè¨ä¸­</option><option>ã™ã§ã«é›¢è·æ¸ˆã¿</option></select></div>
          <div class="fg"><label>ç¾åœ¨ã®ã”çŠ¶æ³</label><select><option>åœ¨è·ä¸­</option><option>é›¢è·ä¸­</option></select></div>
        </div>
      </div>

      <!-- ä¸å‹•ç”£ï¼šå¸Œæœ›æ¡ä»¶ -->
      <div id="cf-re-pref">
        <div class="s-label">ãŠæ¢ã—ã®ç‰©ä»¶ã«ã¤ã„ã¦</div>
        <div class="form-row">
          <div class="fg"><label>ã”å¸Œæœ›ã®ç¨®åˆ¥</label><select><option>è³ƒè²¸</option><option>è³¼å…¥ï¼ˆæ–°ç¯‰ï¼‰</option><option>è³¼å…¥ï¼ˆä¸­å¤ï¼‰</option><option>ã©ã¡ã‚‰ã§ã‚‚</option></select></div>
          <div class="fg"><label>ã”å¸Œæœ›ã®ã‚¨ãƒªã‚¢</label><input placeholder="ä¾‹ï¼šæ± è¢‹ãƒ»è¦ç”ºå‘¨è¾º"></div>
        </div>
        <div class="form-row three">
          <div class="fg"><label>ã”äºˆç®—</label><input placeholder="ä¾‹ï¼š10ã€œ12ä¸‡å††" class="mono"></div>
          <div class="fg"><label>ã”å¸Œæœ›ã®é–“å–ã‚Š</label><select><option value="">ã“ã ã‚ã‚‰ãªã„</option><option>ãƒ¯ãƒ³ãƒ«ãƒ¼ãƒ ãƒ»1K</option><option>1DKãƒ»1LDK</option><option>2LDK</option><option>3LDKä»¥ä¸Š</option></select></div>
          <div class="fg"><label>ã”å…¥å±…å¸Œæœ›æ™‚æœŸ</label><input placeholder="ä¾‹ï¼š3ã€œ4æœˆ"></div>
        </div>
        <div class="fg"><label>ã“ã ã‚ã‚Šæ¡ä»¶ï¼ˆè¤‡æ•°å¯ï¼‰</label><div class="chip-area" id="re-chips"></div></div>
      </div>

      <!-- äººæï¼šè»¢è·å¸Œæœ›æ¡ä»¶ -->
      <div id="cf-hr-pref" style="display:none">
        <div class="s-label">ã”å¸Œæœ›ã®è»¢è·æ¡ä»¶</div>
        <div class="form-row">
          <div class="fg"><label>ã”å¸Œæœ›ã®è·ç¨®</label><input placeholder="ä¾‹ï¼šä¸å‹•ç”£å–¶æ¥­ã€PMã€äº‹å‹™"></div>
          <div class="fg"><label>ã”å¸Œæœ›ã®æ¥­ç•Œ</label><select><option value="">ã“ã ã‚ã‚‰ãªã„</option><option>ä¸å‹•ç”£</option><option>å»ºè¨­ãƒ»æ–½å·¥ç®¡ç†</option><option>é‡‘èãƒ»ä¿é™º</option><option>ITãƒ»é€šä¿¡</option><option>è£½é€ æ¥­</option><option>åŒ»ç™‚ãƒ»ç¦ç¥‰</option><option>ãã®ä»–</option></select></div>
        </div>
        <div class="form-row three">
          <div class="fg"><label>ã”å¸Œæœ›ã®é›‡ç”¨å½¢æ…‹</label><select><option>æ­£ç¤¾å“¡</option><option>å¥‘ç´„ç¤¾å“¡</option><option>æ¥­å‹™å§”è¨—</option><option>ã“ã ã‚ã‚‰ãªã„</option></select></div>
          <div class="fg"><label>ã”å¸Œæœ›ã®å¹´å</label><input placeholder="ä¾‹ï¼š500ã€œ650ä¸‡" class="mono"></div>
          <div class="fg"><label>è»¢è·ã”å¸Œæœ›æ™‚æœŸ</label><select><option value="">é¸æŠ</option><option>ã§ãã‚‹ã ã‘æ—©ã</option><option>1ã€œ3ãƒ¶æœˆä»¥å†…</option><option>3ã€œ6ãƒ¶æœˆä»¥å†…</option><option>åŠå¹´ä»¥ä¸Šå…ˆ</option></select></div>
        </div>
        <div class="form-row">
          <div class="fg"><label>ã”å¸Œæœ›ã®å‹¤å‹™åœ°</label><input placeholder="ä¾‹ï¼šæ±äº¬éƒ½å†…ãƒ»ãƒªãƒ¢ãƒ¼ãƒˆå¯"></div>
          <div class="fg"><label>ãƒ†ãƒ¬ãƒ¯ãƒ¼ã‚¯ã®ã”å¸Œæœ›</label><select><option>ã©ã¡ã‚‰ã§ã‚‚ã‚ˆã„</option><option>ãƒªãƒ¢ãƒ¼ãƒˆå¿…é ˆ</option><option>å‡ºç¤¾ã‚’å¸Œæœ›</option><option>é€±1ã€œ2æ—¥å‡ºç¤¾ç¨‹åº¦</option></select></div>
        </div>
        <div class="form-row">
          <div class="fg"><label>æ®‹æ¥­ã®è¨±å®¹åº¦</label><select><option>ãªã‚‹ã¹ãå°‘ãªãï¼ˆæœˆ20æ™‚é–“æœªæº€ï¼‰</option><option>ã‚ã‚‹ç¨‹åº¦OKï¼ˆæœˆ20ã€œ40æ™‚é–“ï¼‰</option><option>ç¹å¿™æœŸã¯è¨±å®¹ï¼ˆæœˆ40æ™‚é–“è¶…ï¼‰</option></select></div>
          <div class="fg"><label>è»¢å‹¤</label><select><option>ä¸å¯</option><option>é–¢æ±åœå†…ãªã‚‰å¯</option><option>å›½å†…å…¨èˆ¬å¯</option><option>æµ·å¤–ã‚‚å¯</option></select></div>
        </div>
        <div class="fg"><label>é‡è¦–ã™ã‚‹æ¡ä»¶ï¼ˆè¤‡æ•°å¯ï¼‰</label><div class="chip-area" id="hr-chips"></div></div>
      </div>

      <!-- é€ä¿¡ãƒœã‚¿ãƒ³ï¼ˆå‚™è€ƒãªã—ï¼‰ -->
      <div style="margin-top:20px">
        <button class="btn btn-gold btn-full" onclick="toast('âœ… é€ä¿¡ã—ã¾ã—ãŸã€‚æ‹…å½“è€…ã‚ˆã‚Šã”é€£çµ¡ã—ã¾ã™ã€‚')">é€ä¿¡ã™ã‚‹</button>
        <div style="font-size:11px;color:var(--muted);text-align:center;margin-top:8px">é€ä¿¡å¾Œã€æ‹…å½“ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ˆã‚Šã”é€£çµ¡ã„ãŸã—ã¾ã™</div>
      </div>
    </div>
  </div>
</div>

<div class="toast" id="toast-el"></div>

<script>
// ================================================================
// ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿
// ================================================================
const STAFF = {
  yamada:    { name:'å±±ç”° èª ',    label:'ä¸å‹•ç”£AG' },
  takahashi: { name:'é«˜æ©‹ æ˜',    label:'ä¸å‹•ç”£AG' },
  nakamura:  { name:'ä¸­æ‘ ãƒªã‚«',  label:'äººæAG'  },
  sato:      { name:'ä½è—¤ ç¾å’²',  label:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼' },
  hq:        { name:'æœ¬éƒ¨ã‚¹ã‚¿ãƒƒãƒ•',label:'æœ¬éƒ¨ç®¡ç†è·' },
};
let ME = 'yamada';

const DB = {
  'CL-00244': {
    name:'ç”°ä¸­ èŠ±å­', kana:'ã‚¿ãƒŠã‚« ãƒãƒŠã‚³', dob:'1992-05-14', gender:'å¥³æ€§', nationality:'æ—¥æœ¬',
    tel:'070-1234-5678', email:'hanako@example.com',
    addr:'æ±äº¬éƒ½è±Šå³¶åŒºæ± è¢‹3-1-1', station:'æ± è¢‹é§…', commute:'æ–°å®¿é§…',
    type:'re', status:'æ¡ˆä»¶é€²è¡Œä¸­', caseId:'C-001', agent:'yamada', agentName:'å±±ç”° èª ', reg:'2026-02-15',
    family:'å˜èº«', occupants:'1å', pet:'ãªã—', instrument:'ãªã—',
    job:'ä¼šç¤¾å“¡', employ:'æ­£ç¤¾å“¡', employer:'æ ªå¼ä¼šç¤¾â—‹â—‹å•†äº‹', tenure:'3ã€œ5å¹´', income:'400ã€œ500ä¸‡',
    rePrefType:'è³ƒè²¸', reArea:'æ± è¢‹ãƒ»è¦ç”º å¾’æ­©15åˆ†ä»¥å†…', reBudget:'Â¥100,000ã€œ120,000', reMadori:'1LDK', reTiming:'3ã€œ4æœˆ',
    reChips:['ã‚ªãƒ¼ãƒˆãƒ­ãƒƒã‚¯','ãƒã‚¹ãƒˆã‚¤ãƒ¬åˆ¥','å®…é…ãƒœãƒƒã‚¯ã‚¹'],
  },
  'CL-00245': {
    name:'å±±ç”° å¤ªéƒ', kana:'ãƒ¤ãƒãƒ€ ã‚¿ãƒ­ã‚¦', dob:'1988-11-03', gender:'ç”·æ€§', nationality:'æ—¥æœ¬',
    tel:'090-8765-4321', email:'taro@example.com',
    addr:'æ±äº¬éƒ½æ–°å®¿åŒºæ–°å®¿2-2-2', station:'æ–°å®¿é§…', commute:'æ¸‹è°·é§…',
    type:'both', status:'æ¡ˆä»¶é€²è¡Œä¸­', caseId:'C-002', agent:'nakamura', agentName:'ä¸­æ‘ ãƒªã‚«', reg:'2026-02-17',
    family:'ã‚«ãƒƒãƒ—ãƒ«', occupants:'2å', pet:'ãªã—', instrument:'ãªã—',
    job:'ä¼šç¤¾å“¡', employ:'æ­£ç¤¾å“¡', employer:'æ ªå¼ä¼šç¤¾â–³â–³ä¸å‹•ç”£', tenure:'5ã€œ10å¹´', income:'500ã€œ700ä¸‡',
    rePrefType:'è³ƒè²¸', reArea:'æ¸‹è°·åŒºãƒ»ç›®é»’åŒº', reBudget:'Â¥150,000ã€œ180,000', reMadori:'2LDK', reTiming:'å³æ—¥ã€œ',
    reChips:['å—å‘ã','2éšä»¥ä¸Š'],
    hrCurrentJob:'ä¸å‹•ç”£å–¶æ¥­', hrCurrentIndustry:'ä¸å‹•ç”£', hrCurrentEmploy:'æ­£ç¤¾å“¡', hrCurrentIncome:'500ã€œ700ä¸‡', hrExpYears:'5ã€œ10å¹´', hrLicense:'å®…åœ°å»ºç‰©å–å¼•å£«', hrReason:'å¹´åã‚¢ãƒƒãƒ—', hrStatus:'ç©æ¥µçš„ã«æ´»å‹•ä¸­', hrWorking:'åœ¨è·ä¸­',
    hrJob:'ä¸å‹•ç”£å–¶æ¥­', hrIndustry:'ä¸å‹•ç”£', hrEmploy:'æ­£ç¤¾å“¡', hrIncome:'600ã€œ750ä¸‡', hrTiming:'3ã€œ6ãƒ¶æœˆä»¥å†…',
    hrLocation:'æ±äº¬éƒ½å†…', hrRemote:'ã©ã¡ã‚‰ã§ã‚‚ã‚ˆã„', hrOvertime:'ç¹å¿™æœŸã¯è¨±å®¹', hrRelocation:'é–¢æ±åœå†…ãªã‚‰å¯',
    hrChips:['å¹´åã‚¢ãƒƒãƒ—å„ªå…ˆ','ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–åˆ¶åº¦ã‚ã‚Š'],
  },
  'CL-00246': {
    name:'éˆ´æœ¨ ç¾å’²', kana:'ã‚¹ã‚ºã‚­ ãƒŸã‚µã‚­', dob:'1995-08-22', gender:'å¥³æ€§', nationality:'æ—¥æœ¬',
    tel:'080-1111-2222', email:'misaki@example.com',
    addr:'æ±äº¬éƒ½æ¸‹è°·åŒºæµæ¯”å¯¿1-1-1', station:'æµæ¯”å¯¿é§…', commute:'æ¸‹è°·é§…',
    type:'re', status:'ãƒªãƒ¼ãƒ‰', caseId:null, agent:'yamada', agentName:'å±±ç”° èª ï¼ˆãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼çµŒç”±ï¼‰', reg:'2026-02-19',
    family:'å˜èº«', occupants:'1å', pet:'çŒ«', instrument:'ãªã—',
    job:'ä¼šç¤¾å“¡', employ:'å¥‘ç´„ç¤¾å“¡', employer:'â€”', tenure:'1ã€œ3å¹´', income:'300ã€œ400ä¸‡',
    rePrefType:'è³ƒè²¸', reArea:'æ¸‹è°·åŒºãƒ»ç›®é»’åŒºãƒ»ä¸–ç”°è°·åŒº', reBudget:'Â¥130,000ã€œ150,000', reMadori:'1LDK', reTiming:'4æœˆ',
    reChips:['ãƒšãƒƒãƒˆå¯','ã‚ªãƒ¼ãƒˆãƒ­ãƒƒã‚¯','2éšä»¥ä¸Š'],
  },
  'CL-00247': {
    name:'æ©‹æœ¬ éš†', kana:'ãƒã‚·ãƒ¢ãƒˆ ã‚¿ã‚«ã‚·', dob:'1985-03-10', gender:'ç”·æ€§', nationality:'æ—¥æœ¬',
    tel:'090-3333-4444', email:'takashi@example.com',
    addr:'æ±äº¬éƒ½ä¸–ç”°è°·åŒºä¸‰è»’èŒ¶å±‹2-2-2', station:'ä¸‰è»’èŒ¶å±‹é§…', commute:'æ¸‹è°·é§…',
    type:'hr', status:'ãƒªãƒ¼ãƒ‰', caseId:null, agent:'nakamura', agentName:'ä¸­æ‘ ãƒªã‚«', reg:'2026-02-20',
    hrCurrentJob:'æ–½å·¥ç®¡ç†ãƒ»PM', hrCurrentIndustry:'å»ºè¨­ãƒ»æ–½å·¥ç®¡ç†', hrCurrentEmploy:'æ­£ç¤¾å“¡', hrCurrentIncome:'700ã€œ1000ä¸‡', hrExpYears:'10å¹´ä»¥ä¸Š', hrLicense:'ä¸€ç´šå»ºç¯‰å£«ãƒ»å®…åœ°å»ºç‰©å–å¼•å£«', hrReason:'ã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒƒãƒ—', hrStatus:'ç©æ¥µçš„ã«æ´»å‹•ä¸­', hrWorking:'åœ¨è·ä¸­',
    hrJob:'ä¸å‹•ç”£PMãƒ»æ–½å·¥ç®¡ç†', hrIndustry:'ä¸å‹•ç”£', hrEmploy:'æ­£ç¤¾å“¡', hrIncome:'800ã€œ950ä¸‡', hrTiming:'1ã€œ3ãƒ¶æœˆä»¥å†…',
    hrLocation:'æ±äº¬éƒ½å†…ãƒ»ç¥å¥ˆå·', hrRemote:'é€±1ã€œ2æ—¥å‡ºç¤¾ç¨‹åº¦', hrOvertime:'ã‚ã‚‹ç¨‹åº¦OK', hrRelocation:'ä¸å¯',
    hrChips:['ã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒƒãƒ—å„ªå…ˆ','ç®¡ç†è·å€™è£œ','å¤§æ‰‹ãƒ»ä¸Šå ´ä¼æ¥­å¸Œæœ›'],
  },
};

// ãƒ¡ãƒ¢DB
const NOTES = {
  'CL-00244': [
    { id:1, by:'yamada', byName:'å±±ç”° èª ', byLabel:'ä¸å‹•ç”£AG', text:'åˆå›é¢è«‡å®Œäº†ã€‚è·å ´ã¯æ–°å®¿ã®ãŸã‚æ± è¢‹ãƒ»è¦ç”ºæ²¿ç·šã‚’æœ€å„ªå…ˆã§æ¡ˆå†…äºˆå®šã€‚\nå¤–è³‡ç³»å‹¤å‹™ã®ãŸã‚å¯©æŸ»ã§ç¢ºèªäº‹é …ã‚ã‚Šã€‚ä¿è¨¼ä¼šç¤¾ã¯æ•°ç¤¾ç¢ºèªä¸­ã€‚', at:'2026/02/15 14:32', edited:null },
    { id:2, by:'yamada', byName:'å±±ç”° èª ', byLabel:'ä¸å‹•ç”£AG', text:'ç‰©ä»¶Aï¼ˆè¦ç”ºå¾’æ­©5åˆ†ãƒ»1LDKï¼‰ã‚’ç´¹ä»‹æ¸ˆã¿ã€‚å†…è¦‹å¸Œæœ› â†’ 2/22 14æ™‚ã§èª¿æ•´ã€‚', at:'2026/02/17 10:05', edited:null },
    { id:3, by:'hq',     byName:'æœ¬éƒ¨ã‚¹ã‚¿ãƒƒãƒ•', byLabel:'æœ¬éƒ¨ç®¡ç†è·', text:'C-001ã¨ã—ã¦æ¡ˆä»¶ç™»éŒ²æ¸ˆã¿ã€‚ç®¡ç†ä¼šç¤¾ã¸ã®æ›¸é¡é€ä»˜ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç¢ºèªã®ã“ã¨ã€‚', at:'2026/02/18 09:20', edited:null },
  ],
  'CL-00245': [
    { id:4, by:'nakamura', byName:'ä¸­æ‘ ãƒªã‚«', byLabel:'äººæAG', text:'ä¸å‹•ç”£ãƒ»äººæä¸¡æ–¹ã®ãƒ‹ãƒ¼ã‚ºã‚ã‚Šã€‚è³ƒè²¸ã¯å±±ç”°AGã«å¼•ãç¶™ãã€äººæã¯ç§æ‹…å½“ã€‚\nè»¢è·ã¯ã¾ã æƒ…å ±åé›†æ®µéšã€‚æ€¥ãã§ã¯ãªã„ã€‚', at:'2026/02/17 16:45', edited:null },
  ],
  'CL-00246': [
    { id:5, by:'yamada', byName:'å±±ç”° èª ', byLabel:'ä¸å‹•ç”£AG', text:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼ˆä½è—¤æ§˜ï¼‰çµŒç”±ã®ç´¹ä»‹ã€‚çŒ«ã‚’é£¼ã£ã¦ã„ã‚‹ãŸã‚ãƒšãƒƒãƒˆå¯ç‰©ä»¶é™å®šã€‚\næµæ¯”å¯¿ã€œæ¸‹è°·æ²¿ç·šã§2ã€œ3ä»¶ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ä¸­ã€‚', at:'2026/02/19 11:15', edited:null },
  ],
  'CL-00247': [],
};
let NID = 100;

// ================================================================
// ã‚¿ãƒ–
// ================================================================
function showTab(t, el) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
  document.getElementById('tab-'+t).classList.add('active');
  if (el) el.classList.add('active');
  if (t==='list')   renderList();
  if (t==='detail') { loadDetail(document.getElementById('detail-sel').value); updateNoteLabel(); }
  if (t==='client') { buildChips(); }
}

// ================================================================
// ã‚¹ã‚¿ãƒƒãƒ•åˆ‡æ›¿
// ================================================================
function onStaffChange() {
  ME = document.getElementById('current-staff').value;
  const sel = document.getElementById('detail-sel');
  if (sel && document.getElementById('tab-detail').classList.contains('active')) {
    loadDetail(sel.value);
    updateNoteLabel();
  }
}
function updateNoteLabel() {
  const el = document.getElementById('note-poster');
  if (el) el.textContent = STAFF[ME].name + 'ï¼ˆ' + STAFF[ME].label + 'ï¼‰';
}

// ================================================================
// é¡§å®¢ä¸€è¦§
// ================================================================
function renderList() {
  const tbody = document.getElementById('tbl-body');
  tbody.innerHTML = Object.entries(DB).map(([id,c])=>{
    const nc = (NOTES[id]||[]).length;
    return `<tr class="clickable" onclick="openDetail('${id}')">
      <td><span style="font-family:'DM Mono',monospace;color:var(--gold)">${id}</span></td>
      <td style="font-weight:500">${escHtml(c.name)}</td>
      <td><span class="tag tag-${c.type}">${c.type==='re'?'ä¸å‹•ç”£':c.type==='hr'?'äººæ':'ä¸¡æ–¹'}</span></td>
      <td style="font-size:11px;color:var(--sub)">${c.agentName}</td>
      <td><span class="tag ${c.status==='æ¡ˆä»¶é€²è¡Œä¸­'?'tag-active':c.status==='ãƒªãƒ¼ãƒ‰'?'tag-lead':'tag-done'}">${c.status}</span></td>
      <td style="font-family:'DM Mono',monospace;font-size:11px;color:var(--blue)">${c.caseId||'â€”'}</td>
      <td style="color:${nc>0?'var(--gold)':'var(--muted)'};font-weight:${nc>0?'600':'400'}">${nc}ä»¶</td>
      <td style="color:var(--muted);font-size:11px">${c.reg}</td>
    </tr>`;
  }).join('');
}

function openDetail(id) {
  document.getElementById('detail-sel').value = id;
  showTab('detail', document.querySelectorAll('.tab')[2]);
}

// ================================================================
// é¡§å®¢è©³ç´°
// ================================================================
function loadDetail(id) {
  const c = DB[id]; if (!c) return;

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  document.getElementById('detail-status').outerHTML =
    `<span id="detail-status" class="tag ${c.status==='æ¡ˆä»¶é€²è¡Œä¸­'?'tag-active':c.status==='ãƒªãƒ¼ãƒ‰'?'tag-lead':'tag-done'}">${c.status}</span>`;

  // é¡§å®¢ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
  let h = '';
  h += `<div class="s-label" style="margin-top:0">åŸºæœ¬æƒ…å ±</div>`;
  h += dv2('é¡§å®¢ID', id, 'æ°å', c.name);
  h += dv2('ãƒ•ãƒªã‚¬ãƒŠ', c.kana||'â€”', 'ç”Ÿå¹´æœˆæ—¥', c.dob||'â€”');
  h += dv2('æ€§åˆ¥', c.gender||'â€”', 'å›½ç±', c.nationality||'â€”');
  h += dv2('é›»è©±ç•ªå·', c.tel, 'ãƒ¡ãƒ¼ãƒ«', c.email||'â€”');
  h += dv1('ç¾ä½æ‰€', c.addr||'â€”');
  h += dv2('æœ€å¯„ã‚Šé§…', c.station||'â€”', 'é€šå‹¤å…ˆæœ€å¯„', c.commute||'â€”');
  h += `<div style="margin-bottom:10px"><span class="tag tag-${c.type}">${c.type==='re'?'ä¸å‹•ç”£':c.type==='hr'?'äººæ':'ä¸¡æ–¹'}</span> <span style="font-size:10px;color:var(--muted)">æ‹…å½“ï¼š${c.agentName}ã€€ç™»éŒ²ï¼š${c.reg}</span></div>`;

  if (c.type==='re'||c.type==='both') {
    h += `<div class="s-label">å®¶æ—ãƒ»ç”Ÿæ´»ï¼ˆä¸å‹•ç”£ï¼‰</div>`;
    h += dv3('å®¶æ—æ§‹æˆ', c.family||'â€”', 'åŒå±…äººæ•°', c.occupants||'â€”', 'ãƒšãƒƒãƒˆ', c.pet||'â€”');
    h += dv1('æ¥½å™¨æ¼”å¥', c.instrument||'â€”');
    h += `<div class="s-label">è·æ¥­ãƒ»åå…¥ï¼ˆå…¥å±…å¯©æŸ»ï¼‰</div>`;
    h += dv2('è·æ¥­', c.job||'â€”', 'é›‡ç”¨å½¢æ…‹', c.employ||'â€”');
    h += dv3('å‹¤å‹™å…ˆ', c.employer||'â€”', 'å‹¤ç¶šå¹´æ•°', c.tenure||'â€”', 'å¹´å', c.income||'â€”');
    h += `<div class="s-label">ä¸å‹•ç”£å¸Œæœ›æ¡ä»¶</div>`;
    h += dv2('ç¨®åˆ¥', c.rePrefType||'â€”', 'å¸Œæœ›ã‚¨ãƒªã‚¢', c.reArea||'â€”');
    h += dv3('äºˆç®—', c.reBudget||'â€”', 'é–“å–ã‚Š', c.reMadori||'â€”', 'æ™‚æœŸ', c.reTiming||'â€”');
    if (c.reChips?.length) h += chips(c.reChips, 'rgba(201,168,76,0.12)', 'var(--gold)');
  }
  if (c.type==='hr'||c.type==='both') {
    h += `<div class="s-label">ç¾åœ¨ã®ã‚­ãƒ£ãƒªã‚¢ï¼ˆäººæï¼‰</div>`;
    h += dv2('ç¾åœ¨ã®è·ç¨®', c.hrCurrentJob||'â€”', 'æ¥­ç•Œ', c.hrCurrentIndustry||'â€”');
    h += dv3('é›‡ç”¨å½¢æ…‹', c.hrCurrentEmploy||'â€”', 'ç¾åœ¨ã®å¹´å', c.hrCurrentIncome||'â€”', 'çµŒé¨“å¹´æ•°', c.hrExpYears||'â€”');
    h += dv2('ä¿æœ‰è³‡æ ¼', c.hrLicense||'â€”', 'è»¢è·ç†ç”±', c.hrReason||'â€”');
    h += dv2('è»¢è·æ´»å‹•çŠ¶æ³', c.hrStatus||'â€”', 'åœ¨è·ãƒ»é›¢è·', c.hrWorking||'â€”');
    h += `<div class="s-label">è»¢è·å¸Œæœ›æ¡ä»¶</div>`;
    h += dv2('å¸Œæœ›è·ç¨®', c.hrJob||'â€”', 'å¸Œæœ›æ¥­ç•Œ', c.hrIndustry||'â€”');
    h += dv3('é›‡ç”¨å½¢æ…‹', c.hrEmploy||'â€”', 'å¸Œæœ›å¹´å', c.hrIncome||'â€”', 'å¸Œæœ›æ™‚æœŸ', c.hrTiming||'â€”');
    h += dv2('å¸Œæœ›å‹¤å‹™åœ°', c.hrLocation||'â€”', 'ãƒ†ãƒ¬ãƒ¯ãƒ¼ã‚¯', c.hrRemote||'â€”');
    h += dv2('æ®‹æ¥­è¨±å®¹åº¦', c.hrOvertime||'â€”', 'è»¢å‹¤', c.hrRelocation||'â€”');
    if (c.hrChips?.length) h += chips(c.hrChips, 'rgba(34,197,94,0.12)', 'var(--green)');
  }

  document.getElementById('customer-view').innerHTML = h;

  // è¿½è¨˜ãƒ•ã‚©ãƒ¼ãƒ 
  let af = '';
  if (c.type==='re'||c.type==='both') {
    af += `<div style="font-size:10px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:8px">ä¸å‹•ç”£è¿½è¨˜</div>`;
    af += `<div class="form-row"><div class="fg"><label>éå»ã®å¯©æŸ»è½ã¡</label><select><option>ãªã—</option><option>ã‚ã‚Šï¼ˆè©³ç´°ã¯ãƒ¡ãƒ¢ã¸ï¼‰</option></select></div><div class="fg"><label>ä¿è¨¼äºº</label><select><option>ã‚ã‚Š</option><option>ãªã—ï¼ˆä¿è¨¼ä¼šç¤¾ï¼‰</option><option>æœªå®š</option></select></div></div>`;
    af += `<div class="form-row single"><div class="fg"><label>å¯©æŸ»è£œè¶³</label><input placeholder="ä¾‹ï¼šæºæ³‰å¾´åç¥¨ç¢ºèªæ¸ˆã€ä¿è¨¼ä¼šç¤¾â—‹â—‹ã«ã¦å¯©æŸ»é€šé"></div></div>`;
  }
  if (c.type==='hr'||c.type==='both') {
    if (c.type==='both') af += `<div style="border-top:1px solid var(--border);margin:12px 0"></div>`;
    af += `<div style="font-size:10px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:8px">äººæè¿½è¨˜</div>`;
    af += `<div class="form-row"><div class="fg"><label>é¢è«‡å®Ÿæ–½</label><select><option>æœªå®Ÿæ–½</option><option>å®Ÿæ–½æ¸ˆã¿</option></select></div><div class="fg"><label>å†…å®šçŠ¶æ³</label><select><option>ãªã—</option><option>é¸è€ƒä¸­</option><option>å†…å®šã‚ã‚Š</option></select></div></div>`;
    af += `<div class="form-row single"><div class="fg"><label>éå…¬é–‹å¸Œæœ›ä¼æ¥­ãƒ»NGãƒ¯ãƒ¼ãƒ‰</label><input placeholder="ä¾‹ï¼šç¾è·ï¼ˆæ ªå¼ä¼šç¤¾â–¡â–¡å»ºè¨­ï¼‰ã«ã¯å¿œå‹Ÿä¸å¯"></div></div>`;
  }
  document.getElementById('addl-form').innerHTML = af || '<div style="font-size:12px;color:var(--muted)">è¿½è¨˜é …ç›®ãªã—</div>';

  // ãƒ¡ãƒ¢
  renderNotes(id);
  updateNoteLabel();
}

function dv1(l,v) {
  const e = !v||v==='â€”';
  return `<div style="margin-bottom:10px"><div class="dv-item"><div class="dv-label">${l}</div><div class="dv-val ${e?'dv-empty':''}">${v||'â€”'}</div></div></div>`;
}
function dv2(l1,v1,l2,v2) {
  return `<div class="dv-row" style="margin-bottom:8px">
    <div class="dv-item"><div class="dv-label">${l1}</div><div class="dv-val ${(!v1||v1==='â€”')?'dv-empty':''}">${v1||'â€”'}</div></div>
    <div class="dv-item"><div class="dv-label">${l2}</div><div class="dv-val ${(!v2||v2==='â€”')?'dv-empty':''}">${v2||'â€”'}</div></div>
  </div>`;
}
function dv3(l1,v1,l2,v2,l3,v3) {
  return `<div class="dv-row three" style="margin-bottom:8px">
    <div class="dv-item"><div class="dv-label">${l1}</div><div class="dv-val ${(!v1||v1==='â€”')?'dv-empty':''}">${v1||'â€”'}</div></div>
    <div class="dv-item"><div class="dv-label">${l2}</div><div class="dv-val ${(!v2||v2==='â€”')?'dv-empty':''}">${v2||'â€”'}</div></div>
    <div class="dv-item"><div class="dv-label">${l3}</div><div class="dv-val ${(!v3||v3==='â€”')?'dv-empty':''}">${v3||'â€”'}</div></div>
  </div>`;
}
function chips(arr, bg, color) {
  return `<div style="display:flex;flex-wrap:wrap;gap:5px;margin-bottom:10px">${arr.map(x=>`<span style="background:${bg};color:${color};padding:2px 9px;border-radius:12px;font-size:11px">${x}</span>`).join('')}</div>`;
}

// ================================================================
// ãƒ¡ãƒ¢
// ================================================================
function renderNotes(id) {
  const notes = NOTES[id]||[];
  const el = document.getElementById('note-list');
  if (!notes.length) {
    el.innerHTML = `<div style="font-size:12px;color:var(--muted);padding:8px 0 12px">ã¾ã ãƒ¡ãƒ¢ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚</div>`;
    return;
  }
  el.innerHTML = notes.map(n => {
    const canEdit = (n.by === ME) || (ME === 'hq');
    return `
    <div class="note-card ${n.by===ME?'mine':''}" id="nc-${n.id}">
      <div class="note-header">
        <div>
          <div class="note-author">
            ${escHtml(n.byName)}
            <span style="font-size:10px;color:var(--muted);font-weight:400;margin-left:4px">${escHtml(n.byLabel)}</span>
            ${n.by===ME ? `<span class="pb pb-own" style="margin-left:6px">è‡ªåˆ†</span>` : ''}
            ${ME==='hq'&&n.by!==ME ? `<span class="pb pb-hq" style="margin-left:6px">æœ¬éƒ¨</span>` : ''}
            ${!canEdit ? `<span class="pb pb-lock" style="margin-left:6px">é–²è¦§ã®ã¿</span>` : ''}
          </div>
          <div class="note-time">${escHtml(n.at)}${n.edited?` <span style="color:var(--muted)">ï¼ˆç·¨é›†æ¸ˆï¼š${escHtml(String(n.edited||""))}ï¼‰</span>`:''}</div>
        </div>
        ${canEdit ? `
        <div style="display:flex;gap:4px">
          <button class="btn-ghost" onclick="startEdit(${n.id})">ç·¨é›†</button>
          <button class="btn-danger" onclick="delNote(${n.id},'${id}')">å‰Šé™¤</button>
        </div>` : ''}
      </div>
      <div class="note-body" id="nb-${n.id}">${escHtml(n.text)}</div>
    </div>`;
  }).join('');
}

function addNote() {
  const inp = document.getElementById('note-input');
  const txt = inp.value.trim();
  if (!txt) { toast('âš ï¸ ãƒ¡ãƒ¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  const id = document.getElementById('detail-sel').value;
  if (!NOTES[id]) NOTES[id]=[];
  NOTES[id].push({ id:NID++, by:ME, byName:STAFF[ME].name, byLabel:STAFF[ME].label, text:txt, at:nowStr(), edited:null });
  inp.value='';
  renderNotes(id);
  toast('âœ… ãƒ¡ãƒ¢ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸ');
}

function startEdit(nid) {
  const nb = document.getElementById('nb-'+nid);
  const nc = document.getElementById('nc-'+nid);
  const orig = nb.innerText;
  nc.classList.add('editing');
  nb.innerHTML = `
    <textarea class="note-edit-textarea" id="ea-${nid}">${orig}</textarea>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
      <button class="btn btn-outline btn-sm" onclick="cancelEdit(${nid},\`${orig.replace(/`/g,'\\`')}\`)">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn btn-gold btn-sm" onclick="saveEdit(${nid})">ä¿å­˜</button>
    </div>`;
  document.getElementById('ea-'+nid).focus();
}

function cancelEdit(nid, orig) {
  const nb = document.getElementById('nb-'+nid);
  const nc = document.getElementById('nc-'+nid);
  nb.className = 'note-body';
  nb.textContent = orig;
  nc.classList.remove('editing');
}

function saveEdit(nid) {
  const txt = document.getElementById('ea-'+nid).value.trim();
  if (!txt) { toast('âš ï¸ å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  const id = document.getElementById('detail-sel').value;
  const n = (NOTES[id]||[]).find(x=>x.id===nid);
  if (n) { n.text=txt; n.edited=nowStr(); }
  renderNotes(id);
  toast('âœ… ãƒ¡ãƒ¢ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
}

function delNote(nid, cid) {
  if (!confirm('ã“ã®ãƒ¡ãƒ¢ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return;
  NOTES[cid] = (NOTES[cid]||[]).filter(n=>n.id!==nid);
  renderNotes(cid);
  toast('ğŸ—‘ ãƒ¡ãƒ¢ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
}

function nowStr() {
  const d=new Date();
  return `${d.getFullYear()}/${p(d.getMonth()+1)}/${p(d.getDate())} ${p(d.getHours())}:${p(d.getMinutes())}`;
}
function p(n){return String(n).padStart(2,'0');}
function escHtml(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}

// ================================================================
// é€ä»˜ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿
// ================================================================
function setMode(m) {
  document.getElementById('mode-a').classList.toggle('active', m==='send');
  document.getElementById('mode-b').classList.toggle('active', m==='staff');
  document.getElementById('send-section').style.display   = m==='send'  ?'block':'none';
  document.getElementById('staff-section').style.display  = m==='staff' ?'block':'none';
}

// ================================================================
// é¡§å®¢ãƒ•ã‚©ãƒ¼ãƒ  ç¨®åˆ¥åˆ‡æ›¿
// ================================================================
function updateCF() {
  const v = document.getElementById('cf-type').value;
  const re = v==='re'||v==='both';
  const hr = v==='hr'||v==='both';
  document.getElementById('cf-re-family').style.display = re?'block':'none';
  document.getElementById('cf-re-job').style.display    = re?'block':'none';
  document.getElementById('cf-re-pref').style.display   = re?'block':'none';
  document.getElementById('cf-hr-career').style.display = hr?'block':'none';
  document.getElementById('cf-hr-pref').style.display   = hr?'block':'none';
}

// ================================================================
// ãƒãƒƒãƒ—
// ================================================================
const RE_CHIPS=['ãƒšãƒƒãƒˆå¯','æ¥½å™¨å¯','äº‹å‹™æ‰€åˆ©ç”¨å¯','é§è»Šå ´å¿…é ˆ','ãƒã‚¹ãƒˆã‚¤ãƒ¬åˆ¥','2éšä»¥ä¸Š','ã‚ªãƒ¼ãƒˆãƒ­ãƒƒã‚¯','å®…é…ãƒœãƒƒã‚¯ã‚¹','å—å‘ã','ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æ¸ˆ','æ–°ç¯‰ãƒ»ç¯‰æµ…'];
const HR_CHIPS=['å¹´åã‚¢ãƒƒãƒ—å„ªå…ˆ','ã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒƒãƒ—å„ªå…ˆ','å®‰å®šé‡è¦–','å¤§æ‰‹ãƒ»ä¸Šå ´ä¼æ¥­å¸Œæœ›','ãƒ™ãƒ³ãƒãƒ£ãƒ¼æ­“è¿','ãƒ•ãƒ«ãƒªãƒ¢ãƒ¼ãƒˆå¸Œæœ›','å‰¯æ¥­OK','æœè£…è‡ªç”±','è³‡æ ¼å–å¾—æ”¯æ´','ç”£è‚²ä¼‘å–å¾—å®Ÿç¸¾','ç®¡ç†è·å€™è£œ','ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–åˆ¶åº¦ã‚ã‚Š'];
const reOn=new Set(), hrOn=new Set();

function buildChips() {
  buildChipArea('re-chips', RE_CHIPS, reOn, 'rgba(201,168,76,0.2)', 'rgba(201,168,76,0.6)', 'var(--gold)', 'buildChips');
  buildChipArea('hr-chips', HR_CHIPS, hrOn, 'rgba(34,197,94,0.15)', 'rgba(34,197,94,0.4)', 'var(--green)', 'buildChips');
}
function buildChipArea(areaId, list, set, bgOn, bordOn, colorOn, rebuild) {
  const el = document.getElementById(areaId); if (!el) return;
  el.innerHTML='';
  list.forEach(c=>{
    const on=set.has(c);
    const btn=document.createElement('button');
    btn.textContent=(on?'âœ“ ':'')+c;
    btn.style.cssText=`padding:5px 11px;border-radius:20px;font-size:11px;cursor:pointer;font-family:inherit;transition:all .15s;background:${on?bgOn:'rgba(37,42,56,0.6)'};border:${on?`1px solid ${bordOn}`:'1px solid rgba(37,42,56,0.8)'};color:${on?colorOn:'var(--muted)'}`;
    btn.onclick=()=>{on?set.delete(c):set.add(c);window[rebuild]();};
    el.appendChild(btn);
  });
}

// ================================================================
// Toast
// ================================================================
function toast(msg) {
  const el=document.getElementById('toast-el');
  el.textContent=msg; el.classList.add('show');
  setTimeout(()=>el.classList.remove('show'),3000);
}

// ================================================================
// åˆæœŸåŒ–
// ================================================================
renderList();
buildChips();
</script>
</body>
</html>
