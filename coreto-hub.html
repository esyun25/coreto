<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CORETO â€” çµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=DM+Mono:wght@400;500&family=Syne:wght@700;800&display=swap');
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#07090f;--card:#0f1119;--card2:#141720;--border:#1e2235;--border2:#252a3d;
  --gold:#c9a84c;--gold-l:#e8c96a;--gold-dim:#7a5f22;--gold-bg:rgba(201,168,76,.07);
  --blue:#4f9cf9;--green:#34d399;--red:#f87171;--orange:#fb923c;--purple:#a78bfa;--teal:#2dd4bf;
  --muted:#4a5270;--sub:#7a849e;--text:#e2e6f3;
}
html,body{height:100%;font-family:'Noto Sans JP',sans-serif;background:var(--bg);color:var(--text);overflow:hidden}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOGIN SCREEN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#login-screen{
  position:fixed;inset:0;background:var(--bg);z-index:1000;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  background-image:radial-gradient(ellipse at 20% 50%,rgba(201,168,76,.04) 0%,transparent 50%),
                   radial-gradient(ellipse at 80% 20%,rgba(79,156,249,.04) 0%,transparent 50%);
}
.login-logo{font-family:'Syne',sans-serif;font-size:52px;font-weight:800;color:var(--gold);
  letter-spacing:8px;margin-bottom:8px}
.login-tagline{font-size:11px;color:var(--muted);letter-spacing:3px;text-transform:uppercase;margin-bottom:48px}
.login-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;width:620px;margin-bottom:20px}
.login-card{background:var(--card);border:1px solid var(--border);border-radius:14px;
  padding:18px 20px;cursor:pointer;transition:all .2s;position:relative;overflow:hidden}
.login-card::before{content:'';position:absolute;inset:0;opacity:0;transition:opacity .2s}
.login-card:hover{border-color:var(--border2);transform:translateY(-2px)}
.login-card.hq::before{background:radial-gradient(ellipse at top left,rgba(201,168,76,.08),transparent 60%)}
.login-card.re::before{background:radial-gradient(ellipse at top left,rgba(79,156,249,.08),transparent 60%)}
.login-card.hr::before{background:radial-gradient(ellipse at top left,rgba(52,211,153,.08),transparent 60%)}
.login-card.pt::before{background:radial-gradient(ellipse at top left,rgba(167,139,250,.08),transparent 60%)}
.login-card:hover::before{opacity:1}
.lc-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.lc-icon{width:42px;height:42px;border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:20px}
.lc-type{font-family:'Syne',sans-serif;font-size:14px;font-weight:800}
.lc-desc{font-size:10px;color:var(--sub);margin-bottom:10px;line-height:1.7}
.lc-accounts{display:flex;flex-direction:column;gap:4px}
.lc-acc{display:flex;align-items:center;justify-content:space-between;padding:6px 10px;
  background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:8px;
  font-size:10px;cursor:pointer;transition:all .12s}
.lc-acc:hover{background:rgba(255,255,255,.06)}
.acc-name{font-weight:700}
.acc-id{font-family:'DM Mono',monospace;color:var(--muted)}
.acc-rank{font-size:8px;font-weight:700;padding:2px 6px;border-radius:4px}
.login-hint{font-size:10px;color:var(--muted);margin-top:4px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   APP SHELL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#app-shell{display:none;height:100vh;flex-direction:column}
.topbar{height:54px;background:rgba(7,9,15,.95);border-bottom:1px solid var(--border);
  backdrop-filter:blur(14px);display:flex;align-items:center;padding:0 20px;gap:16px;
  position:relative;z-index:100;flex-shrink:0}
.logo{font-family:'Syne',sans-serif;font-size:18px;font-weight:800;color:var(--gold);letter-spacing:3px}
.topbar-sep{width:1px;height:18px;background:var(--border2)}
.topbar-context{font-size:10px;color:var(--muted);letter-spacing:1px}
.topbar-user{display:flex;align-items:center;gap:10px;margin-left:auto}
.notif-btn{width:32px;height:32px;border-radius:8px;background:var(--card2);border:1px solid var(--border);
  display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px;position:relative}
.notif-dot{position:absolute;top:4px;right:4px;width:7px;height:7px;border-radius:50%;
  background:var(--red);border:1.5px solid var(--bg)}
.user-pill{display:flex;align-items:center;gap:8px;padding:4px 12px 4px 4px;
  background:var(--card2);border:1px solid var(--border);border-radius:20px;cursor:pointer}
.user-avatar{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;
  justify-content:center;font-size:11px;font-weight:700}
.user-name{font-size:11px;font-weight:700}
.user-role{font-size:9px;color:var(--sub)}
.logout-btn{font-size:10px;padding:5px 12px;border-radius:6px;border:1px solid var(--border2);
  background:transparent;color:var(--muted);cursor:pointer;font-family:'Noto Sans JP',sans-serif;transition:all .12s}
.logout-btn:hover{color:var(--text);border-color:var(--sub)}

/* â”€â”€ Body layout â”€â”€ */
.body-layout{display:flex;flex:1;overflow:hidden}

/* â”€â”€ Sidebar â”€â”€ */
.sidebar{width:216px;flex-shrink:0;background:var(--card2);border-right:1px solid var(--border);
  overflow-y:auto;padding:16px 0;display:flex;flex-direction:column}
.nav-section-label{padding:0 16px 5px 16px;font-size:8px;color:var(--muted);letter-spacing:2px;
  text-transform:uppercase;margin-top:16px}
.nav-section-label:first-child{margin-top:0}
.nav-item{display:flex;align-items:center;gap:9px;padding:8px 10px 8px 12px;
  margin:1px 8px;border-radius:9px;cursor:pointer;transition:all .15s;font-size:12px;color:var(--sub);
  border:1px solid transparent}
.nav-item:hover{background:rgba(255,255,255,.04);color:var(--text)}
.nav-item.on{background:var(--gold-bg);color:var(--gold);border-color:var(--gold-dim)}
.nav-item.locked{color:var(--muted);opacity:.5;cursor:not-allowed}
.ni-icon{width:24px;height:24px;border-radius:6px;display:flex;align-items:center;justify-content:center;
  font-size:13px;background:rgba(255,255,255,.04);flex-shrink:0}
.nav-item.on .ni-icon{background:rgba(201,168,76,.12)}
.ni-badge{margin-left:auto;background:var(--red);color:#fff;font-size:7px;font-weight:700;
  padding:1px 5px;border-radius:8px;min-width:16px;text-align:center}
.ni-ext{margin-left:auto;font-size:8px;color:var(--muted)}
.sidebar-footer{margin-top:auto;padding:14px 16px;border-top:1px solid var(--border)}
.sf-id{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted)}

/* â”€â”€ Content area â”€â”€ */
.content{flex:1;overflow-y:auto;padding:24px 28px 60px;background:var(--bg)}
.page{display:none}.page.on{display:block}
.page-hdr{margin-bottom:22px}
.page-title{font-family:'Syne',sans-serif;font-size:20px;font-weight:800;margin-bottom:4px}
.page-sub{font-size:11px;color:var(--sub)}

/* â”€â”€ Cards â”€â”€ */
.card{background:var(--card);border:1px solid var(--border);border-radius:14px}
.card-hdr{padding:13px 18px;border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between}
.ch-title{font-size:9px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;
  display:flex;align-items:center;gap:8px}
.ch-title::before{content:'';width:3px;height:11px;border-radius:2px;background:var(--gold)}
.card-body{padding:18px}

/* â”€â”€ Stats â”€â”€ */
.stats-grid{display:grid;gap:12px;margin-bottom:20px}
.sg-5{grid-template-columns:repeat(5,1fr)}
.sg-4{grid-template-columns:repeat(4,1fr)}
.sg-3{grid-template-columns:repeat(3,1fr)}
.stat{background:var(--card);border:1px solid var(--border);border-radius:13px;
  padding:15px 17px;position:relative;overflow:hidden;transition:border-color .15s}
.stat:hover{border-color:var(--border2)}
.stat-ico{font-size:18px;margin-bottom:7px}
.stat-val{font-family:'DM Mono',monospace;font-size:26px;font-weight:500;line-height:1;margin-bottom:3px}
.stat-label{font-size:10px;color:var(--muted)}
.stat-sub{font-size:10px;margin-top:5px}

/* â”€â”€ Tool cards â”€â”€ */
.tool-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:20px}
.tool-card{background:var(--card);border:1px solid var(--border);border-radius:13px;
  padding:18px;cursor:pointer;transition:all .18s;position:relative;overflow:hidden}
.tool-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:linear-gradient(90deg,transparent,transparent);transition:background .18s}
.tool-card:hover{border-color:var(--border2);transform:translateY(-2px)}
.tool-card:hover::before{background:linear-gradient(90deg,transparent,var(--tc-color,var(--gold)),transparent)}
.tc-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.tc-icon{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;
  justify-content:center;font-size:20px;flex-shrink:0}
.tc-badge{font-size:9px;font-weight:700;padding:3px 8px;border-radius:6px}
.tc-name{font-size:13px;font-weight:700;margin-bottom:5px}
.tc-desc{font-size:10px;color:var(--sub);line-height:1.7}
.tc-footer{display:flex;align-items:center;justify-content:space-between;margin-top:12px;
  padding-top:10px;border-top:1px solid var(--border)}
.tc-role{font-size:9px;color:var(--muted)}
.tc-open{font-size:10px;font-weight:700}

/* â”€â”€ Pills â”€â”€ */
.pill{display:inline-flex;align-items:center;padding:3px 9px;border-radius:6px;font-size:9px;font-weight:700;white-space:nowrap}
.pill-gold{background:rgba(201,168,76,.13);color:var(--gold);border:1px solid var(--gold-dim)}
.pill-blue{background:rgba(79,156,249,.12);color:var(--blue);border:1px solid rgba(79,156,249,.25)}
.pill-green{background:rgba(52,211,153,.12);color:var(--green);border:1px solid rgba(52,211,153,.25)}
.pill-red{background:rgba(248,113,113,.12);color:var(--red);border:1px solid rgba(248,113,113,.3)}
.pill-purple{background:rgba(167,139,250,.12);color:var(--purple);border:1px solid rgba(167,139,250,.25)}
.pill-muted{background:rgba(74,82,112,.15);color:var(--sub);border:1px solid var(--border2)}
.pill-orange{background:rgba(251,146,60,.12);color:var(--orange);border:1px solid rgba(251,146,60,.3)}

/* â”€â”€ Buttons â”€â”€ */
.btn{padding:8px 16px;border-radius:9px;font-size:11px;font-weight:700;cursor:pointer;
  font-family:'Noto Sans JP',sans-serif;transition:all .15s;border:none;white-space:nowrap;display:inline-flex;align-items:center;gap:6px}
.btn-primary{background:linear-gradient(135deg,var(--gold),#a8742a);color:#0a0c10}
.btn-primary:hover{filter:brightness(1.1)}
.btn-ghost{background:transparent;border:1px solid var(--border2);color:var(--sub)}
.btn-ghost:hover{color:var(--text);border-color:var(--sub)}
.btn-sm{padding:5px 12px;font-size:10px;border-radius:7px}

/* â”€â”€ Table â”€â”€ */
.tbl{width:100%;border-collapse:collapse}
.tbl th{padding:8px 14px;font-size:9px;color:var(--muted);font-weight:700;letter-spacing:.5px;
  text-transform:uppercase;border-bottom:1px solid var(--border);background:var(--card2);text-align:left;white-space:nowrap}
.tbl td{padding:11px 14px;border-bottom:1px solid rgba(30,34,53,.5);font-size:12px;vertical-align:middle}
.tbl tr:last-child td{border:none}
.tbl tr:hover td{background:rgba(255,255,255,.012)}
.mono{font-family:'DM Mono',monospace}

/* â”€â”€ Activity feed â”€â”€ */
.feed{display:flex;flex-direction:column;gap:0}
.feed-item{display:flex;align-items:flex-start;gap:12px;padding:11px 0;border-bottom:1px solid rgba(30,34,53,.5)}
.feed-item:last-child{border:none}
.fi-dot{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:13px;flex-shrink:0;margin-top:1px}
.fi-content{flex:1}
.fi-msg{font-size:12px;line-height:1.5}
.fi-time{font-size:10px;color:var(--muted);margin-top:2px}

/* â”€â”€ Alert banner â”€â”€ */
.alert-bar{display:flex;align-items:center;gap:10px;padding:10px 16px;border-radius:10px;
  margin-bottom:16px;font-size:12px}
.alert-bar-red{background:rgba(248,113,113,.08);border:1px solid rgba(248,113,113,.25);color:var(--text)}
.alert-bar-orange{background:rgba(251,146,60,.07);border:1px solid rgba(251,146,60,.22);color:var(--text)}

/* â”€â”€ Rank ring â”€â”€ */
.rank-display{display:flex;align-items:center;gap:16px;padding:16px;
  background:var(--gold-bg);border:1px solid var(--gold-dim);border-radius:12px}
.rank-ring-wrap{position:relative;width:70px;height:70px;flex-shrink:0}
.rank-ring-wrap svg{position:absolute;inset:0;transform:rotate(-90deg)}
.rank-ring-inner{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
  font-size:22px}

/* â”€â”€ Progress bar â”€â”€ */
.prog-wrap{height:6px;background:var(--border2);border-radius:3px;overflow:hidden;margin-top:6px}
.prog-fill{height:100%;border-radius:3px}

/* â”€â”€ Grid 2 col â”€â”€ */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px}
.grid-2r{display:grid;grid-template-columns:1fr 320px;gap:16px}
.grid-3r{display:grid;grid-template-columns:1fr 1fr 280px;gap:14px}

::-webkit-scrollbar{width:4px}::-webkit-scrollbar-thumb{background:var(--border2);border-radius:2px}

/* â”€â”€ Login form (new) â”€â”€ */
.login-form-card{
  width:420px;background:var(--card);border:1px solid var(--border2);
  border-radius:18px;padding:40px 40px 32px;position:relative;overflow:hidden;
}
.login-form-card::before{
  content:'';position:absolute;top:-60px;right:-60px;width:200px;height:200px;
  border-radius:50%;background:radial-gradient(circle,rgba(201,168,76,.06),transparent 70%);
  pointer-events:none;
}
.lf-logo{font-family:'Syne',sans-serif;font-size:38px;font-weight:800;color:var(--gold);
  letter-spacing:8px;text-align:center;margin-bottom:6px}
.lf-sub{font-size:10px;color:var(--muted);letter-spacing:3px;text-transform:uppercase;
  text-align:center;margin-bottom:36px}
.lf-label{font-size:10px;color:var(--sub);margin-bottom:6px;display:block;font-weight:600}
.lf-input{
  width:100%;background:#090b13;border:1px solid var(--border2);border-radius:10px;
  padding:12px 16px;color:var(--text);font-size:14px;font-family:'DM Mono',monospace;
  transition:border-color .15s;margin-bottom:14px;outline:none;letter-spacing:1px;
}
.lf-input:focus{border-color:var(--gold)}
.lf-input.error{border-color:var(--red);animation:shake .3s ease}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}
.lf-btn{
  width:100%;padding:13px;background:linear-gradient(135deg,var(--gold),#a8742a);
  border:none;border-radius:10px;color:#0a0c10;font-size:13px;font-weight:800;
  cursor:pointer;font-family:'Noto Sans JP',sans-serif;letter-spacing:1px;
  transition:all .15s;margin-top:6px;
}
.lf-btn:hover{filter:brightness(1.1);transform:translateY(-1px)}
.lf-btn:active{transform:translateY(0)}
.lf-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}
.lf-error{
  background:rgba(248,113,113,.08);border:1px solid rgba(248,113,113,.25);
  border-radius:9px;padding:10px 14px;font-size:11px;color:var(--red);
  margin-bottom:14px;display:none;line-height:1.6;
}
.lf-role-hint{
  margin-top:20px;padding-top:18px;border-top:1px solid var(--border);
  display:grid;grid-template-columns:repeat(2,1fr);gap:6px;
}
.lrh-item{
  display:flex;align-items:center;gap:7px;padding:7px 10px;
  background:rgba(255,255,255,.02);border:1px solid var(--border);border-radius:8px;
  font-size:10px;color:var(--muted);
}
.lrh-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.lf-demo{margin-top:16px;text-align:center;font-size:10px;color:var(--muted)}
.lf-demo-toggle{color:var(--gold-dim);cursor:pointer;text-decoration:underline;font-size:10px}
.lf-demo-panel{
  margin-top:12px;background:rgba(201,168,76,.04);border:1px solid var(--gold-dim);
  border-radius:10px;padding:12px;display:none;
}
.demo-acc{
  display:flex;align-items:center;justify-content:space-between;
  padding:6px 0;border-bottom:1px solid rgba(30,34,53,.5);cursor:pointer;transition:opacity .12s;
}
.demo-acc:last-child{border:none}
.demo-acc:hover{opacity:.75}
.da-name{font-size:11px;font-weight:700}
.da-info{font-family:'DM Mono',monospace;font-size:10px;color:var(--muted)}
.da-type{font-size:9px;font-weight:700;padding:2px 7px;border-radius:5px}
.lf-loading{
  position:absolute;inset:0;background:rgba(7,9,15,.85);border-radius:18px;
  display:none;align-items:center;justify-content:center;flex-direction:column;gap:14px;
  backdrop-filter:blur(4px);
}
.lf-spinner{
  width:36px;height:36px;border:3px solid var(--border2);border-top-color:var(--gold);
  border-radius:50%;animation:spin .7s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
.lf-loading-msg{font-size:12px;color:var(--sub)}

</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LOGIN SCREEN
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="login-screen">
  <div class="login-form-card">
    <!-- Loading overlay -->
    <div class="lf-loading" id="lf-loading">
      <div class="lf-spinner"></div>
      <div class="lf-loading-msg" id="lf-loading-msg">èªè¨¼ä¸­...</div>
    </div>

    <div class="lf-logo">CORETO</div>
    <div class="lf-sub">Business Management System</div>

    <div class="lf-error" id="lf-error"></div>

    <label class="lf-label" for="lf-id">CORETO ID</label>
    <input class="lf-input" type="text" id="lf-id" placeholder="ä¾‹ï¼š10012" maxlength="10"
           autocomplete="username" oninput="clearLoginError()"
           onkeydown="if(event.key==='Enter')document.getElementById('lf-pw').focus()">

    <label class="lf-label" for="lf-pw">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
    <input class="lf-input" type="password" id="lf-pw" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
           autocomplete="current-password" oninput="clearLoginError()"
           onkeydown="if(event.key==='Enter')doLogin()">

    <button class="lf-btn" id="lf-submit" onclick="doLogin()">ãƒ­ã‚°ã‚¤ãƒ³</button>
    <div style="text-align:center;margin-top:14px">
      <a href="coreto-login.html" style="font-size:11px;color:var(--sub);text-decoration:none;
         transition:.15s" onmouseover="this.style.color='var(--blue)'" onmouseout="this.style.color='var(--sub)'">
        ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãŠå¿˜ã‚Œã§ã™ã‹ï¼Ÿ
      </a>
    </div>



    <div class="lf-demo">
      <span class="lf-demo-toggle" onclick="toggleDemo()">â–¼ ãƒ‡ãƒ¢ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§</span>
      <div class="lf-demo-panel" id="demo-panel">
        <div style="font-size:9px;color:var(--muted);margin-bottom:8px;letter-spacing:1px">ã‚¯ãƒªãƒƒã‚¯ã§è‡ªå‹•å…¥åŠ›ã€€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼šcoreto2026</div>
        <div class="demo-acc" onclick="fillDemo('00001','coreto2026')">
          <div><div class="da-name">HQ çµ±æ‹¬</div><div class="da-info">exec</div></div>
          <span class="da-type" style="background:rgba(201,168,76,.15);color:var(--gold)">exec</span>
        </div>
        <div class="demo-acc" onclick="fillDemo('00347','coreto2026')">
          <div><div class="da-name">HQ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</div><div class="da-info">manager</div></div>
          <span class="da-type" style="background:rgba(79,156,249,.12);color:var(--blue)">manager</span>
        </div>
        <div class="demo-acc" onclick="fillDemo('00891','coreto2026')">
          <div><div class="da-name">HQ ã‚¹ã‚¿ãƒƒãƒ•</div><div class="da-info">staff</div></div>
          <span class="da-type" style="background:rgba(52,211,153,.1);color:var(--green)">staff</span>
        </div>
        <div class="demo-acc" onclick="fillDemo('10012','coreto2026')">
          <div><div class="da-name">å±±ç”° èª ï¼ˆGoldï¼‰</div><div class="da-info">ID: 10012</div></div>
          <span class="da-type" style="background:rgba(79,156,249,.12);color:var(--blue)">RE AG</span>
        </div>
        <div class="demo-acc" onclick="fillDemo('10008','coreto2026')">
          <div><div class="da-name">ä½è—¤ èŠ±å­ï¼ˆPlatinumï¼‰</div><div class="da-info">ID: 10008</div></div>
          <span class="da-type" style="background:rgba(79,156,249,.12);color:var(--blue)">RE AG</span>
        </div>
        <div class="demo-acc" onclick="fillDemo('20005','coreto2026')">
          <div><div class="da-name">ç”°ä¸­ ç¾ç©‚ï¼ˆGoldï¼‰</div><div class="da-info">ID: 20005</div></div>
          <span class="da-type" style="background:rgba(52,211,153,.1);color:var(--green)">HR AG</span>
        </div>
        <div class="demo-acc" onclick="fillDemo('30007','coreto2026')">
          <div><div class="da-name">ä½è—¤ ç¾å’²</div><div class="da-info">ID: 30007</div></div>
          <span class="da-type" style="background:rgba(167,139,250,.12);color:var(--purple)">Partner</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     APP SHELL
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="app-shell" style="display:none;height:100vh;display:none;flex-direction:column">

  <!-- Topbar -->
  <div class="topbar">
    <div class="logo">CORETO</div>
    <div class="topbar-sep"></div>
    <div class="topbar-context" id="topbar-ctx">ç®¡ç†ãƒãƒ¼ã‚¿ãƒ«</div>
    <div class="topbar-user">
      <div class="notif-btn" title="é€šçŸ¥">ğŸ””<div class="notif-dot" id="notif-dot"></div></div>
      <div class="user-pill" id="user-pill">
        <div class="user-avatar" id="u-avatar">H</div>
        <div>
          <div class="user-name" id="u-name">ç®¡ç†è€…</div>
          <div class="user-role" id="u-role">HQ</div>
        </div>
      </div>
      <button class="logout-btn" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>
  </div>

  <div class="body-layout">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <!-- built by JS -->
      <div class="sidebar-footer">
        <div class="sf-id" id="sf-id">ID: â€”</div>
        <div style="font-size:9px;color:var(--muted);margin-top:3px">v2.0 Build 2026.02</div>
      </div>
    </div>

    <!-- Content -->
    <div class="content" id="content">
      <!-- Pages inserted here by JS -->
    </div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  USER DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  USER DATABASE (æœ¬ç•ªã§ã¯Kintone/APIã‹ã‚‰å–å¾—)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const USERS = {
  // â”€â”€ HQ â”€â”€
  // exec: 00001â€“00199ï¼ˆæ‰‹å‹•æŒ‡å®šï¼‰
  // manager/staff: 00200ä»¥é™ï¼ˆãƒ©ãƒ³ãƒ€ãƒ æ¡ç•ªï¼‰
  '00001': { name:'HQ çµ±æ‹¬',         type:'hq', hqRole:'exec',    pw:'coreto2026', icon:'ğŸ¢', color:'var(--gold)',   avatar:'çµ±' },
  '00347': { name:'HQ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼', type:'hq', hqRole:'manager', pw:'coreto2026', icon:'ğŸ¢', color:'var(--blue)',   avatar:'ãƒ' },
  '00891': { name:'HQ ã‚¹ã‚¿ãƒƒãƒ•',     type:'hq', hqRole:'staff',   pw:'coreto2026', icon:'ğŸ¢', color:'var(--green)', avatar:'ã‚¹' },
  // â”€â”€ RE Agent (10001â€“19999) â”€â”€
  '10008': { name:'ä½è—¤ èŠ±å­', type:'re', rank:'Platinum', rankKey:'platinum', pw:'coreto2026', icon:'ğŸ ', color:'var(--purple)', avatar:'ä½' },
  '10012': { name:'å±±ç”° èª ',   type:'re', rank:'Gold',     rankKey:'gold',     pw:'coreto2026', icon:'ğŸ ', color:'var(--blue)',   avatar:'å±±' },
  '10023': { name:'éˆ´æœ¨ å¥å¤ª', type:'re', rank:'Silver',   rankKey:'silver',   pw:'coreto2026', icon:'ğŸ ', color:'var(--green)', avatar:'éˆ´' },
  '10041': { name:'æ¸¡è¾º éš†',   type:'re', rank:'Bronze',   rankKey:'bronze',   pw:'coreto2026', icon:'ğŸ ', color:'var(--orange)',avatar:'æ¸¡' },
  // â”€â”€ HR Agent (20001â€“29999) â”€â”€
  '20005': { name:'ç”°ä¸­ ç¾ç©‚', type:'hr', rank:'Gold',     rankKey:'gold',     pw:'coreto2026', icon:'ğŸ‘¥', color:'var(--green)', avatar:'ç”°' },
  // â”€â”€ Partner (30001â€“39999) â”€â”€
  '30007': { name:'ä½è—¤ ç¾å’²', type:'pt', rank:'Partner',  rankKey:'pt',       pw:'coreto2026', icon:'ğŸ¤', color:'var(--purple)',avatar:'ä½' },
};

// IDç¯„å›²ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—ã‚’è‡ªå‹•åˆ¤åˆ¥
function detectTypeFromId(id) {
  const n = parseInt(id);
  if (n >= 1    && n <= 9999)  return 'hq';
  if (n >= 10001 && n <= 19999) return 're';
  if (n >= 20001 && n <= 29999) return 'hr';
  if (n >= 30001 && n <= 39999) return 'pt';
  return null;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TOOLS REGISTRY  (url = null means embedded page)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TOOLS = [
  // HQ Tools
  { id:'screening',  icon:'ğŸ“‹', name:'æ›¸é¡å¯©æŸ»',         desc:'å…¥ä¼šå¯©æŸ»ãƒã‚§ãƒƒã‚¯ã‚·ãƒ¼ãƒˆã€‚åˆå¦åˆ¤å®šãƒ»Calendlyé€£æº',      url:'coreto-screening.html',         color:'#4f9cf9', roles:['hq'],      minHqRole:'staff', section:'å¯©æŸ»ãƒ»ç®¡ç†' },
  { id:'rbac',       icon:'ğŸ›¡',  name:'æ¨©é™ç®¡ç†ï¼ˆRBACï¼‰', desc:'ãƒ­ãƒ¼ãƒ«åˆ¥ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã€‚ã‚¹ã‚¿ãƒƒãƒ•æ¨©é™ã®è¨­å®šãƒ»ç¢ºèª',      url:'coreto-admin-rbac.html',        color:'#c9a84c', roles:['hq'],      minHqRole:'manager', section:'å¯©æŸ»ãƒ»ç®¡ç†' },
  { id:'matching',   icon:'ğŸ¯', name:'ãƒãƒƒãƒãƒ³ã‚°',        desc:'æ¡ˆä»¶ã¨æ‹…å½“ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æœ€é©ãƒãƒƒãƒãƒ³ã‚°',             url:'coreto-matching.html',          color:'#34d399', roles:['hq'],      minHqRole:'staff', section:'å¯©æŸ»ãƒ»ç®¡ç†' },
  { id:'codes',      icon:'ğŸ”–', name:'ç´¹ä»‹ã‚³ãƒ¼ãƒ‰ç®¡ç†',    desc:'ç‰¹åˆ¥ã‚³ãƒ¼ãƒ‰ã®ä½œæˆãƒ»æœ‰åŠ¹æœŸé™ãƒ»ä½¿ç”¨çŠ¶æ³ç®¡ç†',           url:'coreto-codes.html',             color:'#fb923c', roles:['hq'],      minHqRole:'manager', section:'å ±é…¬ãƒ»æ”¯æ‰•ã„' },
  { id:'payment',    icon:'ğŸ’´', name:'æ”¯æ‰•æ˜ç´°ãƒ»ãƒãƒƒãƒ',  desc:'æœˆæ¬¡æŒ¯è¾¼ãƒãƒƒãƒãƒ»å ±é…¬è¨ˆç®—ãƒ»æ”¯æ‰•æ˜ç´°PDF',             url:'coreto-payment.html',           color:'#c9a84c', roles:['hq'],      minHqRole:'manager', section:'å ±é…¬ãƒ»æ”¯æ‰•ã„' },
  { id:'early-quit', icon:'âš ï¸', name:'æ—©æœŸé€€è·ã‚¢ãƒ©ãƒ¼ãƒˆ', desc:'HRæ¡ˆä»¶ã®åœ¨ç±ç¢ºèªãƒ»è¿”é‡‘æ¡ä»¶ç®¡ç†ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆç™ºä»¤',       url:'coreto-early-quit.html',        color:'#f87171', roles:['hq','hr'], minHqRole:'manager', section:'å ±é…¬ãƒ»æ”¯æ‰•ã„' },
  { id:'partner-mgmt',icon:'ğŸ¤',name:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç®¡ç†',    desc:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒãƒ¼ã‚¿ãƒ«ãƒ»ç´¹ä»‹æ¡ˆä»¶ãƒ»å ±é…¬è¿½è·¡',             url:'coreto-partner.html',           color:'#a78bfa', roles:['hq'],      minHqRole:'manager', section:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼' },
  { id:'overview',   icon:'ğŸ“Š', name:'ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦',      desc:'CORETOå…¨ä½“ãƒ•ãƒ­ãƒ¼ãƒ»è‡ªå‹•åŒ–ãƒãƒƒãƒ—ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£',     url:'coreto-system-overview.html',   color:'#2dd4bf', roles:['hq'],      minHqRole:'staff', section:'ã‚·ã‚¹ãƒ†ãƒ ' },
  { id:'client-id',  icon:'ğŸ†”', name:'é¡§å®¢IDã‚·ã‚¹ãƒ†ãƒ ',   desc:'é¡§å®¢CL-XXXXXç•ªå·ã®ç™ºè¡Œãƒ»ãƒãƒ¼ãƒãƒ£ãƒ«å£åº§ç®¡ç†',        url:'coreto-client-id.html',         color:'#4f9cf9', roles:['hq'],      minHqRole:'staff', section:'ã‚·ã‚¹ãƒ†ãƒ ' },
  // Shared HQ+Agent
  { id:'it-setsu',   icon:'ğŸ“', name:'ITé‡èª¬ãƒ»æ›¸é¡ç®¡ç†', desc:'ITé‡èª¬ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆãƒ»å¥‘ç´„æ›¸ã‚¹ã‚­ãƒ£ãƒ³ãƒ»è¿½è·¡ç•ªå·',     url:'coreto-it-setsu.html',          color:'#34d399', roles:['hq','re'], minHqRole:'staff', section:'æ¡ˆä»¶æ¥­å‹™' },
  { id:'naiken',     icon:'ğŸ ', name:'ç‰©ä»¶å†…è¦‹ç®¡ç†',      desc:'å†…è¦‹ç”³è¾¼ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¿½è·¡',             url:'coreto-naiken.html',            color:'#4f9cf9', roles:['hq','re'], minHqRole:'staff', section:'æ¡ˆä»¶æ¥­å‹™' },
  { id:'batch-close',icon:'âœ…', name:'æˆç´„ãƒ»æœˆæ¬¡ãƒãƒƒãƒ', desc:'æ¡ˆä»¶ã‚¯ãƒ­ãƒ¼ã‚ºå ±å‘Šãƒ»æœˆæ¬¡ãƒãƒƒãƒãƒ»æˆç´„ã‚µãƒãƒªãƒ¼',         url:'coreto-batch-close.html',       color:'#34d399', roles:['hq','re'], minHqRole:'staff', section:'æ¡ˆä»¶æ¥­å‹™' },
  { id:'label',      icon:'ğŸ“®', name:'ãƒ©ãƒ™ãƒ«ãƒ»ãƒ¬ã‚¿ãƒ¼ãƒ‘ãƒƒã‚¯',desc:'ã‚µãƒ¼ãƒãƒ«ãƒ©ãƒ™ãƒ«å°åˆ·ãƒ»ãƒ¬ã‚¿ãƒ¼ãƒ‘ãƒƒã‚¯å®›åç®¡ç†',          url:'coreto-thermal-label.html',     color:'#fb923c', roles:['hq','re'], minHqRole:'staff', section:'æ¡ˆä»¶æ¥­å‹™' },
  { id:'barcode',    icon:'ğŸ“¡', name:'ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³', desc:'Honeywellé€£æºã‚¹ã‚­ãƒ£ãƒ³ãƒ‡ã‚¹ã‚¯ãƒ»è¿½è·¡ç•ªå·ç®¡ç†',        url:'coreto-barcode-scan.html',      color:'#2dd4bf', roles:['hq','re'], minHqRole:'staff', section:'æ¡ˆä»¶æ¥­å‹™' },
  // Agent tools
  { id:'mypage',     icon:'ğŸ‘¤', name:'ãƒã‚¤ãƒšãƒ¼ã‚¸',        desc:'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ»æ¡ˆä»¶ä¸€è¦§ãƒ»LINEé€£æºãƒ»è¨­å®š',             url:'coreto-agent-mypage.html',      color:'#4f9cf9', roles:['re','hr'], minHqRole:'staff', section:'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ' },
  { id:'rank',       icon:'â­', name:'ãƒ©ãƒ³ã‚¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰',desc:'ãƒã‚¤ãƒ³ãƒˆãƒ»ãƒ©ãƒ³ã‚¯ãƒ»ãƒ¡ãƒ³ã‚¿ãƒ¼æ´»å‹•ãƒ»å ±é…¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼',url:'coreto-rank.html',              color:'#c9a84c', roles:['re','hr'], minHqRole:'staff', section:'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ' },
  { id:'simulator',  icon:'ğŸ§®', name:'å ±é…¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼', desc:'å ±é…¬è¨ˆç®—ãƒ»ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–è©¦ç®—ãƒ»ãƒ©ãƒ³ã‚¯æ¯”è¼ƒ',           url:'coreto-commission-simulator.html',color:'#a78bfa',roles:['re','hr'],minHqRole:'staff', section:'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ' },
  // HR specific
  { id:'early-quit-ag',icon:'âš ï¸',name:'æ—©æœŸé€€è·ã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆAGï¼‰',desc:'HRæ¡ˆä»¶ã®è¿”é‡‘æ¡ä»¶ç™»éŒ²ãƒ»é€€è·å ±å‘Š',            url:'coreto-early-quit.html',        color:'#f87171', roles:['hr'],      minHqRole:'staff', section:'HRæ¥­å‹™' },
  // Partner
  { id:'pt-portal',  icon:'ğŸŒ', name:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒãƒ¼ã‚¿ãƒ«', desc:'ç´¹ä»‹æ¡ˆä»¶ãƒ»ã‚³ãƒ¼ãƒ‰ãƒ»å ±é…¬ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸',                url:'coreto-partner.html',           color:'#a78bfa', roles:['pt'],      minHqRole:'staff', section:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ©Ÿèƒ½' },
  { id:'pt-login',   icon:'ğŸ”—', name:'ç´¹ä»‹ãƒªãƒ³ã‚¯å…±æœ‰',    desc:'ç´¹ä»‹ã‚³ãƒ¼ãƒ‰ãƒ»QRãƒ»Slackå…±æœ‰',                        url:'coreto-partner.html',           color:'#4f9cf9', roles:['pt'],      minHqRole:'staff', section:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ©Ÿèƒ½' },
  // Security & Compliance
  { id:'kyc',         icon:'ğŸªª', name:'eKYCãƒ»å£åº§ç®¡ç†',    desc:'æœ¬äººç¢ºèªãƒ»åç¾©ç…§åˆãƒ»å£åº§å¤‰æ›´æ‰¿èªãƒ•ãƒ­ãƒ¼',             url:'coreto-kyc.html',               color:'#34d399', roles:['hq','re','hr','pt'], minHqRole:'staff', section:'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£' },
  { id:'instant-pay', icon:'âš¡', name:'å³æ™‚æ‰•ã„ï¼ˆ2FAï¼‰',   desc:'2æ®µéšèªè¨¼ä»˜ãå³æ™‚æŒ¯è¾¼ç”³è«‹ãƒ»èªè¨¼ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ç¢ºèªãƒ»ãƒ­ãƒƒã‚¯ç®¡ç†',    url:'coreto-instant-pay.html',       color:'#c9a84c', roles:['hq','re','hr','pt'], minHqRole:'staff', section:'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£' },
  { id:'receipt',      icon:'ğŸ§¾', name:'é ˜åæ›¸ãƒ»è«‹æ±‚æ›¸',      desc:'å ±é…¬é ˜åæ›¸ãƒ»è«‹æ±‚æ›¸ãƒ»æºæ³‰å¾´åç¥¨ã®DLãƒ»ç™ºè¡Œ',           url:'coreto-receipt.html',           color:'#34d399', roles:['hq','re','hr','pt'], minHqRole:'staff', section:'çµŒç†' },
  { id:'contract',      icon:'ğŸ“œ', name:'æ¥­å‹™å§”è¨—å¥‘ç´„æ›¸',       desc:'é›»å­ç½²åãƒ»å¥‘ç´„æ›¸ç¢ºèªãƒ»ç½²åå±¥æ­´',                     url:'coreto-contract.html',          color:'#a78bfa', roles:['hq','re','hr','pt'], minHqRole:'staff', section:'å…¥ä¼š' },
  { id:'onboarding',    icon:'ğŸ“', name:'ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°',      desc:'ç ”ä¿®ãƒã‚§ãƒƒã‚¯ãƒ»é€²æ—ç®¡ç†ãƒ»HQä¸€è¦§',                    url:'coreto-onboarding.html',        color:'#4f9cf9', roles:['hq','re','hr'],      minHqRole:'staff', section:'å…¥ä¼š' },
  { id:'faq',           icon:'â“',  name:'FAQãƒŠãƒ¬ãƒƒã‚¸',          desc:'ã‚ˆãã‚ã‚‹è³ªå•ãƒ»ç¤¾å†…è¦ç¨‹æ¤œç´¢ãƒ»Slackè»¢é€',              url:'coreto-faq.html',               color:'#fb923c', roles:['hq','re','hr','pt'], minHqRole:'staff', section:'ã‚µãƒãƒ¼ãƒˆ' },
  { id:'pipeline',      icon:'ğŸ”€', name:'æ¡ˆä»¶ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³',      desc:'æ¡ˆä»¶ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒœãƒ¼ãƒ‰ãƒ»ã‚«ãƒ³ãƒãƒ³ç®¡ç†ãƒ»ãƒ¡ãƒ¢',           url:'coreto-pipeline.html',          color:'#4f9cf9', roles:['hq','re','hr'],      minHqRole:'staff', section:'æ¡ˆä»¶ç®¡ç†' },
  { id:'payroll',       icon:'ğŸ’°', name:'æœˆæ¬¡å ±é…¬ç¢ºå®š',          desc:'å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå ±é…¬ç¢ºå®šãƒ»å…¨éŠ€ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›ãƒ»ä¸€æ‹¬é€ä¿¡',    url:'coreto-payroll.html',           color:'#c9a84c', roles:['hq'],                 minHqRole:'manager', section:'çµŒç†' },
  { id:'partner-feed',  icon:'ğŸ”—', name:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç´¹ä»‹ãƒ•ã‚£ãƒ¼ãƒ‰', desc:'ç´¹ä»‹æ¡ˆä»¶ã®é€²æ—ãƒ»å ±é…¬ç¢ºèªï¼ˆãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‘ã‘ï¼‰',         url:'coreto-partner-feed.html',      color:'#34d399', roles:['pt','hq'],            minHqRole:'staff', section:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼' },
  { id:'exec-dashboard', icon:'ğŸ“ˆ', name:'åç›Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', desc:'æœˆæ¬¡P&Lãƒ»KPIãƒ»å…¨ä½“åç›Šã‚°ãƒ©ãƒ•ï¼ˆçµŒå–¶é™£å°‚ç”¨ï¼‰', url:'coreto-exec-dashboard.html', color:'#c9a840', roles:['hq'], minHqRole:'exec', section:'çµŒå–¶é™£å°‚ç”¨' },
  { id:'agent-mgmt',     icon:'ğŸ‘¥', name:'å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†',  desc:'å…¨å“¡ã®ãƒ©ãƒ³ã‚¯ãƒ»å£²ä¸Šãƒ»çŠ¶æ…‹ç®¡ç†ãƒ»ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ“ä½œï¼ˆçµŒå–¶é™£å°‚ç”¨ï¼‰', url:'coreto-agent-mgmt.html', color:'#c9a840', roles:['hq'], minHqRole:'exec', section:'çµŒå–¶é™£å°‚ç”¨' },
  { id:'network-tree',   icon:'ğŸŒ', name:'ç´¹ä»‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å›³',         desc:'ç´¹ä»‹ã®é€£é–ãƒ»å‚˜ä¸‹å£²ä¸Šãƒ»ãƒ¡ãƒ³ãƒãƒ¼æ§‹é€ åˆ†æï¼ˆçµŒå–¶é™£å°‚ç”¨ï¼‰',      url:'coreto-network-tree.html', color:'#c9a840', roles:['exec'],               minHqRole:'exec', section:'çµŒå–¶é™£å°‚ç”¨' },
  { id:'apply',          icon:'ğŸ“‹', name:'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ»ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å¿œå‹Ÿ', desc:'ä¸€èˆ¬å…¬é–‹ã®å¿œå‹Ÿãƒ•ã‚©ãƒ¼ãƒ ï¼ˆæ›¸é¡å¯©æŸ»å‰ã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ï¼‰', url:'coreto-apply.html',         color:'#8b6914', roles:['hq'],                 minHqRole:'staff', section:'å…¥ä¼š' },
  { id:'screening',      icon:'ğŸ”', name:'æ›¸é¡å¯©æŸ»ãƒã‚§ãƒƒã‚¯ã‚·ãƒ¼ãƒˆ',   desc:'å¿œå‹Ÿè€…ã®æ›¸é¡å¯©æŸ»ãƒ»é¢æ¥æ—¥ç¨‹é€ä»˜ï¼ˆHQå°‚ç”¨ï¼‰',             url:'coreto-screening.html',     color:'#6b6760', roles:['hq'],                 minHqRole:'staff', section:'å…¥ä¼š' },
  { id:'pt-signup',     icon:'ğŸ†•', name:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å…¥ä¼šç”³è¾¼',    desc:'é¢æ¥é€šéå¾Œã®æ‹›å¾…åˆ¶ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼‰',         url:'coreto-partner-signup.html',    color:'#fb923c', roles:['hq'],                 minHqRole:'staff', section:'å…¥ä¼š' },
  { id:'id-manager',  icon:'ğŸ²', name:'IDæ¡ç•ªç®¡ç†',        desc:'ãƒ©ãƒ³ãƒ€ãƒ ä¼šå“¡IDãƒ»æ¡ˆä»¶IDç™ºè¡Œãƒ»è¡çªæ¤œçŸ¥ãƒ»ç™ºè¡Œå±¥æ­´',    url:'coreto-id-manager.html',        color:'#2dd4bf', roles:['hq'],      minHqRole:'manager', section:'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£' },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SESSION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let session = null;

// â”€â”€ Login helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function clearLoginError() {
  document.getElementById('lf-error').style.display = 'none';
  document.getElementById('lf-id').classList.remove('error');
  document.getElementById('lf-pw').classList.remove('error');
}

function showLoginError(msg) {
  const el = document.getElementById('lf-error');
  el.textContent = msg;
  el.style.display = 'block';
  document.getElementById('lf-id').classList.add('error');
  document.getElementById('lf-pw').classList.add('error');
  document.getElementById('lf-loading').style.display = 'none';
  document.getElementById('lf-submit').disabled = false;
}

function toggleDemo() {
  const p = document.getElementById('demo-panel');
  p.style.display = p.style.display === 'block' ? 'none' : 'block';
}

function fillDemo(id, pw) {
  document.getElementById('lf-id').value = id;
  document.getElementById('lf-pw').value = pw;
  clearLoginError();
  document.getElementById('lf-pw').focus();
}

function doLogin() {
  const inputId = document.getElementById('lf-id').value.trim();
  const inputPw = document.getElementById('lf-pw').value;

  // Basic validation
  if (!inputId) { showLoginError('CORETO IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  if (!inputPw) { showLoginError('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }

  // Show loading
  document.getElementById('lf-submit').disabled = true;
  document.getElementById('lf-loading').style.display = 'flex';

  // Simulate async auth (æœ¬ç•ªã§ã¯APIå‘¼ã³å‡ºã—)
  setTimeout(() => {
    const user = USERS[inputId];

    // ID not found
    if (!user) {
      // Detect type from ID range for better error message
      const detectedType = detectTypeFromId(inputId);
      if (!detectedType) {
        showLoginError('IDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚COREBOã‚·ã‚¹ãƒ†ãƒ ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
      } else {
        const typeNames = { hq:'HQ', re:'ä¸å‹•ç”£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ', hr:'äººæç´¹ä»‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ', pt:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼' };
        showLoginError(`IDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼ˆ${typeNames[detectedType]}ã®ç¯„å›²ã§æ¤œç´¢ï¼‰ã€‚
IDã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã”ç¢ºèªãã ã•ã„ã€‚`);
      }
      return;
    }

    // Password check
    if (user.pw !== inputPw) {
      document.getElementById('lf-loading-msg').textContent = 'èªè¨¼å¤±æ•—';
      setTimeout(() => showLoginError('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚'), 400);
      return;
    }

    // Success â€” detect type
    const detectedType = user.type;
    const typeLabels = { hq:'HQ', re:'ä¸å‹•ç”£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ', hr:'äººæç´¹ä»‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ', pt:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼' };
    document.getElementById('lf-loading-msg').textContent = `${typeLabels[detectedType]}ã¨ã—ã¦èªè¨¼å®Œäº†`;

    setTimeout(() => {
      session = { userId: inputId, ...user };
      document.getElementById('login-screen').style.display = 'none';
      const shell = document.getElementById('app-shell');
      shell.style.display = 'flex';
      initShell();
      // Clear inputs for security
      document.getElementById('lf-id').value = '';
      document.getElementById('lf-pw').value = '';
      document.getElementById('lf-submit').disabled = false;
      document.getElementById('lf-loading').style.display = 'none';
    }, 700);
  }, 800);
}

function logout() {
  session = null;
  document.getElementById('app-shell').style.display = 'none';
  document.getElementById('login-screen').style.display = 'flex';
  document.getElementById('lf-id').value = '';
  document.getElementById('lf-pw').value = '';
  clearLoginError();
  document.getElementById('demo-panel').style.display = 'none';
}


// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RANDOM ID GENERATION ENGINE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const IssuedMemberIds = new Set(Object.keys(USERS).map(k=>parseInt(k)).filter(n=>!isNaN(n)));
const IssuedCaseIds   = new Set(['X7K3M1','P9W4R2','A3R7Z6','K9T2M5']);
const ID_RANGES = { hq_exec:[1,199], hq_staff:[200,9999], hq:[1,9999], re:[10001,19999], hr:[20001,29999], pt:[30001,39999] };
// CASE_CHARS: see generateCaseId() above

function generateMemberId(type) {
  // hq_exec: 00001â€“00199ï¼ˆæ‰‹å‹•æŒ‡å®šã®ãŸã‚æ¡ç•ªã—ãªã„ï¼‰
  // hq_staff/manager: 00200ä»¥é™ãƒ©ãƒ³ãƒ€ãƒ 
  const rangeKey = (type === 'hq_exec') ? 'hq_exec' : (type === 'hq' || type === 'hq_staff') ? 'hq_staff' : type;
  const [min, max] = ID_RANGES[rangeKey] || ID_RANGES[type] || [1,9999];
  let id, attempts = 0;
  do {
    id = Math.floor(Math.random() * (max - min + 1) + min);
    attempts++;
    if (attempts > 500) throw new Error('IDç©ºé–“ãŒæ¯æ¸‡ã—ã¦ã„ã¾ã™');
  } while (IssuedMemberIds.has(id));
  IssuedMemberIds.add(id);
  return id.toString().padStart(5, '0');
}

// æ¡ˆä»¶IDæ¡ç•ªï¼ˆæ®µéšçš„ï¼‰
// typePrefix: 'R'=è³ƒè²¸ä»²ä»‹ / 'S'=å£²è²· / 'H'=äººæç´¹ä»‹
// æ®µéš1: prefix + æ•°å­—6æ¡ (000000-999999, 100ä¸‡é€šã‚Š)
// æ®µéš2: prefix + è‹±æ•°å­—6æ¡ (æ¯æ¸‡å¾Œ, ç´„10å„„é€šã‚Šè¿½åŠ )
const _caseNums  = new Map([['R',new Set()],['S',new Set()],['H',new Set()]]);
const _caseAlpha = new Map([['R',new Set()],['S',new Set()],['H',new Set()]]);
const _CASE_CHARS = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';

function generateCaseId(typePrefix) {
  const prefix = typePrefix || 'R'; // default è³ƒè²¸
  const year   = new Date().getFullYear();
  const nums   = _caseNums.get(prefix) || new Set();
  let suffix, attempts = 0;

  // æ®µéš1: æ•°å­—ã®ã¿
  if (nums.size < 1000000) {
    do {
      suffix = String(Math.floor(Math.random()*1000000)).padStart(6,'0');
      attempts++;
    } while (nums.has(suffix) && attempts < 2000);
    if (!nums.has(suffix)) {
      nums.add(suffix);
      _caseNums.set(prefix, nums);
      return `${prefix}${suffix}`;
    }
  }
  // æ®µéš2: è‹±æ•°å­—
  const alphas = _caseAlpha.get(prefix) || new Set();
  do {
    suffix = Array.from({length:6},()=>_CASE_CHARS[Math.floor(Math.random()*_CASE_CHARS.length)]).join('');
    attempts++;
    if (attempts > 5000) throw new Error('æ¡ˆä»¶IDç©ºé–“ãŒæ¯æ¸‡ã—ã¦ã„ã¾ã™');
  } while (alphas.has(suffix));
  alphas.add(suffix);
  _caseAlpha.set(prefix, alphas);
  return `${prefix}${suffix}`;
}

function detectTypeFromId(id) {
  const n = parseInt(id);
  if (n >= 1     && n <= 9999)  return 'hq';
  if (n >= 10001 && n <= 19999) return 're';
  if (n >= 20001 && n <= 29999) return 'hr';
  if (n >= 30001 && n <= 39999) return 'pt';
  return null;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SHELL INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initShell() {
  const u = session;
  // Topbar
  const avatarEl = document.getElementById('u-avatar');
  avatarEl.textContent = u.avatar || u.name[0];
  avatarEl.style.background = u.color + '22';
  avatarEl.style.color = u.color;
  document.getElementById('u-name').textContent = u.name;
  document.getElementById('u-role').textContent =
    u.type==='hq' ? 'HQ ' + (u.hqRole||'') : u.type==='re' ? 'ä¸å‹•ç”£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ' : u.type==='hr' ? 'äººæç´¹ä»‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ' : 'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼';
  document.getElementById('sf-id').textContent = 'ID: ' + u.userId;

  const ctxMap = { hq:'ç®¡ç†ãƒãƒ¼ã‚¿ãƒ«', re:'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒ¼ã‚¿ãƒ«', hr:'HRã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒ¼ã‚¿ãƒ«', pt:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒãƒ¼ã‚¿ãƒ«' };
  document.getElementById('topbar-ctx').textContent = ctxMap[u.type] || 'ãƒãƒ¼ã‚¿ãƒ«';

  buildSidebar();
  buildContent();
  showPage('dashboard');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SIDEBAR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Role hierarchy: exec > manager > staff
const HQ_ROLE_LEVEL = { exec:3, manager:2, staff:1 };
function hqRoleLevel() { return HQ_ROLE_LEVEL[session.hqRole] || 1; }
function canSeeHqRole(minRole) { return hqRoleLevel() >= (HQ_ROLE_LEVEL[minRole] || 1); }

const SIDEBAR_NAV_HQ_EXEC = [
  { section:'çµŒå–¶é™£å°‚ç”¨', items:[
    { id:'exec-dashboard', icon:'ğŸ“ˆ', label:'åç›Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', url:'coreto-exec-dashboard.html' },
    { id:'agent-mgmt',     icon:'ğŸ‘¥', label:'å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†',  url:'coreto-agent-mgmt.html' },
    { id:'network-tree',   icon:'ğŸŒ', label:'ç´¹ä»‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å›³',  url:'coreto-network-tree.html' },
  ]},
];
const SIDEBAR_NAV_HQ_COMMON_MANAGER = [
  { section:'å ±é…¬ãƒ»æ”¯æ‰•ã„', items:[
    { id:'payment',     icon:'ğŸ’´', label:'æ”¯æ‰•æ˜ç´°ãƒ»ãƒãƒƒãƒ', url:'coreto-payment.html' },
    { id:'payroll',     icon:'ğŸ’°', label:'æœˆæ¬¡å ±é…¬ç¢ºå®š',      url:'coreto-payroll.html' },
    { id:'codes',       icon:'ğŸ”–', label:'ç´¹ä»‹ã‚³ãƒ¼ãƒ‰',        url:'coreto-codes.html' },
    { id:'early-quit',  icon:'âš ï¸', label:'æ—©æœŸé€€è·',          url:'coreto-early-quit.html', badge:'3' },
  ]},
  { section:'ç®¡ç†', items:[
    { id:'rbac',        icon:'ğŸ›¡',  label:'æ¨©é™ç®¡ç†ï¼ˆRBACï¼‰', url:'coreto-admin-rbac.html' },
    { id:'partner-mgmt',icon:'ğŸ¤', label:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ç®¡ç†',   url:'coreto-partner.html' },
    { id:'id-manager',  icon:'ğŸ²', label:'IDæ¡ç•ªç®¡ç†',        url:'coreto-id-manager.html' },
  ]},
];
const SIDEBAR_NAV_HQ_COMMON_STAFF = [
  { section:'ãƒ¡ã‚¤ãƒ³', items:[
    { id:'dashboard', icon:'ğŸ“Š', label:'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰' },
    { id:'tools',     icon:'ğŸ§°', label:'å…¨ãƒ„ãƒ¼ãƒ«ä¸€è¦§' },
  ]},
  { section:'å¯©æŸ»ãƒ»ç®¡ç†', items:[
    { id:'screening',  icon:'ğŸ“‹', label:'æ›¸é¡å¯©æŸ»',      url:'coreto-screening.html' },
    { id:'matching',   icon:'ğŸ¯', label:'ãƒãƒƒãƒãƒ³ã‚°',    url:'coreto-matching.html' },
  ]},
  { section:'æ¡ˆä»¶æ¥­å‹™', items:[
    { id:'naiken',      icon:'ğŸ ', label:'ç‰©ä»¶å†…è¦‹',         url:'coreto-naiken.html' },
    { id:'it-setsu',    icon:'ğŸ“', label:'ITé‡èª¬ãƒ»æ›¸é¡',     url:'coreto-it-setsu.html' },
    { id:'batch-close', icon:'âœ…', label:'æˆç´„ãƒ»ãƒãƒƒãƒ',     url:'coreto-batch-close.html' },
    { id:'label',       icon:'ğŸ“®', label:'ãƒ©ãƒ™ãƒ«å°åˆ·',       url:'coreto-thermal-label.html' },
    { id:'barcode',     icon:'ğŸ“¡', label:'ã‚¹ã‚­ãƒ£ãƒ³',         url:'coreto-barcode-scan.html' },
  ]},
  { section:'ã‚·ã‚¹ãƒ†ãƒ ', items:[
    { id:'client-id',   icon:'ğŸ†”', label:'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID',   url:'coreto-client-id.html' },
    { id:'simulator',   icon:'ğŸ§®', label:'å ±é…¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼',url:'coreto-commission-simulator.html' },
    { id:'overview',    icon:'ğŸ“Š', label:'ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦',      url:'coreto-system-overview.html' },
  ]},
  { section:'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£', items:[
    { id:'line-link',        icon:'ğŸ’¬', label:'LINEé€£æº',            url:'coreto-line-link.html' },
    { id:'account-settings', icon:'âš™ï¸',  label:'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š',    url:'coreto-account-settings.html' },
    { id:'kyc',         icon:'ğŸªª', label:'eKYCãƒ»å£åº§ç®¡ç†',    url:'coreto-kyc.html' },
    { id:'instant-pay', icon:'âš¡', label:'å³æ™‚æ‰•ã„å¯©æŸ»',      url:'coreto-instant-pay.html', badge:'3' },
    { id:'receipt',     icon:'ğŸ§¾', label:'é ˜åæ›¸ãƒ»è«‹æ±‚æ›¸ç®¡ç†', url:'coreto-receipt.html' },
  ]},
];

function getHQNav() {
  const role = session.hqRole || 'staff';
  let sections = [...SIDEBAR_NAV_HQ_COMMON_STAFF];
  if (role === 'manager' || role === 'exec') {
    sections = [...SIDEBAR_NAV_HQ_COMMON_STAFF, ...SIDEBAR_NAV_HQ_COMMON_MANAGER];
  }
  if (role === 'exec') {
    sections = [...SIDEBAR_NAV_HQ_EXEC, ...sections];
  }
  return sections;
}

const SIDEBAR_NAV = {
  hq: null, // computed via getHQNav()
  re: [
    { section:'ãƒ¡ã‚¤ãƒ³', items:[
      { id:'dashboard', icon:'ğŸ“Š', label:'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰' },
      { id:'tools',     icon:'ğŸ§°', label:'ãƒ„ãƒ¼ãƒ«ä¸€è¦§' },
    ]},
    { section:'æ¡ˆä»¶æ¥­å‹™', items:[
      { id:'naiken',      icon:'ğŸ ', label:'ç‰©ä»¶å†…è¦‹ç”³è¾¼',    url:'coreto-naiken.html' },
      { id:'it-setsu',    icon:'ğŸ“', label:'ITé‡èª¬ãƒ»æ›¸é¡',   url:'coreto-it-setsu.html' },
      { id:'batch-close', icon:'âœ…', label:'æˆç´„ãƒ»ã‚¯ãƒ­ãƒ¼ã‚º', url:'coreto-batch-close.html' },
      { id:'label',       icon:'ğŸ“®', label:'ãƒ©ãƒ™ãƒ«ãƒ»éƒµé€',   url:'coreto-thermal-label.html' },
      { id:'barcode',     icon:'ğŸ“¡', label:'ã‚¹ã‚­ãƒ£ãƒ³',       url:'coreto-barcode-scan.html' },
    ]},
    { section:'è‡ªåˆ†ã®æƒ…å ±', items:[
      { id:'mypage',    icon:'ğŸ‘¤', label:'ãƒã‚¤ãƒšãƒ¼ã‚¸',         url:'coreto-agent-mypage.html' },
      { id:'rank',      icon:'â­', label:'ãƒ©ãƒ³ã‚¯ãƒ»ãƒã‚¤ãƒ³ãƒˆ',   url:'coreto-rank.html' },
      { id:'simulator', icon:'ğŸ§®', label:'å ±é…¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼', url:'coreto-commission-simulator.html' },
    ]},
    { section:'ã‚µãƒãƒ¼ãƒˆ', items:[
      { id:'faq',          icon:'â“',  label:'FAQãƒŠãƒ¬ãƒƒã‚¸',        url:'coreto-faq.html' },
      { id:'receipt',      icon:'ğŸ§¾', label:'é ˜åæ›¸ãƒ»è«‹æ±‚æ›¸',     url:'coreto-receipt.html' },
    ]},
    { section:'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£', items:[
      { id:'line-link',        icon:'ğŸ’¬', label:'LINEé€£æº',            url:'coreto-line-link.html' },
      { id:'account-settings', icon:'âš™ï¸',  label:'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š',    url:'coreto-account-settings.html' },
      { id:'kyc',         icon:'ğŸªª', label:'eKYCãƒ»æœ¬äººç¢ºèª',   url:'coreto-kyc.html' },
      { id:'instant-pay', icon:'âš¡', label:'å³æ™‚æ‰•ã„ç”³è«‹',     url:'coreto-instant-pay.html' },
    ]},
  ],
  hr: [
    { section:'ãƒ¡ã‚¤ãƒ³', items:[
      { id:'dashboard', icon:'ğŸ“Š', label:'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰' },
      { id:'tools',     icon:'ğŸ§°', label:'ãƒ„ãƒ¼ãƒ«ä¸€è¦§' },
    ]},
    { section:'HRæ¥­å‹™', items:[
      { id:'early-quit-ag',icon:'âš ï¸',label:'æ—©æœŸé€€è·ã‚¢ãƒ©ãƒ¼ãƒˆ',url:'coreto-early-quit.html', badge:'1' },
    ]},
    { section:'è‡ªåˆ†ã®æƒ…å ±', items:[
      { id:'mypage',    icon:'ğŸ‘¤', label:'ãƒã‚¤ãƒšãƒ¼ã‚¸',         url:'coreto-agent-mypage.html' },
      { id:'rank',      icon:'â­', label:'ãƒ©ãƒ³ã‚¯ãƒ»ãƒã‚¤ãƒ³ãƒˆ',   url:'coreto-rank.html' },
      { id:'simulator', icon:'ğŸ§®', label:'å ±é…¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼', url:'coreto-commission-simulator.html' },
    ]},
    { section:'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£', items:[
      { id:'line-link',        icon:'ğŸ’¬', label:'LINEé€£æº',            url:'coreto-line-link.html' },
      { id:'account-settings', icon:'âš™ï¸',  label:'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š',    url:'coreto-account-settings.html' },
      { id:'kyc',         icon:'ğŸªª', label:'eKYCãƒ»æœ¬äººç¢ºèª',   url:'coreto-kyc.html' },
      { id:'instant-pay', icon:'âš¡', label:'å³æ™‚æ‰•ã„ç”³è«‹',     url:'coreto-instant-pay.html' },
    ]},
  ],
  pt: [
    { section:'ãƒ¡ã‚¤ãƒ³', items:[
      { id:'dashboard', icon:'ğŸ“Š', label:'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰' },
    ]},
    { section:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ©Ÿèƒ½', items:[
      { id:'pt-portal', icon:'ğŸŒ', label:'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒãƒ¼ã‚¿ãƒ«ï¼ˆå…¨æ©Ÿèƒ½ï¼‰', url:'coreto-partner.html' },
    ]},
    { section:'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£', items:[
      { id:'line-link',        icon:'ğŸ’¬', label:'LINEé€£æº',            url:'coreto-line-link.html' },
      { id:'account-settings', icon:'âš™ï¸',  label:'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š',    url:'coreto-account-settings.html' },
      { id:'kyc',         icon:'ğŸªª', label:'eKYCãƒ»æœ¬äººç¢ºèª',   url:'coreto-kyc.html' },
      { id:'instant-pay', icon:'âš¡', label:'å³æ™‚æ‰•ã„ç”³è«‹',     url:'coreto-instant-pay.html' },
    ]},
  ],
};

let currentPageId = 'dashboard';

function buildSidebar() {
  const sections = session.type === 'hq' ? getHQNav() : (SIDEBAR_NAV[session.type] || []);
  const sb = document.getElementById('sidebar');
  // Clear except footer
  while (sb.firstChild && !sb.firstChild.classList?.contains('sidebar-footer')) {
    sb.removeChild(sb.firstChild);
  }
  const footer = sb.querySelector('.sidebar-footer');
  sb.innerHTML = '';

  sections.forEach(sec => {
    const label = document.createElement('div');
    label.className = 'nav-section-label';
    label.textContent = sec.section;
    sb.appendChild(label);
    sec.items.forEach(item => {
      const el = document.createElement('div');
      el.className = 'nav-item' + (item.id===currentPageId?' on':'');
      el.id = 'nav-' + item.id;
      el.innerHTML = `<div class="ni-icon">${item.icon}</div>${item.label}`
        + (item.badge ? `<span class="ni-badge">${item.badge}</span>` : '')
        + (item.url ? '<span class="ni-ext">â†—</span>' : '');
      if (item.url) {
        el.onclick = () => openTool(item.url, item.id);
      } else {
        el.onclick = () => showPage(item.id);
      }
      sb.appendChild(el);
    });
  });

  const foot = document.createElement('div');
  foot.className = 'sidebar-footer';
  foot.innerHTML = `<div class="sf-id">ID: ${session.userId}</div><div style="font-size:9px;color:var(--muted);margin-top:3px">v2.0 Build 2026.02</div>`;
  sb.appendChild(foot);
}

function openTool(url, id) {
  // Update nav highlight
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('on'));
  const el = document.getElementById('nav-'+id);
  if (el) el.classList.add('on');
  currentPageId = id;
  window.open(url, '_blank');
}

function showPage(pageId) {
  currentPageId = pageId;
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('on'));
  const el = document.getElementById('nav-'+pageId);
  if (el) el.classList.add('on');
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('on'));
  const pg = document.getElementById('page-'+pageId);
  if (pg) {
    pg.classList.add('on');
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONTENT PAGES (built per role)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildContent() {
  const content = document.getElementById('content');
  content.innerHTML = '';
  if (session.type === 'hq') {
    content.innerHTML = hqDashboardHTML() + hqToolsHTML();
  } else if (session.type === 're') {
    content.innerHTML = reAgentDashHTML() + agToolsHTML('re');
  } else if (session.type === 'hr') {
    content.innerHTML = hrAgentDashHTML() + agToolsHTML('hr');
  } else if (session.type === 'pt') {
    content.innerHTML = ptDashHTML();
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HQ DASHBOARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function hqDashboardHTML() {
  const role = session.hqRole || 'staff';
  const roleLabel = { exec:'çµ±æ‹¬ï¼ˆçµŒå–¶é™£ï¼‰', manager:'ç®¡ç†è·', staff:'ã‚¹ã‚¿ãƒƒãƒ•' }[role] || role;
  const execBanner = role === 'exec' ? `
  <div style="display:flex;gap:10px;margin-bottom:16px">
    <a href="coreto-exec-dashboard.html" style="flex:1;display:flex;align-items:center;gap:10px;padding:12px 16px;background:linear-gradient(135deg,rgba(201,168,64,.15),rgba(201,168,64,.05));border:1px solid rgba(201,168,64,.3);border-radius:10px;text-decoration:none;color:var(--gold);font-size:12px;font-weight:700;transition:all .2s" onmouseover="this.style.opacity='.8'" onmouseout="this.style.opacity='1'">
      ğŸ“ˆ <span>åç›Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆP&Lï¼‰</span><span style="margin-left:auto;font-size:10px">â†—</span>
    </a>
    <a href="coreto-agent-mgmt.html" style="flex:1;display:flex;align-items:center;gap:10px;padding:12px 16px;background:linear-gradient(135deg,rgba(201,168,64,.15),rgba(201,168,64,.05));border:1px solid rgba(201,168,64,.3);border-radius:10px;text-decoration:none;color:var(--gold);font-size:12px;font-weight:700;transition:all .2s" onmouseover="this.style.opacity='.8'" onmouseout="this.style.opacity='1'">
      ğŸ‘¥ <span>å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†</span><span style="margin-left:auto;font-size:10px">â†—</span>
    </a>
    <a href="coreto-network-tree.html" style="flex:1;display:flex;align-items:center;gap:10px;padding:12px 16px;background:linear-gradient(135deg,rgba(201,168,64,.15),rgba(201,168,64,.05));border:1px solid rgba(201,168,64,.3);border-radius:10px;text-decoration:none;color:var(--gold);font-size:12px;font-weight:700;transition:all .2s" onmouseover="this.style.opacity='.8'" onmouseout="this.style.opacity='1'">
      ğŸŒ <span>ç´¹ä»‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å›³</span><span style="margin-left:auto;font-size:10px">â†—</span>
    </a>
  </div>` : '';
  return `<div class="page on" id="page-dashboard">
  <div class="page-hdr">
    <div class="page-title">HQ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ <span style="font-size:11px;padding:2px 8px;background:rgba(201,168,64,.15);color:var(--gold);border-radius:5px;margin-left:8px;vertical-align:middle">${roleLabel}</span></div>
    <div class="page-sub">CORETO æ¥­å‹™çŠ¶æ³ã®æ¦‚è¦ â€” 2026å¹´2æœˆ21æ—¥ï¼ˆåœŸï¼‰ç¾åœ¨</div>
  </div>
  ${execBanner}
  <!-- Alerts -->
  <div class="alert-bar alert-bar-red">
    ğŸš¨ <strong>æ—©æœŸé€€è·ã‚¢ãƒ©ãƒ¼ãƒˆï¼š</strong> å¯¾å¿œå¾…ã¡ 2ä»¶ã€è¿”é‡‘è¦è«‹åˆè¨ˆ Â¥693,000ã€€
    <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-early-quit.html','early-quit')" style="margin-left:auto">å¯¾å¿œã™ã‚‹ â†—</button>
  </div>
  <div class="alert-bar alert-bar-orange" style="margin-bottom:12px">
    ğŸªª <strong>KYCå¯©æŸ»å¾…ã¡ï¼š</strong> 4ä»¶ã®æœ¬äººç¢ºèªæ›¸é¡ãŒæœªå‡¦ç†ã€€
    <span style="color:var(--muted);font-size:10px;margin-left:8px">åç¾©ä¸ä¸€è‡´ãƒ•ãƒ©ã‚° 1ä»¶ âš </span>
    <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-kyc.html','kyc')" style="margin-left:auto">å¯©æŸ»ã™ã‚‹ â†—</button>
  </div>
  <div class="alert-bar alert-bar-orange" style="margin-bottom:12px">
    âš¡ <strong>å³æ™‚æ‰•ã„ç”³è«‹ï¼š</strong> 2FAèªè¨¼æ¸ˆã¿æŒ¯è¾¼å¾…ã¡ 3ä»¶ ï¼ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯ 1ä»¶
    <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-instant-pay.html','instant-pay')" style="margin-left:auto">å‡¦ç†ã™ã‚‹ â†—</button>
  </div>
  <div class="alert-bar alert-bar-orange">
    â° <strong>åœ¨ç±ç¢ºèªæœŸé™ï¼š</strong> éˆ´æœ¨ å¥ä¸€ã®ç¬¬2å›æ”¯æ‰•ã„ãŒæœ¬æ—¥æœŸé™ã€‚åœ¨ç±ç¢ºèªãŒæœªå®Œäº†ã§ã™ã€‚
    <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-early-quit.html','early-quit')" style="margin-left:auto">ç¢ºèªã™ã‚‹ â†—</button>
  </div>

  <!-- Stats -->
  <div class="stats-grid sg-5">
    <div class="stat">
      <div class="stat-ico">ğŸ“‹</div>
      <div class="stat-val" style="color:var(--blue)">24</div>
      <div class="stat-label">ä»Šæœˆã®é€²è¡Œä¸­æ¡ˆä»¶</div>
      <div class="stat-sub" style="color:var(--green)">â–² +4 å…ˆæœˆæ¯”</div>
    </div>
    <div class="stat">
      <div class="stat-ico">âœ…</div>
      <div class="stat-val" style="color:var(--green)">18</div>
      <div class="stat-label">ä»Šæœˆã®æˆç´„ä»¶æ•°</div>
      <div class="stat-sub" style="color:var(--sub)">ç›®æ¨™ï¼š20ä»¶</div>
    </div>
    <div class="stat">
      <div class="stat-ico">ğŸ‘¥</div>
      <div class="stat-val" style="color:var(--purple)">31</div>
      <div class="stat-label">ç¨¼åƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</div>
      <div class="stat-sub" style="color:var(--sub)">RE:18 / HR:13</div>
    </div>
    <div class="stat">
      <div class="stat-ico">ğŸ’°</div>
      <div class="stat-val" style="color:var(--gold);font-size:18px">Â¥6,840,000</div>
      <div class="stat-label">ä»Šæœˆã®æŒ¯è¾¼äºˆå®šé¡</div>
      <div class="stat-sub" style="color:var(--sub)">3æœˆ25æ—¥ãƒãƒƒãƒ</div>
    </div>
    <div class="stat">
      <div class="stat-ico">âš ï¸</div>
      <div class="stat-val" style="color:var(--red)">2</div>
      <div class="stat-label">æ—©æœŸé€€è· å¯¾å¿œå¾…ã¡</div>
      <div class="stat-sub" style="color:var(--red)">è¿”é‡‘ Â¥693,000</div>
    </div>
  </div>

  <div class="grid-2r">
    <div>
      <!-- Recent activity -->
      <div class="card" style="margin-bottom:16px">
        <div class="card-hdr">
          <div class="ch-title">æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£</div>
          <span class="pill pill-muted">æœ¬æ—¥</span>
        </div>
        <div class="card-body" style="padding:0 18px">
          <div class="feed">
            ${[
              ['ğŸ ','å±±ç”° èª  ãŒ R0234 ã‚’æˆç´„å ±å‘Š','10åˆ†å‰','blue'],
              ['ğŸ“‹','ç”°ä¸­ ç¾ç©‚ ã® HRæ¡ˆä»¶ã€Œéˆ´æœ¨ å¥ä¸€ã€åœ¨ç±ç¢ºèªæœŸé™','30åˆ†å‰','orange'],
              ['âš ï¸','æ¸¡è¾º éš†ã®æ—©æœŸé€€è·ã‚¢ãƒ©ãƒ¼ãƒˆ â€” è¿”é‡‘è¦å¯¾å¿œ','2æ™‚é–“å‰','red'],
              ['ğŸ”–','ç‰¹åˆ¥ã‚³ãƒ¼ãƒ‰ CAMP_2025 ã®æœ‰åŠ¹æœŸé™åˆ‡ã‚Œ','3æ™‚é–“å‰','muted'],
              ['âœ…','ä½è—¤ èŠ±å­ ãŒ R0228 æ›¸é¡ã‚¹ã‚­ãƒ£ãƒ³å®Œäº†','æ˜¨æ—¥','green'],
              ['ğŸ’´','2æœˆåˆ†æŒ¯è¾¼ãƒãƒƒãƒå‡¦ç†å®Œäº† â€” 28å Â¥6.1M','æ˜¨æ—¥','gold'],
            ].map(([ic,msg,time,col])=>`
              <div class="feed-item">
                <div class="fi-dot" style="background:rgba(${col==='blue'?'79,156,249':col==='orange'?'251,146,60':col==='red'?'248,113,113':col==='green'?'52,211,153':col==='gold'?'201,168,76':'74,82,112'},.12)">${ic}</div>
                <div class="fi-content">
                  <div class="fi-msg">${msg}</div>
                  <div class="fi-time">${time}</div>
                </div>
              </div>`).join('')}
          </div>
        </div>
      </div>

      <!-- Agent ranking -->
      <div class="card">
        <div class="card-hdr">
          <div class="ch-title">ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ä»Šæœˆãƒ©ãƒ³ã‚­ãƒ³ã‚°</div>
          <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-admin-rbac.html','rbac')">è©³ç´° â†—</button>
        </div>
        <div style="overflow-x:auto">
          <table class="tbl">
            <thead><tr>
              <th>#</th><th>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</th><th>ç¨®åˆ¥</th><th>ä»Šæœˆæˆç´„</th><th>ä»Šæœˆå ±é…¬</th><th>ãƒ©ãƒ³ã‚¯</th>
            </tr></thead>
            <tbody>
              ${[
                [1,'ä½è—¤ èŠ±å­','RE',5,'Â¥1,312,500','Platinum','var(--purple)'],
                [2,'å±±ç”° èª ','RE',4,'Â¥980,000','Gold','var(--gold)'],
                [3,'ç”°ä¸­ ç¾ç©‚','HR',3,'Â¥693,000','Gold','var(--gold)'],
                [4,'éˆ´æœ¨ å¥å¤ª','RE',3,'Â¥742,500','Silver','var(--green)'],
                [5,'æ¸¡è¾º éš†','RE',2,'Â¥412,500','Bronze','var(--orange)'],
              ].map(([rank,name,type,count,rew,r,col])=>`
                <tr>
                  <td class="mono" style="color:var(--muted)">${rank}</td>
                  <td style="font-weight:700">${name}</td>
                  <td><span class="pill ${type==='RE'?'pill-blue':'pill-green'}">${type}</span></td>
                  <td class="mono">${count}ä»¶</td>
                  <td class="mono" style="color:var(--gold);font-weight:700">${rew}</td>
                  <td><span class="pill" style="background:${col}1a;color:${col};border:1px solid ${col}44">${r}</span></td>
                </tr>`).join('')}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Right side -->
    <div>
      <!-- Quick launch -->
      <div class="card" style="margin-bottom:14px">
        <div class="card-hdr"><div class="ch-title">ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</div></div>
        <div class="card-body" style="display:flex;flex-direction:column;gap:8px">
          ${[
            ['ğŸ“‹','æ›¸é¡å¯©æŸ»ã‚’é–‹å§‹','coreto-screening.html','screening'],
            ['ğŸ¯','ãƒãƒƒãƒãƒ³ã‚°','coreto-matching.html','matching'],
            ['ğŸ’´','æ”¯æ‰•æ˜ç´°ã‚’ä½œæˆ','coreto-payment.html','payment'],
            ['âš ï¸','æ—©æœŸé€€è·ã‚’ç¢ºèª','coreto-early-quit.html','early-quit'],
            ['ğŸ”–','ç´¹ä»‹ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†','coreto-codes.html','codes'],
            ['ğŸ“Š','ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ã‚’ç¢ºèª','coreto-system-overview.html','overview'],
          ].map(([ic,label,url,id])=>`
            <button class="btn btn-ghost" style="justify-content:flex-start;width:100%;font-size:11px"
                    onclick="openTool('${url}','${id}')">
              ${ic} ${label} <span style="margin-left:auto;color:var(--muted)">â†—</span>
            </button>`).join('')}
        </div>
      </div>

      <!-- Monthly summary -->
      <div class="card">
        <div class="card-hdr"><div class="ch-title">ä»Šæœˆã®åç›Šã‚µãƒãƒªãƒ¼</div></div>
        <div class="card-body">
          ${[
            ['RE æˆç´„æ‰‹æ•°æ–™','Â¥4,812,500'],
            ['HR æˆç´„æ‰‹æ•°æ–™','Â¥2,310,000'],
            ['ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå ±é…¬','- Â¥6,024,375'],
            ['ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å ±é…¬','- Â¥577,500'],
          ].map(([k,v])=>`
            <div style="display:flex;justify-content:space-between;font-size:12px;
                        padding:7px 0;border-bottom:1px solid rgba(30,34,53,.5)">
              <span style="color:var(--sub)">${k}</span>
              <span class="mono" style="font-weight:700;color:${v.startsWith('-')?'var(--red)':'var(--text)'}">${v}</span>
            </div>`).join('')}
          <div style="display:flex;justify-content:space-between;font-size:14px;padding:10px 0 0">
            <span style="color:var(--sub)">åç›Šåˆè¨ˆ</span>
            <span class="mono" style="font-weight:700;color:var(--green)">Â¥520,625</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>`;
}

function hqToolsHTML() {
  const role = session.hqRole || 'staff';
  const userTools = TOOLS.filter(t =>
    t.roles.includes('hq') && canSeeHqRole(t.minHqRole || 'staff')
  );
  const sections = [...new Set(userTools.map(t=>t.section))];
  let html = `<div class="page" id="page-tools">
    <div class="page-hdr">
      <div class="page-title">å…¨ãƒ„ãƒ¼ãƒ«ä¸€è¦§</div>
      <div class="page-sub">CORETOã®å…¨æ©Ÿèƒ½ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆ${userTools.length}ãƒ„ãƒ¼ãƒ«ï¼‰</div>
    </div>`;
  sections.forEach(sec => {
    const ts = userTools.filter(t=>t.section===sec);
    html += `<div style="font-size:9px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-bottom:10px;margin-top:20px">${sec}</div>`;
    html += `<div class="tool-grid" style="margin-bottom:0">`;
    ts.forEach(t => {
      html += `<div class="tool-card" style="--tc-color:${t.color}" onclick="openTool('${t.url}','${t.id}')">
        <div class="tc-top">
          <div class="tc-icon" style="background:${t.color}18;border:1px solid ${t.color}30;font-size:22px">${t.icon}</div>
          <span class="pill pill-muted" style="font-size:8px">${t.roles.includes('hq')&&t.roles.length>1?'å…±æœ‰':'HQå°‚ç”¨'}</span>
        </div>
        <div class="tc-name">${t.name}</div>
        <div class="tc-desc">${t.desc}</div>
        <div class="tc-footer">
          <span class="tc-role">${t.section}</span>
          <span class="tc-open" style="color:${t.color}">é–‹ã â†—</span>
        </div>
      </div>`;
    });
    html += `</div>`;
  });
  return html + `</div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RE AGENT DASHBOARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function reAgentDashHTML() {
  const u = session;
  const rankColors = { platinum:'var(--purple)', gold:'var(--gold)', silver:'var(--green)', bronze:'var(--orange)' };
  const rankCol = rankColors[u.rankKey] || 'var(--muted)';
  const rankPts = { platinum:30, gold:20, silver:10, bronze:5 };
  const pts = rankPts[u.rankKey] || 5;
  const nextRank = { bronze:'Silver', silver:'Gold', gold:'Platinum', platinum:'â€”' };
  const nextPts = { bronze:10, silver:20, gold:30, platinum:30 };
  const pct = Math.min(100, Math.round(pts / nextPts[u.rankKey] * 100));

  return `<div class="page on" id="page-dashboard">
  <div class="page-hdr">
    <div class="page-title">ã“ã‚“ã«ã¡ã¯ã€${u.name}ã•ã‚“</div>
    <div class="page-sub">ä¸å‹•ç”£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â€” 2026å¹´2æœˆ20æ—¥</div>
  </div>

  <!-- Alert if any -->
  <div class="alert-bar alert-bar-orange" style="margin-bottom:16px">
    â° R0228 ã® ITé‡èª¬ãŒæœªå®Œäº†ã§ã™ã€‚ä»Šæœˆæœ«ã¾ã§ã«å¯¾å¿œã—ã¦ãã ã•ã„ã€‚
    <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-it-setsu.html','it-setsu')" style="margin-left:auto">å¯¾å¿œ â†—</button>
  </div>

  <!-- Stats -->
  <div class="stats-grid sg-4">
    <div class="stat">
      <div class="stat-ico">ğŸ“‹</div>
      <div class="stat-val" style="color:var(--blue)">6</div>
      <div class="stat-label">é€²è¡Œä¸­ã®æ¡ˆä»¶</div>
      <div class="stat-sub" style="color:var(--sub)">ä»Šæœˆ +2ä»¶</div>
    </div>
    <div class="stat">
      <div class="stat-ico">âœ…</div>
      <div class="stat-val" style="color:var(--green)">4</div>
      <div class="stat-label">ä»Šæœˆã®æˆç´„</div>
      <div class="stat-sub" style="color:var(--green)">ç›®æ¨™é”æˆä¸­</div>
    </div>
    <div class="stat">
      <div class="stat-ico">â­</div>
      <div class="stat-val" style="color:${rankCol}">${pts} pt</div>
      <div class="stat-label">ä»Šæœˆã®ãƒã‚¤ãƒ³ãƒˆ</div>
      <div class="stat-sub" style="color:var(--sub)">æ¬¡ã®ãƒ©ãƒ³ã‚¯ï¼š${nextRank[u.rankKey]}</div>
    </div>
    <div class="stat">
      <div class="stat-ico">ğŸ’°</div>
      <div class="stat-val" style="color:var(--gold);font-size:20px">Â¥980,000</div>
      <div class="stat-label">ä»Šæœˆã®å ±é…¬ï¼ˆç¨æŠœï¼‰</div>
      <div class="stat-sub" style="color:var(--sub)">3æœˆ25æ—¥æŒ¯è¾¼</div>
    </div>
  </div>

  <div class="grid-2r">
    <div>
      <!-- Current cases -->
      <div class="card" style="margin-bottom:16px">
        <div class="card-hdr">
          <div class="ch-title">æ‹…å½“æ¡ˆä»¶ï¼ˆé€²è¡Œä¸­ï¼‰</div>
          <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-agent-mypage.html','mypage')">å…¨ä»¶è¡¨ç¤º â†—</button>
        </div>
        <div style="overflow-x:auto">
          <table class="tbl">
            <thead><tr><th>Case ID</th><th>é¡§å®¢å</th><th>ç‰©ä»¶</th><th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th><th>æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th></tr></thead>
            <tbody>
              ${[
                ['R0234','ç”°ä¸­ é›„ä»‹','æ¸‹è°·åŒºæ±2ä¸ç›® 302å·å®¤','ITé‡èª¬å¾…ã¡','pill-orange','coreto-it-setsu.html','it-setsu'],
                ['R0228','ä½è—¤ æ˜æ—¥é¦™','æ¸¯åŒºå—é’å±± 1LDK','æ›¸é¡ã‚¹ã‚­ãƒ£ãƒ³ä¸­','pill-blue','coreto-it-setsu.html','it-setsu'],
                ['R0241','æœ¨æ‘ ç¿”å¤ª','æ–°å®¿åŒºè¥¿æ–°å®¿ 2LDK','å†…è¦‹èª¿æ•´','pill-blue','coreto-naiken.html','naiken'],
                ['R0245','æ— ã•ãã‚‰','ç›®é»’åŒºä¸­ç›®é»’ 1K','ç”³è¾¼æ›¸é¡åé›†','pill-blue','coreto-batch-close.html','batch-close'],
              ].map(([cid,client,prop,status,pc,url,tid])=>`
                <tr>
                  <td class="mono" style="font-size:10px;color:var(--sub)">${cid}</td>
                  <td style="font-weight:700">${client}</td>
                  <td style="font-size:11px;color:var(--sub)">${prop}</td>
                  <td><span class="pill ${pc}">${status}</span></td>
                  <td><button class="btn btn-ghost btn-sm" onclick="openTool('${url}','${tid}')">å¯¾å¿œ â†—</button></td>
                </tr>`).join('')}
            </tbody>
          </table>
        </div>
      </div>

      <!-- Quick tools -->
      <div class="card">
        <div class="card-hdr"><div class="ch-title">æ¥­å‹™ãƒ„ãƒ¼ãƒ« ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹</div></div>
        <div class="card-body">
          <div class="grid-3">
            ${[
              ['ğŸ“','ITé‡èª¬ãƒ»æ›¸é¡','coreto-it-setsu.html','it-setsu','var(--green)'],
              ['ğŸ ','ç‰©ä»¶å†…è¦‹','coreto-naiken.html','naiken','var(--blue)'],
              ['âœ…','æˆç´„ã‚¯ãƒ­ãƒ¼ã‚º','coreto-batch-close.html','batch-close','var(--green)'],
              ['ğŸ“®','ãƒ©ãƒ™ãƒ«å°åˆ·','coreto-thermal-label.html','label','var(--orange)'],
              ['ğŸ“¡','ã‚¹ã‚­ãƒ£ãƒ³','coreto-barcode-scan.html','barcode','var(--teal)'],
              ['â­','ãƒ©ãƒ³ã‚¯ç¢ºèª','coreto-rank.html','rank','var(--gold)'],
            ].map(([ic,label,url,id,col])=>`
              <div onclick="openTool('${url}','${id}')" style="background:${col}0d;border:1px solid ${col}25;
                   border-radius:11px;padding:14px;text-align:center;cursor:pointer;transition:all .15s"
                   onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform=''">
                <div style="font-size:22px;margin-bottom:6px">${ic}</div>
                <div style="font-size:11px;font-weight:700;color:${col}">${label}</div>
              </div>`).join('')}
          </div>
        </div>
      </div>
    </div>

    <!-- Right -->
    <div>
      <!-- Rank card -->
      <div class="card" style="margin-bottom:14px">
        <div class="card-hdr"><div class="ch-title">ãƒ©ãƒ³ã‚¯çŠ¶æ³</div></div>
        <div class="card-body">
          <div class="rank-display" style="margin-bottom:14px">
            <div class="rank-ring-wrap">
              <svg viewBox="0 0 70 70" fill="none">
                <circle cx="35" cy="35" r="28" stroke="var(--border2)" stroke-width="6"/>
                <circle cx="35" cy="35" r="28" stroke="${rankCol}" stroke-width="6"
                  stroke-dasharray="${Math.round(2*3.14159*28*pct/100)} ${Math.round(2*3.14159*28*(100-pct)/100)}"
                  stroke-linecap="round"/>
              </svg>
              <div class="rank-ring-inner" style="font-size:16px">${u.rank==='Platinum'?'ğŸ’':u.rank==='Gold'?'ğŸ¥‡':u.rank==='Silver'?'ğŸ¥ˆ':'ğŸ¥‰'}</div>
            </div>
            <div>
              <div style="font-size:18px;font-weight:800;color:${rankCol}">${u.rank}</div>
              <div style="font-size:11px;color:var(--sub);margin-top:2px">${pts} pt ä»Šæœˆ</div>
              <div style="font-size:10px;color:var(--muted);margin-top:6px">æ¬¡ï¼š${nextRank[u.rankKey]}ï¼ˆ${nextPts[u.rankKey]}ptï¼‰</div>
              <div class="prog-wrap" style="width:120px"><div class="prog-fill" style="width:${pct}%;background:${rankCol}"></div></div>
            </div>
          </div>
          <button class="btn btn-ghost btn-sm" style="width:100%;justify-content:center" onclick="openTool('coreto-rank.html','rank')">
            è©³ç´°ãƒ»å ±é…¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ â†—
          </button>
        </div>
      </div>

      <!-- My page link -->
      <div class="card" style="margin-bottom:14px">
        <div class="card-hdr"><div class="ch-title">ãƒã‚¤ãƒšãƒ¼ã‚¸</div></div>
        <div class="card-body" style="display:flex;flex-direction:column;gap:8px">
          <button class="btn btn-ghost btn-sm" style="width:100%;justify-content:flex-start" onclick="openTool('coreto-agent-mypage.html','mypage')">
            ğŸ‘¤ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ»è¨­å®š â†—
          </button>
          <button class="btn btn-ghost btn-sm" style="width:100%;justify-content:flex-start" onclick="openTool('coreto-commission-simulator.html','simulator')">
            ğŸ§® å ±é…¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ â†—
          </button>
        </div>
      </div>

      <!-- Tips -->
      <div style="background:var(--card2);border:1px solid var(--border);border-radius:12px;padding:14px">
        <div style="font-size:10px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:10px">ä»Šæœˆã®ç›®æ¨™ã¾ã§</div>
        <div style="font-size:12px;color:var(--sub);line-height:1.9">
          æˆç´„ <strong style="color:var(--text)">ã‚ã¨2ä»¶</strong> ã§æœˆé–“ç›®æ¨™é”æˆ<br>
          ãƒã‚¤ãƒ³ãƒˆ <strong style="color:var(--gold)">ã‚ã¨${nextPts[u.rankKey]-pts}pt</strong> ã§ ${nextRank[u.rankKey]} æ˜‡æ ¼
        </div>
      </div>
    </div>
  </div>
</div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HR AGENT DASHBOARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function hrAgentDashHTML() {
  const u = session;
  return `<div class="page on" id="page-dashboard">
  <div class="page-hdr">
    <div class="page-title">ã“ã‚“ã«ã¡ã¯ã€${u.name}ã•ã‚“</div>
    <div class="page-sub">HRã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â€” 2026å¹´2æœˆ20æ—¥</div>
  </div>

  <div class="alert-bar alert-bar-red" style="margin-bottom:16px">
    âš ï¸ éˆ´æœ¨ å¥ä¸€ æ¡ˆä»¶ã®åœ¨ç±ç¢ºèªãŒæœ¬æ—¥æœŸé™ã§ã™ã€‚ç¢ºèªå¾Œã€Œåœ¨ç±OKã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚
    <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-early-quit.html','early-quit-ag')" style="margin-left:auto">å¯¾å¿œ â†—</button>
  </div>

  <div class="stats-grid sg-4">
    <div class="stat"><div class="stat-ico">ğŸ“‹</div><div class="stat-val" style="color:var(--green)">4</div><div class="stat-label">HR æ‹…å½“æ¡ˆä»¶</div></div>
    <div class="stat"><div class="stat-ico">âœ…</div><div class="stat-val" style="color:var(--green)">2</div><div class="stat-label">åœ¨ç±ç¢ºèªæ¸ˆã¿</div></div>
    <div class="stat"><div class="stat-ico">âš ï¸</div><div class="stat-val" style="color:var(--red)">1</div><div class="stat-label">é€€è·ã‚¢ãƒ©ãƒ¼ãƒˆ</div></div>
    <div class="stat"><div class="stat-ico">ğŸ’°</div><div class="stat-val" style="color:var(--gold);font-size:20px">Â¥693,000</div><div class="stat-label">ä»Šæœˆã®å ±é…¬äºˆå®š</div></div>
  </div>

  <div class="grid-2r">
    <div>
      <div class="card" style="margin-bottom:16px">
        <div class="card-hdr">
          <div class="ch-title">æ‹…å½“HRæ¡ˆä»¶</div>
          <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-early-quit.html','early-quit-ag')">æ—©æœŸé€€è·ç®¡ç† â†—</button>
        </div>
        <div style="overflow-x:auto">
          <table class="tbl">
            <thead><tr><th>å€™è£œè€…</th><th>ä¼æ¥­å</th><th>å…¥ç¤¾æ—¥</th><th>ç¬¬2å›æ”¯æ‰•</th><th>åœ¨ç±</th></tr></thead>
            <tbody>
              ${[
                ['éˆ´æœ¨ å¥ä¸€','ãˆ±ABCãƒ†ã‚¯ãƒ','2025/11/20','2026/02/20','â° æœ¬æ—¥æœŸé™','pill-red'],
                ['ä¸­æ‘ å„ªé¦™','ãˆ±ã‚µãƒ³ãƒ©ã‚¤ã‚º','2025/11/28','2026/02/28','ç¢ºèªå¾…ã¡','pill-blue'],
                ['é«˜æ©‹ ç¿”å¤ª','åˆåŒä¼šç¤¾ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼','2025/12/05','2026/03/05','âœ“ ç¢ºèªæ¸ˆ','pill-green'],
                ['æ— ã•ãã‚‰','ãˆ±ãƒã‚¯ã‚¹ãƒˆã‚­ãƒ£ãƒªã‚¢','2025/12/18','2026/03/18','âœ“ ç¢ºèªæ¸ˆ','pill-green'],
              ].map(([name,company,join,pay2,att,pc])=>`
                <tr>
                  <td style="font-weight:700">${name}</td>
                  <td style="font-size:11px">${company}</td>
                  <td class="mono" style="font-size:11px">${join}</td>
                  <td class="mono" style="font-size:11px">${pay2}</td>
                  <td><span class="pill ${pc}">${att}</span></td>
                </tr>`).join('')}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div>
      <div class="card" style="margin-bottom:14px">
        <div class="card-hdr"><div class="ch-title">HR ãƒ„ãƒ¼ãƒ«</div></div>
        <div class="card-body" style="display:flex;flex-direction:column;gap:8px">
          <button class="btn btn-ghost btn-sm" style="width:100%;justify-content:flex-start" onclick="openTool('coreto-early-quit.html','early-quit-ag')">
            âš ï¸ æ—©æœŸé€€è·ã‚¢ãƒ©ãƒ¼ãƒˆãƒ»è¿”é‡‘æ¡ä»¶ç™»éŒ² â†—
          </button>
          <button class="btn btn-ghost btn-sm" style="width:100%;justify-content:flex-start" onclick="openTool('coreto-rank.html','rank')">
            â­ ãƒ©ãƒ³ã‚¯ãƒ»ãƒã‚¤ãƒ³ãƒˆç¢ºèª â†—
          </button>
          <button class="btn btn-ghost btn-sm" style="width:100%;justify-content:flex-start" onclick="openTool('coreto-agent-mypage.html','mypage')">
            ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸ â†—
          </button>
          <button class="btn btn-ghost btn-sm" style="width:100%;justify-content:flex-start" onclick="openTool('coreto-commission-simulator.html','simulator')">
            ğŸ§® å ±é…¬ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ â†—
          </button>
        </div>
      </div>
    </div>
  </div>
</div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PARTNER DASHBOARD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ptDashHTML() {
  return `<div class="page on" id="page-dashboard">
  <div class="page-hdr">
    <div class="page-title">ã“ã‚“ã«ã¡ã¯ã€ä½è—¤ ç¾å’²ã•ã‚“</div>
    <div class="page-sub">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ â€” 2026å¹´2æœˆ20æ—¥</div>
  </div>

  <div class="stats-grid sg-4">
    <div class="stat"><div class="stat-ico">ğŸ“‹</div><div class="stat-val" style="color:var(--blue)">8</div><div class="stat-label">ç´¹ä»‹æ¡ˆä»¶ï¼ˆç´¯è¨ˆï¼‰</div></div>
    <div class="stat"><div class="stat-ico">âœ…</div><div class="stat-val" style="color:var(--green)">5</div><div class="stat-label">æˆç´„ä»¶æ•°</div></div>
    <div class="stat"><div class="stat-ico">ğŸ”—</div><div class="stat-val" style="color:var(--purple)">8</div><div class="stat-label">ã‚³ãƒ¼ãƒ‰ä½¿ç”¨å›æ•°</div></div>
    <div class="stat"><div class="stat-ico">ğŸ’°</div><div class="stat-val" style="color:var(--gold);font-size:20px">Â¥523,750</div><div class="stat-label">ç´¯è¨ˆå ±é…¬</div></div>
  </div>

  <div class="grid-2r">
    <div>
      <div class="card" style="margin-bottom:16px">
        <div class="card-hdr">
          <div class="ch-title">ç´¹ä»‹æ¡ˆä»¶ï¼ˆç›´è¿‘ï¼‰</div>
          <button class="btn btn-ghost btn-sm" onclick="openTool('coreto-partner.html','pt-portal')">å…¨ä»¶ãƒ»è©³ç´° â†—</button>
        </div>
        <div style="overflow-x:auto">
          <table class="tbl">
            <thead><tr><th>é¡§å®¢å</th><th>ç‰©ä»¶</th><th>æ‹…å½“AG</th><th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th><th>å ±é…¬</th></tr></thead>
            <tbody>
              ${[
                ['ç”°ä¸­ é›„ä»‹','æ¸‹è°·åŒºæ±2ä¸ç›®','å±±ç”° èª ','âœ“ æˆç´„','Â¥83,750','pill-green'],
                ['éˆ´æœ¨ æ˜æ—¥é¦™','æ¸¯åŒºå—é’å±±','ä½è—¤ èŠ±å­','âœ“ æˆç´„','Â¥55,000','pill-green'],
                ['ä¸­æ‘ ãˆã¿','å“å·åŒºå¤§å´','å±±ç”° èª ','é€²è¡Œä¸­','â€”','pill-blue'],
                ['æ¸¡è¾º ç¿”','æ¸‹è°·åŒºä»£å®˜å±±','éˆ´æœ¨ å¥å¤ª','é€²è¡Œä¸­','â€”','pill-blue'],
              ].map(([c,p,ag,s,r,pc])=>`
                <tr>
                  <td style="font-weight:700">${c}</td>
                  <td style="font-size:11px;color:var(--sub)">${p}</td>
                  <td style="font-size:11px">${ag}</td>
                  <td><span class="pill ${pc}">${s}</span></td>
                  <td class="mono" style="color:var(--gold);font-weight:700">${r}</td>
                </tr>`).join('')}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div>
      <!-- Code card -->
      <div class="card" style="margin-bottom:14px">
        <div class="card-hdr"><div class="ch-title">ç´¹ä»‹ã‚³ãƒ¼ãƒ‰</div></div>
        <div class="card-body">
          <div style="font-family:'DM Mono',monospace;font-size:24px;font-weight:700;
                      color:var(--gold);letter-spacing:4px;text-align:center;padding:8px 0 14px">PT-SATO2026</div>
          <button class="btn btn-primary" style="width:100%;justify-content:center"
                  onclick="navigator.clipboard.writeText('PT-SATO2026').then(()=>alert('âœ… ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ'))">
            ğŸ“‹ ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼
          </button>
          <button class="btn btn-ghost btn-sm" style="width:100%;justify-content:center;margin-top:8px"
                  onclick="openTool('coreto-partner.html','pt-portal')">
            ç´¹ä»‹ã‚³ãƒ¼ãƒ‰è©³ç´°ãƒ»QR â†—
          </button>
        </div>
      </div>

      <!-- Next payment -->
      <div class="card">
        <div class="card-hdr"><div class="ch-title">æ¬¡å›æŒ¯è¾¼</div></div>
        <div class="card-body">
          <div style="font-size:26px;font-weight:700;color:var(--gold);font-family:'DM Mono',monospace">Â¥83,750</div>
          <div style="font-size:11px;color:var(--sub);margin:4px 0 14px">2026å¹´3æœˆ25æ—¥ æŒ¯è¾¼äºˆå®š</div>
          <button class="btn btn-ghost btn-sm" style="width:100%;justify-content:center"
                  onclick="openTool('coreto-partner.html','pt-portal')">
            æŒ¯è¾¼æ˜ç´°ã‚’ç¢ºèª â†—
          </button>
        </div>
      </div>
    </div>
  </div>

  <div style="margin-top:16px;text-align:center">
    <button class="btn btn-primary" style="font-size:13px;padding:12px 32px" onclick="openTool('coreto-partner.html','pt-portal')">
      ğŸŒ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒãƒ¼ã‚¿ãƒ«ï¼ˆå…¨æ©Ÿèƒ½ï¼‰ã‚’é–‹ã â†—
    </button>
  </div>
</div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  AGENT TOOLS PAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function agToolsHTML(type) {
  const userTools = TOOLS.filter(t=>t.roles.includes(type));
  const sections = [...new Set(userTools.map(t=>t.section))];
  let html = `<div class="page" id="page-tools">
    <div class="page-hdr">
      <div class="page-title">ãƒ„ãƒ¼ãƒ«ä¸€è¦§</div>
      <div class="page-sub">åˆ©ç”¨å¯èƒ½ãªCORETOãƒ„ãƒ¼ãƒ«ï¼ˆ${userTools.length}ãƒ„ãƒ¼ãƒ«ï¼‰</div>
    </div>`;
  sections.forEach(sec => {
    const ts = userTools.filter(t=>t.section===sec);
    html += `<div style="font-size:9px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-bottom:10px;margin-top:20px">${sec}</div>`;
    html += `<div class="tool-grid" style="margin-bottom:0">`;
    ts.forEach(t => {
      html += `<div class="tool-card" style="--tc-color:${t.color}" onclick="openTool('${t.url}','${t.id}')">
        <div class="tc-top">
          <div class="tc-icon" style="background:${t.color}18;border:1px solid ${t.color}30;font-size:22px">${t.icon}</div>
        </div>
        <div class="tc-name">${t.name}</div>
        <div class="tc-desc">${t.desc}</div>
        <div class="tc-footer">
          <span class="tc-role">${t.section}</span>
          <span class="tc-open" style="color:${t.color}">é–‹ã â†—</span>
        </div>
      </div>`;
    });
    html += `</div>`;
  });
  return html + `</div>`;
}
</script>
</body>
</html>