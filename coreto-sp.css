/* ═══════════════════════════════════════════════════════════════
   coreto-sp.css  —  CORETO スマートフォン対応スタイルシート
   対象: login / signup / mypage / partner / kyc / instant-pay
         itsetsu-booking / sale-report / pipeline / onboarding
   ════════════════════════════════════════════════════════════ */

/* ── タッチスクロール最適化（全デバイス共通） ─────────────── */
* { -webkit-tap-highlight-color: transparent; }
input, select, textarea, button { touch-action: manipulation; }

@media (max-width: 768px) {

/* ══ BASE ═══════════════════════════════════════════════════ */
html { -webkit-text-size-adjust: 100%; }
body { min-height: 100dvh; }

/* ── スクロールバー非表示 */
::-webkit-scrollbar { display: none; }

/* ── セーフエリア対応 */
.sp-safe-bottom { padding-bottom: calc(env(safe-area-inset-bottom) + 68px) !important; }

/* ══ SHARED BOTTOM NAVIGATION ═══════════════════════════════ */
.sp-bottom-nav {
  display: flex !important;
  position: fixed;
  bottom: 0; left: 0; right: 0;
  height: calc(58px + env(safe-area-inset-bottom));
  padding-bottom: env(safe-area-inset-bottom);
  background: rgba(11,13,24,.97);
  border-top: 1px solid #1e2338;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  z-index: 9000;
  justify-content: space-around;
  align-items: stretch;
}
.sp-nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 3px;
  flex: 1;
  padding: 6px 0;
  cursor: pointer;
  text-decoration: none;
  color: #4a5270;
  border: none;
  background: transparent;
  font-family: 'Noto Sans JP', sans-serif;
  transition: color .15s;
  position: relative;
  -webkit-tap-highlight-color: transparent;
}
.sp-nav-item.on,
.sp-nav-item:active { color: #c9a84c; }
.sp-nav-item .sp-nav-icon { font-size: 22px; line-height: 1; }
.sp-nav-item .sp-nav-label { font-size: 8px; font-weight: 700; letter-spacing: .3px; }
.sp-nav-badge {
  position: absolute;
  top: 4px; right: calc(50% - 16px);
  background: #f87171; color: #fff;
  font-size: 8px; font-weight: 700;
  padding: 1px 5px; border-radius: 10px;
  min-width: 16px; text-align: center;
}

/* ══ SHARED HEADER ════════════════════════════════════════════ */
.hdr, .header { 
  padding: 0 16px !important;
  height: 50px !important;
}
.logo { font-size: 14px !important; letter-spacing: 2px !important; }

/* ══ SHARED CARDS / WRAP ═════════════════════════════════════ */
.wrap, .page, .body {
  padding: 16px 14px 80px !important;
  max-width: 100% !important;
}
.card { border-radius: 12px !important; }
.cb { padding: 14px 16px !important; }
.ch { padding: 11px 16px !important; }

/* ══ SHARED FORMS ════════════════════════════════════════════ */
.g2, .g3, .fg-row, .fg-row3 {
  grid-template-columns: 1fr !important;
  gap: 0 !important;
}
.field input,
.field select,
.field textarea,
input:not([type=checkbox]):not([type=radio]),
select,
textarea {
  font-size: 16px !important; /* iOSズームを防ぐ */
  padding: 12px 14px !important;
  min-height: 48px;
}
.field label, label { font-size: 11px !important; }

/* ══ SHARED BUTTONS ══════════════════════════════════════════ */
.btn, button.btn {
  min-height: 48px;
  font-size: 13px !important;
}
.btn-sm { min-height: 36px; font-size: 11px !important; }
.btn-xs { min-height: 32px; font-size: 10px !important; }

/* ══ SHARED MODALS ═══════════════════════════════════════════ */
.modal-overlay, .modal-bg, .overlay {
  align-items: flex-end !important;
  padding: 0 !important;
}
.modal, .modal-box, .modal-card {
  width: 100% !important;
  max-width: 100% !important;
  max-height: 90dvh !important;
  border-radius: 20px 20px 0 0 !important;
  padding-bottom: calc(env(safe-area-inset-bottom) + 16px) !important;
}

/* ══ SHARED ALERTS ═══════════════════════════════════════════ */
.al, .alert { font-size: 11px !important; }

/* ══ PAGE: LOGIN ═════════════════════════════════════════════ */
/* login.html */
body .wrap.login-wrap,
.wrap[style] {
  padding: 0 !important;
  width: 100% !important;
}
.card.login-card {
  width: 100% !important;
  max-width: 100% !important;
  border-radius: 0 !important;
  min-height: 100dvh !important;
  border: none !important;
  padding: 40px 24px 40px !important;
}

/* ══ PAGE: AGENT SIGNUP ══════════════════════════════════════ */
.steps { 
  gap: 0 !important;
  padding: 14px 12px !important;
  overflow-x: auto;
}
.step { max-width: 80px !important; min-width: 64px; }
.step-dot { width: 28px !important; height: 28px !important; font-size: 11px !important; }
.step-lbl { font-size: 8px !important; }
/* 2カラムグリッドを1カラムに */
.g2 { display: flex !important; flex-direction: column !important; }

/* ══ PAGE: AGENT MYPAGE ══════════════════════════════════════ */
.main {
  padding: 14px 14px 80px !important;
  max-width: 100% !important;
}
/* プロフィールバナーを縦積みに */
.profile-banner {
  flex-direction: column !important;
  gap: 12px !important;
  padding: 16px !important;
}
.profile-stats {
  display: flex !important;
  flex-direction: row !important;
  gap: 20px !important;
  width: 100%;
}
.ps-item { margin-top: 0 !important; }
/* アクショングリッドを2カラムに */
.action-grid {
  grid-template-columns: repeat(2, 1fr) !important;
  gap: 8px !important;
}
/* コンテンツグリッドを1カラムに */
.content-grid {
  grid-template-columns: 1fr !important;
  gap: 0 !important;
}
/* ランクプログレスバーを全幅に */
.rank-progress { width: 100% !important; }

/* ══ PAGE: PARTNER PORTAL ════════════════════════════════════ */
/* サイドバーを非表示（JS でボトムナビ生成） */
.sidebar { display: none !important; }
/* コンテンツエリアを全幅に */
.content, .sp-partner-content {
  margin-left: 0 !important;
  width: 100% !important;
  padding: 14px 14px 80px !important;
}
/* パートナーのグリッドを1〜2カラムに */
.code-stat-grid,
.stat-grid {
  grid-template-columns: repeat(2, 1fr) !important;
}
.card-grid,
[style*="grid-template-columns:repeat(4"] {
  grid-template-columns: repeat(2, 1fr) !important;
}

/* ══ PAGE: PARTNER FEED ══════════════════════════════════════ */
.feed-grid, .cards-grid {
  grid-template-columns: 1fr !important;
}

/* ══ PAGE: KYC ═══════════════════════════════════════════════ */
/* KYCのラッパー */
.kyc-wrap, .page.kyc {
  padding: 14px 14px 80px !important;
  max-width: 100% !important;
}
/* アップロードボックス */
.upload-box {
  padding: 20px !important;
  min-height: 100px !important;
}
/* 3カラム → 1カラム */
.g3 { display: flex !important; flex-direction: column !important; }

/* ══ PAGE: INSTANT PAY ═══════════════════════════════════════ */
/* 金額入力を大きく */
.amount-input, #amount, input[type=number] {
  font-size: 24px !important;
  text-align: center !important;
}
.breakdown-row {
  font-size: 12px !important;
}
/* OTPフォーム */
.otp-input { 
  letter-spacing: 8px !important;
  font-size: 22px !important;
  text-align: center !important;
}

/* ══ PAGE: IT重説 BOOKING ════════════════════════════════════ */
/* カレンダーを全幅に */
.cal-grid-outer {
  max-height: 50dvh !important;
  overflow: auto !important;
}
.cal-grid td, .cal-grid th {
  padding: 6px 3px !important;
}
.cal-cell-avail {
  width: 30px !important;
  height: 30px !important;
  font-size: 13px !important;
}
/* 希望日時セクション */
.booking-wish-wrap {
  grid-template-columns: 1fr !important;
}
/* 確認モーダルをボトムシートに */
.booking-confirm-modal {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  border-radius: 20px 20px 0 0 !important;
  max-height: 85dvh !important;
  overflow-y: auto !important;
}

/* ══ PAGE: SALE REPORT ═══════════════════════════════════════ */
.page { padding: 14px 14px 80px !important; }
/* フォームカードを全幅に */
.fg { margin-bottom: 14px !important; }
/* 報酬プレビューボックス */
.reward-box, .box-agent-reward, .box-exec-reward {
  border-radius: 12px !important;
  padding: 16px !important;
}

/* ══ PAGE: PIPELINE ══════════════════════════════════════════ */
/* デスクトップカンバンを隠す（JS で切替） */
body.sp-mode .board-wrap { display: none !important; }
body.sp-mode .panel.open { 
  position: fixed !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100dvh !important;
  z-index: 8000 !important;
  border-radius: 0 !important;
  overflow-y: auto !important;
}
/* SPリストビュー */
.sp-list-view {
  display: none;
  padding: 10px 12px 80px;
  overflow-y: auto;
  flex: 1;
}
body.sp-mode .sp-list-view { display: block; }
.sp-section-hdr {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 4px 6px;
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: #4a5270;
  border-bottom: 1px solid #1e2235;
  margin-bottom: 8px;
  margin-top: 8px;
}
.sp-section-hdr:first-child { margin-top: 0; }
.sp-section-dot {
  width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0;
}
.sp-section-count {
  margin-left: auto;
  font-size: 8px;
  padding: 1px 7px;
  border-radius: 8px;
  background: rgba(79,156,249,.1);
  color: #4f9cf9;
}
.sp-case-row {
  background: #0f1119;
  border: 1px solid #1e2235;
  border-radius: 11px;
  padding: 12px 14px;
  margin-bottom: 7px;
  cursor: pointer;
  transition: border-color .15s;
  -webkit-tap-highlight-color: transparent;
}
.sp-case-row:active { border-color: #c9a84c; background: #13110a; }
.sp-case-row.stale-row { border-color: rgba(248,113,113,.2); }
.sp-row-top {
  display: flex;
  align-items: center;
  gap: 7px;
  margin-bottom: 5px;
}
.sp-row-id {
  font-family: 'DM Mono', monospace;
  font-size: 9px;
  color: #4a5270;
}
.sp-type-pill {
  font-size: 8px;
  font-weight: 800;
  padding: 2px 7px;
  border-radius: 4px;
  letter-spacing: .3px;
}
.sp-type-reLet  { background: rgba(79,156,249,.12); color: #4f9cf9; }
.sp-type-reSale { background: rgba(201,168,76,.12);  color: #c9a84c; }
.sp-type-sannai { background: rgba(167,139,250,.12); color: #a78bfa; }
.sp-type-hr     { background: rgba(45,212,191,.12);  color: #2dd4bf; }
.sp-stale-dot {
  margin-left: auto;
  width: 7px; height: 7px; border-radius: 50%;
  background: #f87171;
  animation: blink 2s infinite;
}
.sp-row-name {
  font-size: 14px;
  font-weight: 700;
  margin-bottom: 2px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.sp-row-sub {
  font-size: 11px;
  color: #7a849e;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-bottom: 7px;
}
.sp-row-foot {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-top: 7px;
  border-top: 1px solid #1e2235;
}
.sp-row-agent {
  font-size: 9px;
  color: #4a5270;
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.sp-row-step {
  font-size: 8px;
  padding: 2px 7px;
  border-radius: 4px;
  background: #141720;
  color: #7a849e;
  border: 1px solid #1e2235;
}
.sp-row-age {
  font-family: 'DM Mono', monospace;
  font-size: 9px;
}
.sp-row-age.age-new { color: #34d399; }
.sp-row-age.age-mid { color: #fb923c; }
.sp-row-age.age-old { color: #f87171; }

/* SPリスト上部ツールバー */
.sp-toolbar {
  display: none;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #0b0d18;
  border-bottom: 1px solid #1e2235;
  position: sticky;
  top: 0;
  z-index: 100;
}
body.sp-mode .sp-toolbar { display: flex; }
body.sp-mode .toolbar { display: none; }
.sp-search-input {
  flex: 1;
  background: #0f1119;
  border: 1px solid #252a3d;
  border-radius: 10px;
  color: #e2e6f3;
  font-family: 'Noto Sans JP', sans-serif;
  font-size: 14px;
  padding: 9px 13px;
  outline: none;
  min-height: 42px;
}
.sp-search-input:focus { border-color: #4f9cf9; }
.sp-filter-scroll {
  display: none;
  overflow-x: auto;
  padding: 8px 12px;
  gap: 7px;
  background: #07090f;
  border-bottom: 1px solid #1e2235;
  -webkit-overflow-scrolling: touch;
}
body.sp-mode .sp-filter-scroll { display: flex; }
.sp-filter-chip {
  flex-shrink: 0;
  font-size: 9px;
  font-weight: 700;
  padding: 4px 11px;
  border-radius: 20px;
  border: 1px solid #252a3d;
  color: #7a849e;
  background: transparent;
  cursor: pointer;
  font-family: 'Noto Sans JP', sans-serif;
  white-space: nowrap;
  min-height: 30px;
  display: flex;
  align-items: center;
}
.sp-filter-chip.on { border-color: #c9a84c; color: #c9a84c; background: rgba(201,168,76,.07); }

/* パネル閉じるボタン（SP時） */
.sp-panel-close {
  display: none;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-bottom: 1px solid #1e2235;
  cursor: pointer;
  font-size: 13px;
  color: #7a849e;
  background: #0f1119;
  position: sticky;
  top: 0;
  z-index: 10;
}
body.sp-mode .panel.open .sp-panel-close { display: flex; }

/* ══ PAGE: ONBOARDING ════════════════════════════════════════ */
.onboarding-grid {
  grid-template-columns: 1fr !important;
}

/* ══ 追加 UTILITY ════════════════════════════════════════════ */
/* テーブルを横スクロールに */
.tbl-wrap, table:not(.cal-grid) {
  display: block;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
/* ヘッダーの余分なボタンを縮小 */
.hdr-right button:not(:first-child),
.header-right button:not(:first-child) {
  display: none;
}
/* Floatingアクションボタン */
.sp-fab {
  display: flex !important;
  position: fixed;
  bottom: calc(68px + env(safe-area-inset-bottom) + 16px);
  right: 20px;
  width: 52px; height: 52px;
  border-radius: 50%;
  background: linear-gradient(135deg, #c9a84c, #e8c96a);
  color: #0a0c10;
  border: none;
  cursor: pointer;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  box-shadow: 0 4px 20px rgba(201,168,76,.35);
  z-index: 8990;
  transition: transform .15s;
}
.sp-fab:active { transform: scale(.94); }

/* ── 空状態・読込 */
.sp-empty {
  text-align: center;
  padding: 48px 20px;
  color: #4a5270;
  font-size: 13px;
}
.sp-empty-icon { font-size: 36px; margin-bottom: 8px; }

/* ── アニメーション */
@keyframes sp-slide-up {
  from { transform: translateY(20px); opacity: 0; }
  to   { transform: translateY(0);    opacity: 1; }
}
.sp-slide-up { animation: sp-slide-up .25s ease-out; }

} /* end @media 768px */

/* ── 横向きスマホ対応 */
@media (max-width: 768px) and (orientation: landscape) {
  .sp-bottom-nav { height: calc(50px + env(safe-area-inset-bottom)); }
}

/* ══════════════════════════════════════════════════════════════
   EXTENDED SP STYLES  (naiken / it-setsu / receipt / partner-nav)
   ══════════════════════════════════════════════════════════════ */

@media (max-width: 768px) {

/* ══ PAGE: 内見依頼書 (naiken) ════════════════════════════════ */

/* ヘッダー縮小 */
.header { padding: 0 14px !important; height: 48px !important; }
.header .logo { font-size: 14px !important; }

/* タブ横スクロール */
.tabs {
  padding: 0 !important;
  overflow-x: auto !important;
  -webkit-overflow-scrolling: touch !important;
  display: flex !important;
  white-space: nowrap !important;
  gap: 0 !important;
  scrollbar-width: none;
}
.tabs::-webkit-scrollbar { display: none; }
.tab {
  flex-shrink: 0 !important;
  padding: 11px 16px !important;
  font-size: 11px !important;
}

/* ページコンテナ */
.page { padding: 14px 14px 88px !important; max-width: 100% !important; }

/* 2カラム → 1カラム */
.page > div[style*="grid-template-columns:400px"],
.page > div[style*="grid-template-columns: 400px"] {
  display: flex !important;
  flex-direction: column !important;
  gap: 12px !important;
}
.row2, .row3, .row4 {
  grid-template-columns: 1fr !important;
  gap: 8px !important;
}
/* 1fr 320px レイアウト */
.db-layout {
  grid-template-columns: 1fr !important;
}

/* パネル */
.panel { border-radius: 12px !important; padding: 14px !important; }
.panel-title { font-size: 11px !important; }

/* 内見依頼書プレビューをフルウィドスに */
#preview-panel {
  position: static !important;
  width: 100% !important;
}
/* 宛先入力フォーム */
.naiken-field-row { flex-direction: column !important; gap: 6px !important; }
.naiken-field-row label { min-width: auto !important; }

/* テーブル横スクロール */
.naiken-table { font-size: 11px !important; }
.naiken-table th, .naiken-table td { padding: 7px 8px !important; white-space: nowrap !important; }

/* 発行ボタンを大きく */
button.btn-issue, button[style*="background:var(--gold)"] {
  min-height: 48px !important;
  font-size: 14px !important;
  width: 100% !important;
}

/* エージェントカード */
.agent-cards { grid-template-columns: repeat(2, 1fr) !important; }
.agent-card { padding: 12px !important; }

/* 顧客DB検索バー */
.cl-search-wrap input { min-height: 44px !important; font-size: 16px !important; }

/* ══ PAGE: IT重説 (it-setsu) ══════════════════════════════════ */

/* 2ペインレイアウト → スタック */
.layout {
  display: flex !important;
  flex-direction: column !important;
  height: auto !important;
  overflow: visible !important;
}

/* 左ペイン（案件リスト）: 全幅・固定高に */
.caselist {
  width: 100% !important;
  height: auto !important;
  border-right: none !important;
  border-bottom: 1px solid #1e2338 !important;
  max-height: 40dvh !important;
  overflow-y: auto !important;
}
.cl-header { padding: 10px 14px !important; }
.cl-title { font-size: 12px !important; }
.cl-filter { gap: 4px !important; padding: 6px 10px !important; overflow-x: auto; white-space: nowrap; }
.clf { font-size: 9px !important; padding: 4px 10px !important; flex-shrink: 0; }

/* 案件リストアイテム */
.case-item-it { padding: 10px 14px !important; }

/* 右ペイン（詳細）: 全幅 */
.main { width: 100% !important; min-height: 60dvh !important; }

/* タイムラインタブ */
.timeline-tabs { overflow-x: auto !important; white-space: nowrap !important; flex-wrap: nowrap !important; }
.tt { flex-shrink: 0 !important; padding: 10px 14px !important; font-size: 10px !important; }

/* ケースヘッダー */
.case-hdr { padding: 12px 14px !important; }
.case-name { font-size: 14px !important; }

/* チェックリスト */
.checklist-item { padding: 10px 12px !important; }
.ci-label { font-size: 12px !important; }

/* ドキュメントアップロードエリア */
.upload-zone { padding: 16px !important; min-height: 80px !important; }

/* クイックアクションバー */
#docs-quickbar button { font-size: 11px !important; padding: 7px 10px !important; }

/* Slack送信ボタン */
#slack-all-btn { font-size: 12px !important; min-height: 44px !important; width: 100% !important; }

/* ══ PAGE: 領収書・請求書 (receipt) ══════════════════════════ */

/* サイドバー非表示 */
.sidebar { display: none !important; }

/* メインを全幅に */
.main { margin-left: 0 !important; width: 100% !important; padding: 14px 14px 88px !important; }

/* KPIグリッドを2×2に */
.kpi-grid { grid-template-columns: repeat(2, 1fr) !important; gap: 8px !important; }
.kpi { padding: 12px !important; }
.kv { font-size: 18px !important; }

/* テーブルを横スクロール */
.tbl-wrap { overflow-x: auto !important; -webkit-overflow-scrolling: touch !important; }
.tbl { font-size: 11px !important; white-space: nowrap !important; }

/* カード */
.card { border-radius: 12px !important; }
.ch { padding: 12px 14px !important; }
.cb { padding: 14px !important; }
.ch-t { font-size: 11px !important; }

/* サイドバーナビをドロワーとして上部に */
.sb-section { font-size: 8px !important; }
.sb-item { padding: 9px 12px !important; font-size: 12px !important; }

/* 印刷・DLボタン */
.btn.btn-ghost.btn-sm { min-height: 36px !important; font-size: 10px !important; }

/* ══ PAGE: FAQ ════════════════════════════════════════════════ */

.faq-wrap, .faq-page { padding: 14px 14px 88px !important; max-width: 100% !important; }
.faq-header { padding: 14px 14px !important; }
.faq-search input { min-height: 44px !important; font-size: 16px !important; }
.faq-grid { grid-template-columns: 1fr !important; }
.faq-item { padding: 14px !important; }
.faq-q { font-size: 13px !important; }
.faq-a { font-size: 12px !important; }

/* ══ RECEIPT SP ナビ ══════════════════════════════════════════ */
.receipt-sp-nav-tabs {
  display: flex;
  overflow-x: auto;
  gap: 0;
  border-bottom: 1px solid #1e2338;
  padding: 0 14px;
  background: #0b0d18;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}
.receipt-sp-nav-tabs::-webkit-scrollbar { display: none; }
.receipt-sp-tab {
  flex-shrink: 0;
  padding: 10px 16px;
  font-size: 11px;
  font-weight: 700;
  color: #4a5270;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  white-space: nowrap;
  background: transparent;
  border-left: none; border-right: none; border-top: none;
  font-family: inherit;
  -webkit-tap-highlight-color: transparent;
}
.receipt-sp-tab.on { color: #c9a84c; border-bottom-color: #c9a84c; }

} /* end @media 768px */

/* ══════════════════════════════════════════════════════════════
   EXTENDED SP v2  — rank / contract / payment / partner nav
   ══════════════════════════════════════════════════════════════ */

@media (max-width: 768px) {

/* ══ SHARED: sp-mode body ════════════════════════════════════ */
body.sp-mode .hq-only { display: none !important; }

/* ══ PAGE: PARTNER (partner.html) ════════════════════════════ */

/* サイドバー（デスクトップ左ナビ）を非表示 */
.pt-sidebar,
.sidebar.pt-sidebar { display: none !important; }

/* コンテンツを全幅に */
.pt-content {
  margin-left: 0 !important;
  width: 100% !important;
  padding: 14px 14px 88px !important;
}

/* パートナーヘッダーのプロフィール部分 */
.pt-header-inner {
  flex-direction: column !important;
  gap: 10px !important;
  padding: 14px 16px !important;
}
.pt-avatar-wrap { align-self: center !important; }

/* ダッシュボードグリッドを2カラムに */
.pt-stat-grid {
  grid-template-columns: repeat(2, 1fr) !important;
  gap: 8px !important;
}

/* 案件カードをシングルに */
.pt-case-grid,
.pt-reward-grid {
  grid-template-columns: 1fr !important;
}

/* チャット画面をフルスクリーンに */
.chat-panel,
.pt-chat {
  position: fixed !important;
  inset: 0 !important;
  z-index: 8500 !important;
  border-radius: 0 !important;
  height: 100dvh !important;
}

/* ══ PAGE: RANK (rank.html) ══════════════════════════════════ */

/* タブを横スクロール */
.tabs {
  overflow-x: auto !important;
  -webkit-overflow-scrolling: touch !important;
  flex-wrap: nowrap !important;
  gap: 0 !important;
  padding: 0 !important;
}
.tab {
  flex-shrink: 0 !important;
  padding: 11px 18px !important;
  font-size: 11px !important;
  white-space: nowrap !important;
}

/* ページコンテナ */
.rank-page,
.rank-wrap {
  padding: 14px 14px 88px !important;
  max-width: 100% !important;
}

/* ランクカードをシングルに */
.rank-grid,
.rank-cards {
  grid-template-columns: 1fr !important;
  gap: 10px !important;
}

/* ポイント・統計グリッドを2カラムに */
.pts-grid,
.stat-box-grid {
  grid-template-columns: repeat(2, 1fr) !important;
  gap: 8px !important;
}

/* テーブルを横スクロールに */
.rank-table,
.stab-table {
  display: block !important;
  overflow-x: auto !important;
  -webkit-overflow-scrolling: touch !important;
  white-space: nowrap !important;
}

/* メインのdivを1カラムに */
.page-wrap > div,
.page-inner {
  flex-direction: column !important;
  gap: 12px !important;
}

/* 紹介リンクフロートボタンをSP向けに上げる */
#ref-float-btn {
  bottom: calc(80px + env(safe-area-inset-bottom)) !important;
  right: 14px !important;
  font-size: 12px !important;
  padding: 9px 14px !important;
}

/* 紹介モーダルをボトムシートに */
#ref-modal-overlay {
  align-items: flex-end !important;
}
#ref-modal {
  width: 100% !important;
  border-radius: 20px 20px 0 0 !important;
  max-height: 80dvh !important;
  overflow-y: auto !important;
}

/* ══ PAGE: CONTRACT (contract.html) ══════════════════════════ */

/* レイアウト：サイドバー + メイン → 縦積みに */
.layout {
  flex-direction: column !important;
  height: auto !important;
  overflow: visible !important;
}

/* サイドバーをヘッダー下の横スクロールリストに */
.sidebar {
  width: 100% !important;
  height: auto !important;
  border-right: none !important;
  border-bottom: 1px solid #1e2338 !important;
  overflow-x: auto !important;
  -webkit-overflow-scrolling: touch !important;
  display: flex !important;
  flex-direction: row !important;
  gap: 0 !important;
  padding: 8px !important;
  flex-shrink: 0 !important;
}

/* サイドバーアイテムをタブ化 */
.sidebar .sidebar-item,
.sidebar .sb-item,
.sb-item {
  flex-shrink: 0 !important;
  white-space: nowrap !important;
  padding: 8px 14px !important;
  font-size: 11px !important;
  border-radius: 20px !important;
  margin-right: 6px !important;
}
.sidebar .sidebar-hd,
.sb-section-hd {
  display: none !important;
}

/* メインエリア */
.main {
  padding: 14px 14px 88px !important;
  overflow-y: auto !important;
}

/* 契約書カードを全幅に */
.contract-card,
.ptitle { font-size: 14px !important; }

/* 電子署名モーダル */
.modal-overlay { align-items: flex-end !important; }
.modal-box {
  width: 100% !important;
  border-radius: 20px 20px 0 0 !important;
  padding-bottom: calc(env(safe-area-inset-bottom) + 20px) !important;
}

/* 署名キャンバスをフルウィドスに */
#sig-canvas {
  width: 100% !important;
  touch-action: none !important;
}

/* テーブルを横スクロールに */
.contract-table {
  overflow-x: auto !important;
  display: block !important;
}

/* ══ PAGE: PAYMENT (payment.html) ════════════════════════════ */

/* レイアウト */
.payment-layout,
.layout {
  flex-direction: column !important;
  height: auto !important;
}

/* エディタパネルを全幅に */
.editor-panel,
.ed-panel {
  width: 100% !important;
  padding: 14px 14px 88px !important;
  overflow-y: auto !important;
}

/* プレビューパネルを非表示（ボタンで切替）*/
.preview-panel,
.pv-panel {
  display: none !important;
}
.preview-panel.sp-show,
.pv-panel.sp-show {
  display: block !important;
  position: fixed !important;
  inset: 0 !important;
  z-index: 8500 !important;
  overflow-y: auto !important;
  background: var(--bg, #07090f) !important;
}

/* 明細書プレビューボタン（SP専用） */
.sp-preview-toggle {
  display: flex !important;
  position: fixed !important;
  bottom: calc(80px + env(safe-area-inset-bottom)) !important;
  right: 16px !important;
  background: linear-gradient(135deg, #c9a84c, #e8c96a) !important;
  color: #0a0c10 !important;
  border: none !important;
  border-radius: 24px !important;
  padding: 10px 16px !important;
  font-size: 12px !important;
  font-weight: 800 !important;
  cursor: pointer !important;
  box-shadow: 0 4px 20px rgba(201,168,76,.35) !important;
  z-index: 8400 !important;
  gap: 6px !important;
  align-items: center !important;
}

/* フォームグリッドを1カラムに */
.ed-grid,
.ed-row {
  grid-template-columns: 1fr !important;
  gap: 10px !important;
}

/* 明細書カードを縦積みに */
.stmt-wrap {
  padding: 14px !important;
}
.stmt-title { font-size: 16px !important; }
.stmt-grid {
  grid-template-columns: 1fr !important;
}
.st-box { padding: 14px !important; }

/* ══ SHARED: ボトムナビの上にFABを置く ═══════════════════════ */
.sp-fab,
#ref-float-btn {
  bottom: calc(80px + env(safe-area-inset-bottom) + 12px) !important;
}

/* ══ SHARED: アニメーション ══════════════════════════════════ */
@keyframes sp-fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
.sp-animate { animation: sp-fade-in .2s ease-out; }

/* ══ SP専用コンポーネント ════════════════════════════════════ */

/* SPプレビュートグルボタン */
.sp-preview-btn {
  display: none;
}
body.sp-mode .sp-preview-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  min-height: 48px;
  justify-content: center;
  background: rgba(201,168,76,.08);
  border: 1px solid rgba(201,168,76,.2);
  color: #c9a84c;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  margin-bottom: 14px;
}

/* PC専用要素をSPで非表示 */
body.sp-mode .pc-only { display: none !important; }
/* SP専用要素をPCで非表示 */
.sp-only { display: none !important; }
body.sp-mode .sp-only { display: block !important; }
body.sp-mode .sp-only-flex { display: flex !important; }

} /* end @media 768px */
